{"version":3,"sources":["webpack://zeta/webpack/universalModuleDefinition","webpack://zeta/./src/env.js","webpack://zeta/./src/shim.js","webpack://zeta/./src/util.js","webpack://zeta/./src/domUtil.js","webpack://zeta/./src/cssUtil.js","webpack://zeta/./src/events.js","webpack://zeta/./src/domLock.js","webpack://zeta/./src/dom.js","webpack://zeta/./src/index.js","webpack://zeta/external \"promise-polyfill\"","webpack://zeta/external {\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\",\"root\":\"$\"}","webpack://zeta/webpack/bootstrap","webpack://zeta/webpack/startup","webpack://zeta/webpack/runtime/define property getters","webpack://zeta/webpack/runtime/hasOwnProperty shorthand","webpack://zeta/webpack/runtime/make namespace object"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__44__","__WEBPACK_EXTERNAL_MODULE__804__","document","documentElement","IS_IOS","test","navigator","userAgent","window","MSStream","IS_IE10","ActiveXObject","IS_IE","undefined","style","msTouchAction","msUserSelect","IS_MAC","indexOf","IS_TOUCH","Map","map","key","items","this","_values","_keys","Set","prototype","length","has","v","get","index","set","i","push","delete","splice","keys","values","entries","forEach","callback","thisArg","call","clear","Iterator","arr","next","value","done","add","WeakMap","returnValue","num","state","Error","Object","defineProperty","configurable","hasOwnProperty","jQuery","Promise","freeze","getOwnPropertyDescriptor","getOwnPropertyNames","hasOwnPropertyImpl","propertyIsEnumerableImpl","propertyIsEnumerable","obj","vals","matchWordCache","watchStore","noop","either","x","y","isArray","Array","isFunction","isPlainObject","proto","getPrototypeOf","isArrayLike","makeArray","slice","each","extend","options","name","src","copy","copyIsArray","clone","target","arguments","deep","cur","split","len","nextNode","result","apply","any","single","kv","mapGet","fn","mapRemove","createPrivateStore","setImmediate","args","resolve","then","setTimeoutOnce","timeout","setTimeout","throwNotFunction","iequal","a","b","toLowerCase","randomId","Math","random","toString","substr","repeat","str","count","join","camel","String","replace","toUpperCase","hyphenate","ucfirst","charAt","lcfirst","trim","matchWord","haystack","needle","cache","RegExp","$1","htmlDecode","input","DOMParser","parseFromString","textContent","reject","reason","always","promise","resolveAll","d","catchAsync","catch","setPromiseTimeout","ms","resolveWhenTimeout","prop","getOwnPropertyDescriptors","props","o","p","definePrototype","defineOwnProperty","readonly","enumerable","writable","defineGetterProperty","defineHiddenProperty","inherit","create","deepFreeze","getObservableState","sync","oldValues","newValues","alias","handlers","handleChanges","lock","defineAliasProperty","targetProp","desc","defineObservableProperty","initialValue","setter","bind","watch","handler","fireInit","e","watchOnce","watchable","selection","getSelection","elementsFromPoint","msElementsFromPoint","compareDocumentPositionImpl","compareDocumentPosition","compareBoundaryPointsImpl","Range","compareBoundaryPoints","originDiv","Rect","l","t","r","left","top","right","bottom","collapse","side","offset","rect","pos","toPlainRect","translate","MutationObserver","records","takeRecords","observe","element","init","type","oldValue","prevValue","record","attributeName","attrName","attributeOldValue","characterDataOldValue","parentNode","addedNodes","some","containsOrEquals","subtree","tagName","is","selector","toFixed","nodeType","sameElementSpec","thisAttr","attributes","prevAttr","nodeName","comparePosition","strict","NaN","connected","commonAncestorContainer","container","contained","isVisible","getRect","width","height","getComputedStyle","display","iterateNode","iterator","from","until","currentNode","node","whatToShow","Node","filter","acceptNode","iterateNodeToArray","getCommonAncestor","parentsAndSelf","parent","selectIncludeSelf","matched","find","selectClosestRelative","$matched","createDocumentFragment","DocumentFragment","append","createTextNode","text","createElement","createNodeIterator","addOrRemoveEventListener","method","event","listener","useCapture","unbind","dispatchDOMMouseEvent","eventName","point","elementFromPoint","clientX","clientY","createEvent","initMouseEvent","bubbles","cancelable","view","detail","screenX","screenY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","dispatchEvent","removeNode","removeChild","getClass","className","re","setClass","replaced","concat","getScrollOffset","winOrElm","pageXOffset","scrollLeft","pageYOffset","scrollTop","scrollBy","body","orig","createRange","startNode","startOffset","endNode","endOffset","getRange","range","setStart","getOffset","setEnd","cloneRange","collapsed","inverse","startContainer","endContainer","rangeIntersects","rangeCovers","rangeEquals","compareRangePosition","abs","makeSelection","setBaseAndExtent","removeAllRanges","createTextRange","select","addRange","rangeCount","elm","includeMargin","div","appendChild","offsetWidth","offsetHeight","getBoundingClientRect","max","parseFloat","marginTop","marginLeft","marginRight","marginBottom","childNodes","min","getRects","getClientRects","clip","round","rectEquals","check","rectCovers","rectIntersects","pointInRect","within","mergeRect","pointerEvents","tmp","parentsUntil","css","parseCSS","styles","setAttribute","isCssUrlValue","$2","$3","animatableValue","allowNumber","removeVendorPrefix","runCSSTransition","map1","pseudoElement","transitionDuration","animationName","transitionProperty","targets","$","newStyle","appendPseudoToAnim","AnimationEvent","curStyle","transitionProperties","dict","j","curValue","newValue","prevAnim","size","propertyName","containers","domEventTrap","ZetaContainer","domContainer","_","eventSource","lastEventSource","ZetaComponent","states","ZetaEventHandlerState","context","ZetaEventSource","path","source","getEventSourceName","sourceKeyName","setLastEventSource","getEventSource","getContainer","exact","emitDOMEvent","nativeEvent","data","ZetaEventEmitter","emit","originalEvent","properties","timestamp","performance","now","sourceObj","ZetaEvent","components","asyncEvents","autoDestroy","containerEmitAsyncEvents","inst","attached","containerRemoveAsyncEvent","containerRegisterAsyncEvent","mergeData","containerRegisterWidgetEvent","isInit","containerGetContext","component","containerSetContext","callHandler","handlerName","lastEvent","handled","contextContainer","prevEventSource","prevEvent","console","error","getContext","isHandled","preventDefault","defaultPrevented","isDefaultPrevented","tap","setContext","handleMutations","mutations","changes","orphans","id","containerValidTarget","removedNodes","moptions","childList","observer","containerCreateObserver","emitEvent","emitAsync","flushEvents","destroy","lockedElements","handledErrors","retryable","oncancel","DOMLock","wait","locked","parents","removeLock","cancel","promises","force","deferred","reduce","finish","cancelled","onbeforeunload","KEYNAMES","JSON","parse","SELECTOR_FOCUSABLE","META_KEYS","OFFSET_ZERO","focusPath","focusFriends","focusElements","modalElements","domReady","windowFocusedOut","currentEvent","scrollbarWidth","approxMultipleOf","measureLine","p1","p2","dx","dy","deg","atan2","PI","sqrt","textInputAllowed","isContentEditable","focused","activeElement","focusable","friends","triggerFocusEvent","elements","setFocus","focusOnInput","lockParent","focusLockedWithin","removed","added","friend","unshift","focus","blur","modifierCount","modifiedKeyCode","mouseInitialPoint","mousedownFocus","pressTimeout","imeNode","imeOffset","imeText","dummy","appendTo","getEventName","suffix","mod","updateIMEState","selectionEnd","anchorNode","anchorOffset","child","triggerUIEvent","prev","char","triggerKeystrokeEvent","keyName","triggerMouseEvent","metakey","triggerGestureEvent","gesture","children","stopPropagation","stopImmediatePropagation","compositionstart","compositionupdate","compositionend","isInputElm","prevText","prevOffset","curText","o1","o2","newText","setSelectionRange","textInput","keydown","keyCode","isModifierKey","isSpecialKey","keyup","keypress","fromCharCode","charCode","synthetic","beforeinput","inputType","touchstart","touches","touchmove","clearTimeout","line","touchend","mousedown","buttons","which","mousemove","mouseup","wheel","dir","deltaY","click","contextmenu","dblclick","focusin","focusout","deltaX","scrollWidth","overflowX","scrollHeight","overflowY","modalPath","w","ready","setModal","focusWithin","retainFocus","releaseFocus","on","cancelLock","scrollIntoView","s","overflow","position","getScrollParent","parentRect","hasOverflowX","hasOverflowY","getUnobscuredRect","parentResult","watchElements","collection","util","shim","dom","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","definition","Symbol","toStringTag"],"mappings":"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","file":"zeta.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jquery\"), require(\"promise-polyfill\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"zeta\", [\"jquery\", \"promise-polyfill\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"zeta\"] = factory(require(\"jquery\"), require(\"promise-polyfill\"));\n\telse\n\t\troot[\"zeta\"] = factory(root[\"$\"], root[\"promise-polyfill\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__44__, __WEBPACK_EXTERNAL_MODULE__804__) {\nreturn ","// @ts-nocheck\r\nconst root = document.documentElement;\r\n\r\nexport const IS_IOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\nexport const IS_IE10 = !!window.ActiveXObject;\r\nexport const IS_IE = !!window.ActiveXObject || root.style.msTouchAction !== undefined || root.style.msUserSelect !== undefined;\r\nexport const IS_MAC = navigator.userAgent.indexOf('Macintosh') >= 0;\r\nexport const IS_TOUCH = 'ontouchstart' in window;\r\n","// @ts-nocheck\r\n\r\nconst Map = window.Map || (function () {\r\n    function indexOf(map, key) {\r\n        return map.items.indexOf(key);\r\n    }\r\n    function Map() {\r\n        var self = this;\r\n        self.items = [];\r\n        self._values = [];\r\n        self._keys = Set.prototype._keys;\r\n    }\r\n    Map.prototype = {\r\n        get size() {\r\n            return this.items.length;\r\n        },\r\n        has: function (v) {\r\n            return indexOf(this, v) >= 0;\r\n        },\r\n        get: function (v) {\r\n            var index = indexOf(this, v);\r\n            return index >= 0 ? this._values[index] : undefined;\r\n        },\r\n        set: function (i, v) {\r\n            var self = this;\r\n            var index = indexOf(self, i);\r\n            self._values[index >= 0 ? index : self.items.push(i) - 1] = v;\r\n            return self;\r\n        },\r\n        delete: function (v) {\r\n            var self = this;\r\n            var index = indexOf(self, v);\r\n            if (index >= 0) {\r\n                self.items.splice(index, 1);\r\n                self._values.splice(index, 1);\r\n            }\r\n            return index >= 0;\r\n        },\r\n        keys: function () {\r\n            return this._keys();\r\n        },\r\n        values: function () {\r\n            var self = this;\r\n            return self._keys(function (v) {\r\n                return self.get(v);\r\n            });\r\n        },\r\n        entries: function () {\r\n            var self = this;\r\n            return self._keys(function (v) {\r\n                return [v, self.get(v)];\r\n            });\r\n        },\r\n        forEach: function (callback, thisArg) {\r\n            var self = this;\r\n            self.items.forEach(function (v, i) {\r\n                callback.call(thisArg, self._values[i], v, self);\r\n            });\r\n        },\r\n        clear: function () {\r\n            this.items.splice(0);\r\n            this._values.splice(0);\r\n        }\r\n    };\r\n    return Map;\r\n}());\r\n\r\nconst Set = window.Set || (function () {\r\n    function Iterator(arr, callback) {\r\n        var self = this;\r\n        self.items = arr;\r\n        self.index = -1;\r\n        self.callback = callback || function (v) {\r\n            return v;\r\n        };\r\n    }\r\n    Iterator.prototype = {\r\n        next: function () {\r\n            var self = this;\r\n            if (++self.index < self.items.length) {\r\n                return {\r\n                    value: self.callback(self.items[self.index], self.index),\r\n                    done: false\r\n                };\r\n            }\r\n            return {\r\n                value: undefined,\r\n                done: true\r\n            };\r\n        }\r\n    };\r\n\r\n    function Set() {\r\n        this.items = [];\r\n    }\r\n    Set.prototype = {\r\n        get size() {\r\n            return this.items.length;\r\n        },\r\n        has: function (v) {\r\n            return this.items.indexOf(v) >= 0;\r\n        },\r\n        add: function (v) {\r\n            var items = this.items;\r\n            if (items.indexOf(v) < 0) {\r\n                items.push(v);\r\n            }\r\n            return this;\r\n        },\r\n        delete: function (v) {\r\n            var index = this.items.indexOf(v);\r\n            if (index >= 0) {\r\n                this.items.splice(index, 1);\r\n            }\r\n            return index >= 0;\r\n        },\r\n        keys: function () {\r\n            return this._keys();\r\n        },\r\n        values: function () {\r\n            return this._keys();\r\n        },\r\n        entries: function () {\r\n            return this._keys(function (v) {\r\n                return [v, v];\r\n            });\r\n        },\r\n        forEach: function (callback, thisArg) {\r\n            var self = this;\r\n            self.items.forEach(function (v) {\r\n                callback.call(thisArg, v, v, self);\r\n            });\r\n        },\r\n        clear: function () {\r\n            this.items.splice(0);\r\n        },\r\n        _keys: function (callback) {\r\n            return new Iterator(this.items, callback);\r\n        }\r\n    };\r\n    return Set;\r\n}());\r\n\r\nconst WeakMap = window.WeakMap || (function () {\r\n    var num = 0;\r\n    var state = 0;\r\n    var returnValue;\r\n\r\n    function WeakMap() {\r\n        this.key = '__WeakMap' + (++num);\r\n    }\r\n    WeakMap.prototype = {\r\n        get: function (key) {\r\n            if (this.has(key)) {\r\n                try {\r\n                    state = 1;\r\n                    key[this.key]();\r\n                    if (state !== 2) {\r\n                        throw new Error('Invalid operation');\r\n                    }\r\n                    var value = returnValue;\r\n                    returnValue = null;\r\n                    return value;\r\n                } finally {\r\n                    state = 0;\r\n                }\r\n            }\r\n        },\r\n        set: function (key, value) {\r\n            Object.defineProperty(key, this.key, {\r\n                configurable: true,\r\n                value: function () {\r\n                    if (state === 1) {\r\n                        returnValue = value;\r\n                        state = 2;\r\n                    }\r\n                }\r\n            });\r\n            return this;\r\n        },\r\n        has: function (key) {\r\n            return key && Object.hasOwnProperty.call(key, this.key);\r\n        },\r\n        delete: function (key) {\r\n            var has = this.has(key);\r\n            if (has) {\r\n                delete key[this.key];\r\n            }\r\n            return has;\r\n        }\r\n    };\r\n    return WeakMap;\r\n}());\r\n\r\nconst useRequire = typeof require === 'function';\r\nconst jQuery = window.jQuery || (useRequire && require('jquery'));\r\nconst Promise = window.Promise || (useRequire && require('promise-polyfill').default);\r\n\r\nexport {\r\n    jQuery as $,\r\n    Promise,\r\n    Map,\r\n    Set,\r\n    WeakMap\r\n};\r\n","import { Set, WeakMap, Promise } from \"./shim.js\";\r\n\r\nconst keys = Object.keys;\r\nconst freeze = Object.freeze;\r\nconst defineProperty = Object.defineProperty;\r\nconst getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\r\nconst getOwnPropertyNames = Object.getOwnPropertyNames;\r\nconst hasOwnPropertyImpl = Object.prototype.hasOwnProperty;\r\nconst propertyIsEnumerableImpl = Object.prototype.propertyIsEnumerable;\r\nconst values = Object.values || function (obj) {\r\n    var vals = [];\r\n    for (var key in obj) {\r\n        if (hasOwnPropertyImpl.call(obj, key) && propertyIsEnumerableImpl.call(obj, key)) {\r\n            vals.push(obj[key]);\r\n        }\r\n    }\r\n    return vals;\r\n};\r\n\r\nvar matchWordCache;\r\nvar watchStore;\r\n\r\n/* --------------------------------------\r\n * Miscellaneous\r\n * -------------------------------------- */\r\n\r\nfunction noop() { }\r\n\r\nfunction either(x, y) {\r\n    return x ^ y;\r\n}\r\n\r\nfunction isArray(obj) {\r\n    return Array.isArray(obj) && obj;\r\n}\r\n\r\nfunction isFunction(obj) {\r\n    return typeof obj === 'function' && obj;\r\n}\r\n\r\nfunction isPlainObject(obj) {\r\n    var proto = typeof obj === 'object' && obj !== null && Object.getPrototypeOf(obj);\r\n    return (proto === Object.prototype || proto === null) && obj;\r\n}\r\n\r\nfunction isArrayLike(obj) {\r\n    if (isFunction(obj) || obj === window) {\r\n        return false;\r\n    }\r\n    var length = !!obj && 'length' in obj && obj.length;\r\n    return isArray(obj) || length === 0 || (typeof length === 'number' && length > 0 && (length - 1) in obj);\r\n}\r\n\r\nfunction makeArray(obj) {\r\n    if (isArray(obj)) {\r\n        return obj.slice(0);\r\n    }\r\n    if (typeof obj === 'string') {\r\n        return [obj];\r\n    }\r\n    if (obj && (isArrayLike(obj) || isFunction(obj.forEach))) {\r\n        var arr = [];\r\n        each(obj, function (i, v) {\r\n            arr[arr.length] = v;\r\n        });\r\n        return arr;\r\n    }\r\n    return obj !== null && obj !== undefined ? [obj] : [];\r\n}\r\n\r\nfunction extend() {\r\n    var options, name, src, copy, copyIsArray, clone;\r\n    var target = arguments[0] || {};\r\n    var i = 1;\r\n    var length = arguments.length;\r\n    var deep = false;\r\n\r\n    if (typeof target === 'boolean') {\r\n        deep = target;\r\n        target = arguments[i] || {};\r\n        i++;\r\n    }\r\n    if (typeof target !== 'object' && !isFunction(target)) {\r\n        target = {};\r\n    }\r\n    for (; i < length; i++) {\r\n        if ((options = arguments[i]) !== null) {\r\n            for (name in options) {\r\n                src = target[name];\r\n                copy = options[name];\r\n\r\n                // prevent never-ending loop\r\n                if (target === copy) {\r\n                    continue;\r\n                }\r\n                // recurse if we're merging plain objects or arrays\r\n                if (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\r\n                    if (copyIsArray) {\r\n                        copyIsArray = false;\r\n                        clone = src && isArray(src) ? src : [];\r\n                    } else {\r\n                        clone = src && isPlainObject(src) ? src : {};\r\n                    }\r\n                    // never move original objects, clone them\r\n                    target[name] = extend(deep, clone, copy);\r\n                } else if (copy !== undefined) {\r\n                    // don't bring in undefined values\r\n                    target[name] = copy;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return target;\r\n}\r\n\r\nfunction each(obj, callback) {\r\n    if (obj) {\r\n        var cur, i = 0;\r\n        if (typeof obj === 'string') {\r\n            obj = obj.split(' ');\r\n        } else if (obj instanceof Set) {\r\n            // would be less useful if key and value refers to the same object\r\n            obj = isFunction(obj.values) ? obj.values() : (function (obj, arr) {\r\n                return obj.forEach(function (v) {\r\n                    // @ts-ignore: arr is hinted as never[]\r\n                    arr[arr.length] = v;\r\n                }), arr;\r\n            }(obj, []));\r\n        }\r\n        if (isArrayLike(obj)) {\r\n            var len = obj.length;\r\n            while (i < len && callback(i, obj[i++]) !== false);\r\n        } else if (isFunction(obj.entries)) {\r\n            obj = obj.entries();\r\n            while (!(cur = obj.next()).done && callback(cur.value[0], cur.value[1]) !== false);\r\n        } else if (isFunction(obj.forEach)) {\r\n            var value;\r\n            obj.forEach(function (v, i) {\r\n                value = value === false || callback(i, v);\r\n            });\r\n        } else if (isFunction(obj.next)) {\r\n            while (!(cur = obj.next()).done && callback(i++, cur.value) !== false);\r\n        } else if (isFunction(obj.nextNode)) {\r\n            while ((cur = obj.nextNode()) && callback(i++, cur) !== false);\r\n        } else {\r\n            // @ts-ignore: i is unused elsewhere thus can be assigned string\r\n            for (i in obj) {\r\n                if (callback(i, obj[i]) === false) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction map(obj, callback) {\r\n    var arr = [];\r\n    each(obj, function (i, v) {\r\n        var result = callback.call(this, v, i);\r\n        if (result !== null && result !== undefined) {\r\n            if (isArray(result)) {\r\n                arr.push.apply(arr, result);\r\n            } else {\r\n                arr[arr.length] = result;\r\n            }\r\n        }\r\n    });\r\n    return arr;\r\n}\r\n\r\nfunction any(obj, callback) {\r\n    var result;\r\n    each(obj, function (i, v) {\r\n        result = callback.call(this, v, i) && v;\r\n        return !result;\r\n    });\r\n    return result;\r\n}\r\n\r\nfunction single(obj, callback) {\r\n    var result;\r\n    each(obj, function (i, v) {\r\n        result = callback.call(this, v, i);\r\n        return !result;\r\n    });\r\n    return result;\r\n}\r\n\r\nfunction kv(key, value) {\r\n    var obj = {};\r\n    obj[key] = value;\r\n    return obj;\r\n}\r\n\r\nfunction mapGet(map, key, fn) {\r\n    return map.get(key) || fn && (map.set(key, new fn()), map.get(key));\r\n}\r\n\r\nfunction mapRemove(map, key) {\r\n    var value = map.get(key);\r\n    map.delete(key);\r\n    return value;\r\n}\r\n\r\nfunction createPrivateStore() {\r\n    var map = new WeakMap();\r\n    return function (obj, value) {\r\n        if (value) {\r\n            map.set(obj, value);\r\n        }\r\n        return value || map.get(obj);\r\n    };\r\n}\r\n\r\nfunction setImmediate(fn) {\r\n    var args = [].slice.call(arguments, 1);\r\n    resolve().then(function () {\r\n        fn.apply(undefined, args);\r\n    });\r\n}\r\n\r\nfunction setTimeoutOnce(fn) {\r\n    fn.timeout = fn.timeout || setTimeout(function () {\r\n        fn.timeout = null;\r\n        fn();\r\n    });\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Throw helper\r\n * -------------------------------------- */\r\n\r\nfunction throwNotFunction(obj, name) {\r\n    if (!isFunction(obj)) {\r\n        throw new Error((name || 'callback') + ' must be a function');\r\n    }\r\n    return obj;\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Strings\r\n * -------------------------------------- */\r\n\r\nfunction iequal(a, b) {\r\n    return a.toLowerCase() === b.toLowerCase();\r\n}\r\n\r\nfunction randomId() {\r\n    return Math.random().toString(36).substr(2, 8);\r\n}\r\n\r\nfunction repeat(str, count) {\r\n    return new Array(count + 1).join(str);\r\n}\r\n\r\nfunction camel(str) {\r\n    return String(str).replace(/-([a-z])/g, function (v, a) {\r\n        return a.toUpperCase();\r\n    });\r\n}\r\n\r\nfunction hyphenate(str) {\r\n    return String(str).replace(/[A-Z](?![A-Z])|[A-Z]{2,}(?=[A-Z])/g, function (v, a) {\r\n        return (a ? '-' : '') + v.toLowerCase();\r\n    });\r\n}\r\n\r\nfunction ucfirst(v) {\r\n    v = String(v || '');\r\n    return v.charAt(0).toUpperCase() + v.slice(1);\r\n}\r\n\r\nfunction lcfirst(v) {\r\n    v = String(v || '');\r\n    return v.charAt(0).toLowerCase() + v.slice(1);\r\n}\r\n\r\nfunction trim(v) {\r\n    return String(v || '').replace(/^(?:\\u200b|[^\\S\\u00a0])+|(?:\\u200b|[^\\S\\u00a0])+$/g, '');\r\n}\r\n\r\nfunction matchWord(haystack, needle) {\r\n    var cache = matchWordCache || (matchWordCache = {});\r\n    var re = cache[needle] || (cache[needle] = new RegExp('(?:^|\\\\s)(' + needle.replace(/\\s+/g, '|') + ')(?=$|\\\\s)'));\r\n    return re.test(String(haystack || '')) && RegExp.$1;\r\n}\r\n\r\nfunction htmlDecode(input) {\r\n    return input && new DOMParser().parseFromString(input, 'text/html').documentElement.textContent;\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Promise related\r\n * -------------------------------------- */\r\n\r\nfunction resolve(value) {\r\n    return Promise.resolve(value);\r\n}\r\n\r\nfunction reject(reason) {\r\n    return Promise.reject(reason);\r\n}\r\n\r\nfunction always(promise, callback) {\r\n    return promise.then(function (v) {\r\n        return callback(true, v);\r\n    }, function (v) {\r\n        return callback(false, v);\r\n    });\r\n}\r\n\r\nfunction resolveAll(obj, callback) {\r\n    if (!obj || typeof obj !== 'object') {\r\n        return Promise.resolve(obj).then(callback);\r\n    }\r\n    if (obj instanceof Promise || isFunction(obj.then)) {\r\n        return obj.then(callback);\r\n    }\r\n    if (isArray(obj)) {\r\n        return Promise.all(obj).then(function (d) {\r\n            return isFunction(callback) ? callback(d) : d;\r\n        });\r\n    }\r\n    var result = {};\r\n    return Promise.all(keys(obj).map(function (v) {\r\n        return resolveAll(obj[v], function (d) {\r\n            result[v] = d;\r\n        });\r\n    })).then(function () {\r\n        return isFunction(callback) ? callback(result) : result;\r\n    });\r\n}\r\n\r\nfunction catchAsync(promise) {\r\n    return promise.catch(noop);\r\n}\r\n\r\nfunction setPromiseTimeout(promise, ms, resolveWhenTimeout) {\r\n    return new Promise(function (resolve, reject) {\r\n        promise.then(resolve, reject);\r\n        setTimeout(function () {\r\n            (resolveWhenTimeout ? resolve : reject)('timeout');\r\n        }, ms);\r\n    });\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Property and prototype\r\n * -------------------------------------- */\r\n\r\nfunction hasOwnProperty(obj, prop) {\r\n    return hasOwnPropertyImpl.call(obj, prop);\r\n}\r\n\r\nfunction getOwnPropertyDescriptors(obj) {\r\n    var props = {};\r\n    each(getOwnPropertyNames(obj || {}), function (i, v) {\r\n        props[v] = getOwnPropertyDescriptor(obj, v);\r\n    });\r\n    return props;\r\n}\r\n\r\nfunction define(o, p) {\r\n    o = extend(function () { }, { prototype: o });\r\n    definePrototype(o, p);\r\n}\r\n\r\nfunction defineOwnProperty(obj, name, value, readonly) {\r\n    Object.defineProperty(obj, name, {\r\n        configurable: true,\r\n        enumerable: true,\r\n        writable: !readonly,\r\n        value: value\r\n    });\r\n}\r\n\r\nfunction defineGetterProperty(obj, name, get, set) {\r\n    defineProperty(obj, name, {\r\n        configurable: true,\r\n        enumerable: true,\r\n        get: get,\r\n        set: set\r\n    });\r\n}\r\n\r\nfunction defineHiddenProperty(obj, name, value, readonly) {\r\n    defineProperty(obj, name, {\r\n        configurable: true,\r\n        enumerable: false,\r\n        writable: !readonly,\r\n        value: value\r\n    });\r\n}\r\n\r\nfunction definePrototype(fn, prototype) {\r\n    each(getOwnPropertyDescriptors(prototype), function (i, v) {\r\n        v.enumerable = !isFunction(v.value);\r\n        defineProperty(fn.prototype, i, v);\r\n    });\r\n}\r\n\r\nfunction inherit(proto, props) {\r\n    var obj = Object.create(isFunction(proto) ? proto.prototype : proto || Object.prototype);\r\n    each(getOwnPropertyDescriptors(props), function (i, v) {\r\n        defineProperty(obj, i, v);\r\n    });\r\n    return obj;\r\n}\r\n\r\nfunction deepFreeze(obj) {\r\n    freeze(obj);\r\n    getOwnPropertyNames(obj).forEach(function (v) {\r\n        var value = obj[v];\r\n        if (value && typeof value === 'object') {\r\n            deepFreeze(value);\r\n        }\r\n    });\r\n    return obj;\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Observable\r\n * -------------------------------------- */\r\n\r\nfunction getObservableState(obj, sync) {\r\n    var cache = watchStore || (watchStore = createPrivateStore());\r\n    return cache(obj) || cache(obj, {\r\n        sync: !!sync,\r\n        values: {},\r\n        oldValues: {},\r\n        newValues: {},\r\n        alias: {},\r\n        handlers: [],\r\n        handleChanges: function (callback) {\r\n            var self = cache(obj);\r\n            try {\r\n                self.lock = true;\r\n                do {\r\n                    var oldValues = self.oldValues;\r\n                    var newValues = self.newValues;\r\n                    if (isFunction(callback)) {\r\n                        callback();\r\n                    }\r\n                    if (getOwnPropertyNames(oldValues)[0]) {\r\n                        for (var i in oldValues) {\r\n                            if (oldValues[i] === newValues[i]) {\r\n                                delete oldValues[i];\r\n                                delete newValues[i];\r\n                            }\r\n                        }\r\n                        self.oldValues = {};\r\n                        self.newValues = {};\r\n                        self.handlers.slice(0).forEach(function (v) {\r\n                            v.call(obj, {\r\n                                oldValues: oldValues,\r\n                                newValues: newValues\r\n                            });\r\n                        });\r\n                    }\r\n                } while (self.sync && getOwnPropertyNames(self.oldValues)[0]);\r\n            } finally {\r\n                self.lock = false;\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nfunction defineAliasProperty(obj, prop, target, targetProp) {\r\n    var desc = getOwnPropertyDescriptor(obj, prop);\r\n    if (!desc ? prop in obj : desc.get || desc.set) {\r\n        throw new Error('Cannot create alias property');\r\n    }\r\n    targetProp = targetProp || prop;\r\n    defineGetterProperty(obj, prop, function () {\r\n        return target[targetProp];\r\n    }, function (value) {\r\n        target[targetProp] = value;\r\n    });\r\n    var state = getObservableState(obj);\r\n    state.alias[prop] = getObservableState(target).alias[targetProp] || [target, targetProp];\r\n}\r\n\r\nfunction defineObservableProperty(obj, prop, initialValue) {\r\n    var state = getObservableState(obj);\r\n    var alias = state.alias[prop];\r\n    if (alias) {\r\n        return defineObservableProperty(alias[0], alias[1], initialValue);\r\n    }\r\n    if (!(prop in state.values)) {\r\n        var desc = getOwnPropertyDescriptor(obj, prop);\r\n        if (!desc ? prop in obj : desc.get || desc.set) {\r\n            throw new Error('Only own data property can be observed');\r\n        }\r\n        var setter = function (value) {\r\n            var state = getObservableState(this);\r\n            if (value !== state.values[prop]) {\r\n                if (!(prop in state.oldValues)) {\r\n                    state.oldValues[prop] = state.values[prop];\r\n                }\r\n                state.values[prop] = value;\r\n                state.newValues[prop] = value;\r\n                if (!state.sync) {\r\n                    setTimeoutOnce(state.handleChanges);\r\n                } else if (!state.lock) {\r\n                    state.handleChanges();\r\n                }\r\n            }\r\n        };\r\n        state.values[prop] = prop in obj ? obj[prop] : initialValue;\r\n        defineGetterProperty(obj, prop, function () {\r\n            var state = getObservableState(this);\r\n            return state.values[prop];\r\n        }, initialValue !== undefined ? undefined : setter);\r\n        return setter.bind(obj);\r\n    }\r\n}\r\n\r\nfunction watch(obj, prop, handler, fireInit) {\r\n    if (prop === true) {\r\n        var state = getObservableState(obj, true);\r\n        return state.handleChanges;\r\n    }\r\n    if (isFunction(prop)) {\r\n        getObservableState(obj).handlers.push(prop);\r\n    } else {\r\n        defineObservableProperty(obj, prop);\r\n        if (isFunction(handler)) {\r\n            var alias = getObservableState(obj).alias[prop] || [obj, prop];\r\n            var handlers = getObservableState(alias[0]).handlers;\r\n            handlers.push(function (e) {\r\n                if (alias[1] in e.newValues) {\r\n                    handler.call(obj, e.newValues[alias[1]], e.oldValues[alias[1]], prop, obj);\r\n                }\r\n            });\r\n            if (fireInit) {\r\n                handler.call(obj, obj[prop], null, prop, obj);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction watchOnce(obj, prop, handler) {\r\n    defineObservableProperty(obj, prop);\r\n    return new Promise(function (resolve) {\r\n        var alias = getObservableState(obj).alias[prop] || [obj, prop];\r\n        var handlers = getObservableState(alias[0]).handlers;\r\n        handlers.push(function fn(e) {\r\n            if (alias[1] in e.newValues) {\r\n                var value = e.newValues[alias[1]];\r\n                var returnValue;\r\n                handlers.splice(handlers.indexOf(fn), 1);\r\n                if (isFunction(handler)) {\r\n                    returnValue = handler(value);\r\n                }\r\n                resolve(returnValue === undefined ? value : returnValue);\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nfunction watchable(obj) {\r\n    obj = obj || {};\r\n    define(obj, {\r\n        watch: function (prop, handler, fireInit) {\r\n            watch(this, prop, handler, fireInit);\r\n        },\r\n        watchOnce: function (prop, handler) {\r\n            return watchOnce(this, prop, handler);\r\n        }\r\n    });\r\n    return obj;\r\n}\r\n\r\nexport {\r\n    // miscellanous\r\n    noop,\r\n    either,\r\n    isArray,\r\n    isFunction,\r\n    isPlainObject,\r\n    isArrayLike,\r\n    makeArray,\r\n    extend,\r\n    each,\r\n    map,\r\n    any,\r\n    single,\r\n    kv,\r\n    mapGet,\r\n    mapRemove,\r\n    createPrivateStore,\r\n    setTimeoutOnce,\r\n    setImmediate,\r\n\r\n    // throw\r\n    throwNotFunction,\r\n\r\n    // property and prototype related\r\n    keys,\r\n    values,\r\n    hasOwnProperty,\r\n    getOwnPropertyDescriptors,\r\n    define,\r\n    definePrototype,\r\n    defineOwnProperty,\r\n    defineGetterProperty,\r\n    defineHiddenProperty,\r\n    defineAliasProperty,\r\n    defineObservableProperty,\r\n    watch,\r\n    watchOnce,\r\n    watchable,\r\n    inherit,\r\n    deepFreeze,\r\n\r\n    // string related\r\n    iequal,\r\n    randomId,\r\n    repeat,\r\n    camel,\r\n    hyphenate,\r\n    ucfirst,\r\n    lcfirst,\r\n    trim,\r\n    matchWord,\r\n    htmlDecode,\r\n\r\n    // promise\r\n    resolve,\r\n    reject,\r\n    always,\r\n    resolveAll,\r\n    catchAsync,\r\n    setPromiseTimeout\r\n};\r\n","import { any, isFunction, isPlainObject, each, map, definePrototype, kv, noop, setTimeoutOnce } from \"./util.js\";\r\nimport { $ } from \"./shim.js\";\r\nimport { throwNotFunction } from \"./util.js\";\r\n\r\nconst root = document.documentElement;\r\nconst selection = window.getSelection();\r\n// @ts-ignore: non-standard member\r\nconst elementsFromPoint = document.msElementsFromPoint || document.elementsFromPoint;\r\nconst compareDocumentPositionImpl = document.compareDocumentPosition;\r\nconst compareBoundaryPointsImpl = Range.prototype.compareBoundaryPoints;\r\n\r\nvar originDiv;\r\n\r\n/* --------------------------------------\r\n * Custom class\r\n * -------------------------------------- */\r\n\r\nfunction Rect(l, t, r, b) {\r\n    var self = this;\r\n    self.left = l;\r\n    self.top = t;\r\n    self.right = r;\r\n    self.bottom = b;\r\n}\r\n\r\ndefinePrototype(Rect, {\r\n    get width() {\r\n        return this.right - this.left;\r\n    },\r\n    get height() {\r\n        return this.bottom - this.top;\r\n    },\r\n    get centerX() {\r\n        return (this.left + this.right) / 2;\r\n    },\r\n    get centerY() {\r\n        return (this.top + this.bottom) / 2;\r\n    },\r\n    collapse: function (side, offset) {\r\n        var rect = this;\r\n        var pos = rect[side] + (offset || 0);\r\n        return side === 'left' || side === 'right' ? toPlainRect(pos, rect.top, pos, rect.bottom) : toPlainRect(rect.left, pos, rect.right, pos);\r\n    },\r\n    translate: function (x, y) {\r\n        var self = this;\r\n        return toPlainRect(self.left + x, self.top + y, self.right + x, self.bottom + y);\r\n    }\r\n});\r\n\r\nconst MutationObserver = window.MutationObserver || (function () {\r\n    function MutationObserver(handler) {\r\n        var self = this;\r\n        this.records = [];\r\n        this.handler = function () {\r\n            handler(self.takeRecords(), self);\r\n        };\r\n        throwNotFunction(handler);\r\n    }\r\n    MutationObserver.prototype = {\r\n        observe: function (element, init) {\r\n            var self = this;\r\n            bind(element, 'DOMNodeInserted DOMNodeRemoved DOMAttrModified DOMCharacterDataModified', function (e) {\r\n                var type = e.type.charAt(7);\r\n                var oldValue = e.prevValue;\r\n                var record = {};\r\n                record.addedNodes = [];\r\n                record.removedNodes = [];\r\n                if (type === 'M') {\r\n                    record.type = 'attributes';\r\n                    record.target = e.target;\r\n                    record.attributeName = e.attrName;\r\n                    if (init.attributeOldValue) {\r\n                        record.oldValue = oldValue;\r\n                    }\r\n                } else if (type === 'a') {\r\n                    record.type = 'characterData';\r\n                    record.target = e.target;\r\n                    if (init.characterDataOldValue) {\r\n                        record.oldValue = oldValue;\r\n                    }\r\n                } else {\r\n                    record.type = 'childList';\r\n                    record.target = e.target.parentNode;\r\n                    record[type === 'I' ? 'addedNodes' : 'removedNodes'][0] = e.target;\r\n                }\r\n                var shouldIgnore = any(self.records, function (v) {\r\n                    return v.type === 'childList' && v.addedNodes.some(function (v) {\r\n                        return containsOrEquals(v, record.target);\r\n                    });\r\n                });\r\n                if (!shouldIgnore && init[record.type] && (init.subtree || record.target === element)) {\r\n                    self.records[self.records.length] = record;\r\n                    setTimeoutOnce(self.handler);\r\n                }\r\n            });\r\n        },\r\n        takeRecords: function () {\r\n            return this.records.splice(0);\r\n        }\r\n    };\r\n    return MutationObserver;\r\n}());\r\n\r\n\r\n/* --------------------------------------\r\n * General helper\r\n * -------------------------------------- */\r\n\r\nfunction tagName(element) {\r\n    return element && element.tagName && element.tagName.toLowerCase();\r\n}\r\n\r\nfunction is(element, selector) {\r\n    if (!element || !selector) {\r\n        return false;\r\n    }\r\n    // constructors of native DOM objects in Safari refuse to be functions\r\n    // use a fairly accurate but fast checking instead of isFunction\r\n    if (selector.prototype) {\r\n        return element instanceof selector && element;\r\n    }\r\n    if (selector.toFixed) {\r\n        return (element.nodeType & selector) && element;\r\n    }\r\n    return (selector === '*' || tagName(element) === selector || $(element).is(selector)) && element;\r\n}\r\n\r\nfunction sameElementSpec(a, b) {\r\n    if (tagName(a) !== tagName(b)) {\r\n        return false;\r\n    }\r\n    var thisAttr = a.attributes;\r\n    var prevAttr = b.attributes;\r\n    return thisAttr.length === prevAttr.length && !any(thisAttr, function (v) {\r\n        return !prevAttr[v.nodeName] || v.value !== prevAttr[v.nodeName].value;\r\n    });\r\n}\r\n\r\nfunction comparePosition(a, b, strict) {\r\n    if (a === b) {\r\n        return 0;\r\n    }\r\n    var v = a && b && compareDocumentPositionImpl.call(a, b);\r\n    if (v & 2) {\r\n        return (strict && v & 8) || (v & 1) ? NaN : 1;\r\n    }\r\n    if (v & 4) {\r\n        return (strict && v & 16) || (v & 1) ? NaN : -1;\r\n    }\r\n    return NaN;\r\n}\r\n\r\nfunction connected(a, b) {\r\n    return a && b && !(compareDocumentPositionImpl.call(a.commonAncestorContainer || a, b.commonAncestorContainer || b) & 1);\r\n}\r\n\r\nfunction containsOrEquals(container, contained) {\r\n    container = (container || '').element || container;\r\n    contained = (contained || '').element || contained;\r\n    return container === contained || $.contains(container, contained);\r\n}\r\n\r\nfunction isVisible(element) {\r\n    if (!connected(root, element)) {\r\n        return false;\r\n    }\r\n    var rect = getRect(element);\r\n    if (!rect.top && !rect.left && !rect.width && !rect.height) {\r\n        for (var cur = element; cur; cur = cur.parentNode) {\r\n            if (getComputedStyle(cur).display === 'none') {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\nfunction acceptNode(iterator, node) {\r\n    node = node || iterator.currentNode;\r\n    if (!node || !(iterator.whatToShow & (is(node, Node) ? (1 << (node.nodeType - 1)) : node.nodeType))) {\r\n        return 3;\r\n    }\r\n    return !iterator.filter ? 1 : (iterator.filter.acceptNode || iterator.filter).call(iterator.filter, node);\r\n}\r\n\r\nfunction iterateNode(iterator, callback, from, until) {\r\n    var i = 0;\r\n    iterator.currentNode = from = from || iterator.currentNode;\r\n    callback = callback || noop;\r\n    switch (acceptNode(iterator)) {\r\n        case 2:\r\n            return;\r\n        case 1:\r\n            callback(from, i++);\r\n    }\r\n    for (var cur; (cur = iterator.nextNode()) && (!until || (isFunction(until) ? until(cur) : cur !== until || void callback(cur, i++))); callback(cur, i++));\r\n}\r\n\r\nfunction iterateNodeToArray(iterator, callback, from, until) {\r\n    var result = [];\r\n    iterateNode(iterator, function (v) {\r\n        result[result.length] = v;\r\n    }, from, until);\r\n    return callback ? map(result, callback) : result;\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Advanced traversal\r\n * -------------------------------------- */\r\n\r\nfunction getCommonAncestor(a, b) {\r\n    for (b = b || a; a && a !== b && compareDocumentPositionImpl.call(a, b) !== 20; a = a.parentNode);\r\n    return a;\r\n}\r\n\r\nfunction parentsAndSelf(element) {\r\n    if (element === window) {\r\n        return [];\r\n    }\r\n    for (var arr = []; element && element !== document && arr.push(element); element = element.parentNode || element.parent);\r\n    return arr;\r\n}\r\n\r\nfunction selectIncludeSelf(selector, container) {\r\n    container = container || root;\r\n    var matched = $.uniqueSort($(container).find(selector).add($(container).filter(selector)).get());\r\n    if (matched[0] || container === root) {\r\n        return matched;\r\n    }\r\n    return $(container).find($(selector)).get();\r\n}\r\n\r\nfunction selectClosestRelative(selector, container) {\r\n    container = container || root;\r\n    var element = $(selector, container)[0];\r\n    if (!element) {\r\n        var $matched = $(selector);\r\n        for (; container !== root && !element; container = container.parentNode) {\r\n            element = $matched.get().filter(function (v) {\r\n                return containsOrEquals(container, v);\r\n            })[0];\r\n        }\r\n    }\r\n    return element;\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Create\r\n * -------------------------------------- */\r\n\r\nfunction createDocumentFragment(node) {\r\n    return is(node, DocumentFragment) || $(document.createDocumentFragment()).append(node)[0];\r\n}\r\n\r\nfunction createTextNode(text) {\r\n    return document.createTextNode(text || '\\u200b');\r\n}\r\n\r\nfunction createElement(name) {\r\n    return document.createElement(name);\r\n}\r\n\r\nfunction createNodeIterator(root, whatToShow, filter) {\r\n    // @ts-ignore: assume filter is of correct signature\r\n    return document.createNodeIterator(root, whatToShow, isFunction(filter) || null, false);\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Events\r\n * -------------------------------------- */\r\n\r\nfunction addOrRemoveEventListener(method, element, event, listener, useCapture) {\r\n    if (isPlainObject(event)) {\r\n        each(event, function (i, v) {\r\n            element[method](i, v, listener);\r\n        });\r\n    } else if (typeof event === 'string') {\r\n        each(event.split(' '), function (i, v) {\r\n            element[method](v, listener, useCapture);\r\n        });\r\n    }\r\n}\r\n\r\nfunction bind(element, event, listener, useCapture) {\r\n    addOrRemoveEventListener('addEventListener', element, event, listener, useCapture);\r\n    return function () {\r\n        unbind(element, event, listener);\r\n    };\r\n}\r\n\r\nfunction unbind(element, event, listener) {\r\n    addOrRemoveEventListener('removeEventListener', element, event, listener);\r\n}\r\n\r\nfunction dispatchDOMMouseEvent(eventName, point, e) {\r\n    if (typeof eventName !== 'string') {\r\n        e = eventName;\r\n        eventName = e.type;\r\n    }\r\n    var target = point ? elementFromPoint(point.clientX, point.clientY) || root : e.target;\r\n    var event = document.createEvent('MouseEvent');\r\n    point = point || e;\r\n    event.initMouseEvent(eventName, e.bubbles, e.cancelable, e.view, e.detail, point.screenX, point.screenY, point.clientX, point.clientY, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, e.button, e.relatedTarget);\r\n    return target.dispatchEvent(event);\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * DOM manip\r\n * -------------------------------------- */\r\n\r\nfunction removeNode(node) {\r\n    if (node.parentNode) {\r\n        node.parentNode.removeChild(node);\r\n    }\r\n}\r\n\r\nfunction getClass(element, className) {\r\n    var re = new RegExp('(?:^|\\\\s+)' + className + '(?:-(\\\\S+)|\\\\b)', 'ig');\r\n    var t = [false];\r\n    (element.className || '').replace(re, function (v, a) {\r\n        t[a ? t.length : 0] = a || true;\r\n    });\r\n    return t[1] ? t.slice(1) : t[0];\r\n}\r\n\r\nfunction setClass(element, className, values) {\r\n    var value = element.className || '';\r\n    each(isPlainObject(className) || kv(className, values), function (i, v) {\r\n        var re = new RegExp('(^|\\\\s)\\\\s*' + i + '(?:-(\\\\S+)|\\\\b)|\\\\s*$', 'ig');\r\n        var replaced = 0;\r\n        if (isPlainObject(v)) {\r\n            v = map(v, function (v, i) {\r\n                return v ? i : null;\r\n            });\r\n        }\r\n        value = value.replace(re, function () {\r\n            return replaced++ || !v || v.length === 0 ? '' : (' ' + i + (v[0] ? [''].concat(v).join(' ' + i + '-') : ''));\r\n        });\r\n    });\r\n    element.className = value;\r\n}\r\n\r\nfunction getScrollOffset(winOrElm) {\r\n    return {\r\n        x: winOrElm.pageXOffset || winOrElm.scrollLeft || 0,\r\n        y: winOrElm.pageYOffset || winOrElm.scrollTop || 0\r\n    };\r\n}\r\n\r\nfunction scrollBy(element, x, y) {\r\n    var winOrElm = element === root || element === document.body ? window : element;\r\n    var orig = getScrollOffset(winOrElm);\r\n    if (winOrElm.scrollBy) {\r\n        winOrElm.scrollBy(x, y);\r\n    } else {\r\n        winOrElm.scrollLeft = orig.x + x;\r\n        winOrElm.scrollTop = orig.y + y;\r\n    }\r\n    var cur = getScrollOffset(winOrElm);\r\n    return {\r\n        x: cur.x - orig.x,\r\n        y: cur.y - orig.y\r\n    };\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Range and rect\r\n * -------------------------------------- */\r\n\r\nfunction createRange(startNode, startOffset, endNode, endOffset) {\r\n    if (startNode && isFunction(startNode.getRange)) {\r\n        return startNode.getRange();\r\n    }\r\n    var range;\r\n    if (is(startNode, Node)) {\r\n        range = document.createRange();\r\n        if (+startOffset !== startOffset) {\r\n            range[(startOffset === 'contents' || !startNode.parentNode) ? 'selectNodeContents' : 'selectNode'](startNode);\r\n            if (typeof startOffset === 'boolean') {\r\n                range.collapse(startOffset);\r\n            }\r\n        } else {\r\n            range.setStart(startNode, getOffset(startNode, startOffset));\r\n        }\r\n        if (is(endNode, Node) && connected(startNode, endNode)) {\r\n            range.setEnd(endNode, getOffset(endNode, endOffset));\r\n        }\r\n    } else if (is(startNode, Range)) {\r\n        range = startNode.cloneRange();\r\n        if (!range.collapsed && typeof startOffset === 'boolean') {\r\n            range.collapse(startOffset);\r\n        }\r\n    }\r\n    if (is(startOffset, Range) && connected(range, startOffset)) {\r\n        var inverse = range.collapsed && startOffset.collapsed ? -1 : 1;\r\n        if (compareBoundaryPointsImpl.call(range, 0, startOffset) * inverse < 0) {\r\n            range.setStart(startOffset.startContainer, startOffset.startOffset);\r\n        }\r\n        if (compareBoundaryPointsImpl.call(range, 2, startOffset) * inverse > 0) {\r\n            range.setEnd(startOffset.endContainer, startOffset.endOffset);\r\n        }\r\n    }\r\n    return range;\r\n}\r\n\r\nfunction rangeIntersects(a, b) {\r\n    a = is(a, Range) || createRange(a);\r\n    b = is(b, Range) || createRange(b);\r\n    return connected(a, b) && compareBoundaryPointsImpl.call(a, 3, b) <= 0 && compareBoundaryPointsImpl.call(a, 1, b) >= 0;\r\n}\r\n\r\nfunction rangeCovers(a, b) {\r\n    a = is(a, Range) || createRange(a);\r\n    b = is(b, Range) || createRange(b);\r\n    return connected(a, b) && compareBoundaryPointsImpl.call(a, 0, b) <= 0 && compareBoundaryPointsImpl.call(a, 2, b) >= 0;\r\n}\r\n\r\nfunction rangeEquals(a, b) {\r\n    a = is(a, Range) || createRange(a);\r\n    b = is(b, Range) || createRange(b);\r\n    return connected(a, b) && compareBoundaryPointsImpl.call(a, 0, b) === 0 && compareBoundaryPointsImpl.call(a, 2, b) === 0;\r\n}\r\n\r\nfunction compareRangePosition(a, b, strict) {\r\n    a = is(a, Range) || createRange(a);\r\n    b = is(b, Range) || createRange(b);\r\n    var value = !connected(a, b) ? NaN : compareBoundaryPointsImpl.call(a, 0, b) + compareBoundaryPointsImpl.call(a, 2, b);\r\n    return (strict && ((value !== 0 && rangeIntersects(a, b)) || (value === 0 && !rangeEquals(a, b)))) ? NaN : value && value / Math.abs(value);\r\n}\r\n\r\nfunction makeSelection(b, e) {\r\n    if (!selection) {\r\n        return;\r\n    }\r\n    // for newer browsers that supports setBaseAndExtent\r\n    // avoid undesirable effects when direction of editor's selection direction does not match native one\r\n    if (selection.setBaseAndExtent && is(e, Range)) {\r\n        selection.setBaseAndExtent(b.startContainer, b.startOffset, e.startContainer, e.startOffset);\r\n        return;\r\n    }\r\n\r\n    var range = createRange(b, e);\r\n    try {\r\n        selection.removeAllRanges();\r\n    } catch (e) {\r\n        // IE fails to clear ranges by removeAllRanges() in occasions mentioned in\r\n        // http://stackoverflow.com/questions/22914075\r\n        // @ts-ignore: non-standard member\r\n        var r = document.body.createTextRange();\r\n        r.collapse();\r\n        r.select();\r\n        selection.removeAllRanges();\r\n    }\r\n    try {\r\n        selection.addRange(range);\r\n    } catch (e) {\r\n        // IE may throws unspecified error even though the selection is successfully moved to the given range\r\n        // if the range is not successfully selected retry after selecting other range\r\n        if (!selection.rangeCount) {\r\n            selection.addRange(createRange(document.body));\r\n            selection.removeAllRanges();\r\n            selection.addRange(range);\r\n        }\r\n    }\r\n}\r\n\r\nfunction getRect(elm, includeMargin) {\r\n    var rect;\r\n    elm = elm || root;\r\n    if (elm.getRect) {\r\n        return elm.getRect();\r\n    }\r\n    elm = elm.element || elm;\r\n    if (elm === root || elm === window) {\r\n        var div = originDiv || (originDiv = $('<div style=\"position:fixed; top:0; left:0;\">')[0]);\r\n        if (!containsOrEquals(document.body, div)) {\r\n            document.body.appendChild(div);\r\n        }\r\n        // origin used by CSS, DOMRect and properties like clientX/Y may move away from the top-left corner of the window\r\n        // when virtual keyboard is shown on mobile devices\r\n        var o = getRect(div);\r\n        rect = toPlainRect(0, 0, root.offsetWidth, root.offsetHeight).translate(o.left, o.top);\r\n    } else if (!containsOrEquals(root, elm)) {\r\n        // IE10 throws Unspecified Error for detached elements\r\n        rect = toPlainRect(0, 0, 0, 0);\r\n    } else {\r\n        rect = toPlainRect(elm.getBoundingClientRect());\r\n        if (includeMargin) {\r\n            var style = getComputedStyle(elm);\r\n            rect.top -= Math.max(0, parseFloat(style.marginTop));\r\n            rect.left -= Math.max(0, parseFloat(style.marginLeft));\r\n            rect.right += Math.max(0, parseFloat(style.marginRight));\r\n            rect.bottom += Math.max(0, parseFloat(style.marginBottom));\r\n        }\r\n    }\r\n    return rect;\r\n}\r\n\r\nfunction getOffset(node, offset) {\r\n    var len = node.length || node.childNodes.length;\r\n    return 1 / offset < 0 ? Math.max(0, len + offset) : Math.min(len, offset);\r\n}\r\n\r\nfunction getRects(range) {\r\n    return map((is(range, Range) || createRange(range, 'contents')).getClientRects(), toPlainRect);\r\n}\r\n\r\nfunction toPlainRect(l, t, r, b) {\r\n    function clip(v) {\r\n        // IE provides precision up to 0.05 but with floating point errors that hinder comparisons\r\n        return Math.round(v * 1000) / 1000;\r\n    }\r\n    if (l.top !== undefined) {\r\n        return new Rect(clip(l.left), clip(l.top), clip(l.right), clip(l.bottom));\r\n    }\r\n    if (r === undefined) {\r\n        return new Rect(l, t, l, t);\r\n    }\r\n    return new Rect(l, t, r, b);\r\n}\r\n\r\nfunction rectEquals(a, b) {\r\n    function check(prop) {\r\n        return Math.abs(a[prop] - b[prop]) < 1;\r\n    }\r\n    return check('left') && check('top') && check('bottom') && check('right');\r\n}\r\n\r\nfunction rectCovers(a, b) {\r\n    return b.left >= a.left && b.right <= a.right && b.top >= a.top && b.bottom <= a.bottom;\r\n}\r\n\r\nfunction rectIntersects(a, b) {\r\n    return !(b.right < a.left || b.left > a.right) && !(b.bottom < a.top || b.top > a.bottom);\r\n}\r\n\r\nfunction pointInRect(x, y, rect, within) {\r\n    within = within || 0;\r\n    return rect.width && rect.height && x - rect.left >= -within && x - rect.right <= within && y - rect.top >= -within && y - rect.bottom <= within;\r\n}\r\n\r\nfunction mergeRect(a, b) {\r\n    return toPlainRect(Math.min(a.left, b.left), Math.min(a.top, b.top), Math.max(a.right, b.right), Math.max(a.bottom, b.bottom));\r\n}\r\n\r\nfunction elementFromPoint(x, y, container) {\r\n    container = container || document.body;\r\n    if (elementsFromPoint) {\r\n        return any(elementsFromPoint.call(document, x, y), function (v) {\r\n            return containsOrEquals(container, v) && getComputedStyle(v).pointerEvents !== 'none';\r\n        }) || null;\r\n    }\r\n    var element = document.elementFromPoint(x, y);\r\n    if (!containsOrEquals(container, element) && pointInRect(x, y, getRect(container))) {\r\n        var tmp = [];\r\n        try {\r\n            while (element && comparePosition(container, element, true)) {\r\n                var target = $(element).parentsUntil(getCommonAncestor(container, element)).slice(-1)[0] || element;\r\n                if (target === tmp[tmp.length - 1]) {\r\n                    return null;\r\n                }\r\n                // @ts-ignore: assume we are working with HTMLElement\r\n                target.style.pointerEvents = 'none';\r\n                tmp[tmp.length] = target;\r\n                element = document.elementFromPoint(x, y);\r\n            }\r\n        } finally {\r\n            $(tmp).css('pointer-events', '');\r\n        }\r\n    }\r\n    return containsOrEquals(container, element) ? element : null;\r\n}\r\n\r\n\r\nexport {\r\n    tagName,\r\n    is,\r\n    isVisible,\r\n    sameElementSpec,\r\n    comparePosition,\r\n    connected,\r\n    containsOrEquals,\r\n    iterateNode,\r\n    iterateNodeToArray,\r\n\r\n    getCommonAncestor,\r\n    parentsAndSelf,\r\n    selectIncludeSelf,\r\n    selectClosestRelative,\r\n\r\n    createDocumentFragment,\r\n    createTextNode,\r\n    createElement,\r\n    createNodeIterator,\r\n\r\n    bind,\r\n    dispatchDOMMouseEvent,\r\n\r\n    removeNode,\r\n    getClass,\r\n    setClass,\r\n    getScrollOffset,\r\n    scrollBy,\r\n\r\n    createRange,\r\n    rangeIntersects,\r\n    rangeEquals,\r\n    rangeCovers,\r\n    compareRangePosition,\r\n    makeSelection,\r\n\r\n    getRect,\r\n    getRects,\r\n    toPlainRect,\r\n    rectEquals,\r\n    rectCovers,\r\n    rectIntersects,\r\n    pointInRect,\r\n    mergeRect,\r\n    elementFromPoint\r\n};\r\n","import { getClass, setClass, iterateNode, createNodeIterator, isVisible, bind } from \"./domUtil.js\";\r\nimport { reject, noop, resolve, each, matchWord, keys } from \"./util.js\";\r\n\r\nfunction parseCSS(value) {\r\n    var styles = {};\r\n    var div = document.createElement('div');\r\n    div.setAttribute('style', value);\r\n    each(div.style, function (i, v) {\r\n        styles[v] = div.style[v];\r\n    });\r\n    return styles;\r\n}\r\n\r\nfunction isCssUrlValue(value) {\r\n    return value && value !== 'none' && /url\\((?:'(.+)'|\"(.+)\"|([^)]+))\\)/.test(value) && (RegExp.$1 || RegExp.$2 || RegExp.$3);\r\n}\r\n\r\nfunction styleToJSON(style) {\r\n    var t = {};\r\n    each(style, function (i, v) {\r\n        t[v] = style[v];\r\n    });\r\n    return t;\r\n}\r\n\r\nfunction animatableValue(v, allowNumber) {\r\n    return /\\b(?:[+-]?(\\d+(?:\\.\\d+)?)(px|%)?|#[0-9a-f]{3,}|(rgba?|hsla?|matrix|calc)\\(.+\\))\\b/.test(v) && (allowNumber || !RegExp.$1 || RegExp.$2);\r\n}\r\n\r\nfunction removeVendorPrefix(name) {\r\n    return name.replace(/^-(webkit|moz|ms|o)-/, '');\r\n}\r\n\r\nfunction runCSSTransition(element, className, callback) {\r\n    if (getClass(element, className)) {\r\n        return reject();\r\n    }\r\n    callback = callback || noop;\r\n    if (callback === true) {\r\n        callback = setClass.bind(null, element, className, false);\r\n    }\r\n    setClass(element, className, true);\r\n    var arr = [];\r\n    var map1 = new Map();\r\n    var test = function (element, pseudoElement) {\r\n        var style = getComputedStyle(element, pseudoElement);\r\n        if (style.transitionDuration !== '0s' || style.animationName != 'none') {\r\n            var key = { element: element, pseudoElement: pseudoElement };\r\n            map1.set(key, style.transitionProperty.split(/,\\s*/));\r\n            arr.push(key);\r\n        }\r\n    };\r\n    iterateNode(createNodeIterator(element, 1, function (v) {\r\n        if (!isVisible(v)) {\r\n            return 2;\r\n        }\r\n        test(v, null);\r\n        test(v, '::before');\r\n        test(v, '::after');\r\n    }));\r\n    if (!arr[0]) {\r\n        callback();\r\n        return resolve();\r\n    }\r\n\r\n    var targets = arr.map(function (v) {\r\n        return v.element;\r\n    });\r\n    setClass(element, className, false);\r\n    $(targets).css('transition', 'none');\r\n    setClass(element, className, true);\r\n    var newStyle = arr.map(function (v) {\r\n        return styleToJSON(getComputedStyle(v.element, v.pseudoElement));\r\n    });\r\n    setClass(element, className, false);\r\n\r\n    var appendPseudoToAnim = window.AnimationEvent && 'pseudoElement' in AnimationEvent.prototype;\r\n    var map = new Map();\r\n    each(arr, function (i, v) {\r\n        var pseudoElement = v.pseudoElement;\r\n        var curStyle = getComputedStyle(v.element, pseudoElement);\r\n        var transitionProperties = map1.get(v);\r\n        var dict = {};\r\n        each(curStyle, function (j, v) {\r\n            var curValue = curStyle[v];\r\n            var newValue = newStyle[i][v];\r\n            if (curValue === 'matrix(1, 0, 0, 1, 0, 0)') {\r\n                curValue = 'none';\r\n            }\r\n            if (newValue === 'matrix(1, 0, 0, 1, 0, 0)') {\r\n                newValue = 'none';\r\n            }\r\n            if (curValue !== newValue) {\r\n                var prop = removeVendorPrefix(v);\r\n                var allowNumber = matchWord(v, 'opacity line-height');\r\n                if (prop === 'animation-name') {\r\n                    var prevAnim = curValue.replace(/,/g, '');\r\n                    each(newValue.split(/,\\s*/), function (i, v) {\r\n                        if (v !== 'none' && !matchWord(prevAnim, v)) {\r\n                            dict['@' + v + ((appendPseudoToAnim && pseudoElement) || '')] = true;\r\n                        }\r\n                    });\r\n                } else if (prop === 'transform' || (animatableValue(curValue, allowNumber) && animatableValue(newValue, allowNumber) && !/^scroll-limit/.test(prop))) {\r\n                    if (transitionProperties[0] === 'all' || transitionProperties.indexOf(v + (pseudoElement || '')) >= 0) {\r\n                        dict[prop + (pseudoElement || '')] = true;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        if (keys(dict)[0]) {\r\n            map.set(v.element, dict);\r\n        }\r\n    });\r\n    $(targets).css('transition', '');\r\n    setClass(element, className, true);\r\n    if (!map.size) {\r\n        callback();\r\n        return resolve();\r\n    }\r\n\r\n    return new Promise(function (resolve, reject) {\r\n        var unbind = bind(element, 'animationend transitionend', function (e) {\r\n            var dict = map.get(e.target) || {};\r\n            // @ts-ignore: mixed type of Event\r\n            delete dict[(e.propertyName ? removeVendorPrefix(e.propertyName) : '@' + e.animationName) + (e.pseudoElement || '')];\r\n            if (!keys(dict)[0] && map.delete(e.target) && !map.size) {\r\n                unbind();\r\n                if (getClass(element, className)) {\r\n                    callback();\r\n                    resolve(element);\r\n                } else {\r\n                    reject(element);\r\n                }\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nexport {\r\n    parseCSS,\r\n    isCssUrlValue,\r\n    runCSSTransition\r\n\r\n    // getZIndex: getZIndex,\r\n    // getZIndexOver: getZIndexOver,\r\n    // setZIndexOver: setZIndexOver,\r\n    // cssFromPoint: cssFromPoint,\r\n    // cssFromRect: cssFromRect,\r\n    // position: position,\r\n    // snap:  (element, to, dir)\r\n    // unsnap:  (element)\r\n    // drag:  drag(event, within, callback)\r\n    // scrollIntoView:  scrollIntoView(element, rect)\r\n};\r\n","import { createPrivateStore, definePrototype, each, extend, isFunction, isPlainObject, kv, makeArray, mapGet, matchWord, randomId, reject, resolve, single } from \"./util.js\";\r\nimport { containsOrEquals, is, parentsAndSelf } from \"./domUtil.js\";\r\nimport dom from \"./dom.js\";\r\n\r\nconst root = document.documentElement;\r\nconst containers = new WeakMap();\r\nconst domEventTrap = new ZetaContainer();\r\nconst domContainer = new ZetaContainer();\r\nconst _ = createPrivateStore();\r\n\r\nexport var eventSource;\r\nexport var lastEventSource;\r\n\r\n\r\n/* --------------------------------------\r\n * Helper functions\r\n * -------------------------------------- */\r\n\r\n/** @type {Zeta.ZetaComponentConstructor} */\r\nfunction ZetaComponent() {\r\n    this.states = {};\r\n}\r\n\r\nfunction ZetaEventHandlerState(element, context, handlers) {\r\n    var self = this;\r\n    var copy = {};\r\n    each(handlers, function (i, v) {\r\n        if (isFunction(v)) {\r\n            copy[i] = v;\r\n        }\r\n    });\r\n    self.element = element;\r\n    self.context = context;\r\n    self.handlers = copy;\r\n}\r\n\r\nfunction ZetaEventSource(target, path) {\r\n    var self = this;\r\n    path = path || (eventSource ? eventSource.path : dom.focusedElements);\r\n    self.path = path;\r\n    self.source = 'script';\r\n    if (containsOrEquals(path[0] || root, target) || path.indexOf(target) >= 0) {\r\n        self.source = eventSource ? eventSource.source : getEventSourceName();\r\n    }\r\n    self.sourceKeyName = self.source !== 'keyboard' ? null : (eventSource || lastEventSource || '').sourceKeyName;\r\n}\r\n\r\nfunction setLastEventSource(source) {\r\n    lastEventSource = new ZetaEventSource(source);\r\n}\r\n\r\nfunction prepEventSource(promise) {\r\n    var source = eventSource || new ZetaEventSource(dom.activeElement);\r\n    var wrap = function (callback) {\r\n        return function () {\r\n            var prev = eventSource;\r\n            try {\r\n                eventSource = source;\r\n                return callback.apply(this, arguments);\r\n            } finally {\r\n                eventSource = prev;\r\n            }\r\n        };\r\n    };\r\n    return {\r\n        then: function (a, b) {\r\n            return promise.then(a && wrap(a), b && wrap(b));\r\n        },\r\n        catch: function (a) {\r\n            return promise.catch(a && wrap(a));\r\n        }\r\n    };\r\n}\r\n\r\nfunction getEventSource(element) {\r\n    return element ? new ZetaEventSource(element).source : getEventSourceName();\r\n}\r\n\r\nfunction getEventSourceName() {\r\n    var event = dom.event || window.event;\r\n    var type = (event && event.type) || '';\r\n    return type[0] === 'k' || type.substr(0, 3) === 'com' ? 'keyboard' : type[0] === 't' ? 'touch' : type[0] === 'm' || matchWord(type, 'wheel click dblclick contextmenu') ? 'mouse' : matchWord(type, 'drop cut copy paste') || 'script';\r\n}\r\n\r\nfunction getContainer(element, exact) {\r\n    if (exact) {\r\n        return mapGet(containers, element);\r\n    }\r\n    for (var cur = element; cur && !containers.has(cur); cur = cur.parentNode);\r\n    return mapGet(containers, cur) || domContainer;\r\n}\r\n\r\nfunction emitEvent(eventName, container, target, data, bubbles) {\r\n    var event = is(eventName, ZetaEvent) ? _(eventName) : new ZetaEventEmitter(eventName, container, target, data, null, bubbles);\r\n    return event.emit(container, null, target, bubbles);\r\n}\r\n\r\nfunction emitDOMEvent(eventName, nativeEvent, target, data, bubbles, source) {\r\n    var event = new ZetaEventEmitter(eventName, domContainer, target, data, nativeEvent, bubbles, source);\r\n    return event.emit(domEventTrap, 'tap', getContainer(target).element, false) || event.emit();\r\n}\r\n\r\nfunction listenDOMEvent(element, event, handler) {\r\n    if (!is(element, Node)) {\r\n        handler = event;\r\n        event = element;\r\n        element = root;\r\n    }\r\n    domContainer.setContext(element, element);\r\n    domContainer.add(element, isPlainObject(event) || kv(event, handler));\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * ZetaEventEmitter\r\n * -------------------------------------- */\r\n\r\nfunction ZetaEventEmitter(eventName, container, target, data, originalEvent, bubbles, source) {\r\n    target = target || container.element;\r\n    source = source || new ZetaEventSource(target);\r\n    var properties = {\r\n        source: source.source,\r\n        sourceKeyName: source.sourceKeyName,\r\n        timestamp: performance.now(),\r\n        originalEvent: originalEvent || null\r\n    };\r\n    extend(this, {\r\n        container: container,\r\n        eventName: eventName,\r\n        target: target,\r\n        data: data,\r\n        bubbles: bubbles,\r\n        properties: properties,\r\n        sourceObj: source\r\n    }, properties);\r\n}\r\n\r\ndefinePrototype(ZetaEventEmitter, {\r\n    emit: function (container, eventName, target, bubbles) {\r\n        var self = this;\r\n        container = container || self.container;\r\n        bubbles = bubbles === undefined ? self.bubbles : bubbles;\r\n\r\n        var callHandler = function (state, handlerName, eventName, data) {\r\n            if (handlerName === 'init' || handlerName === 'destroy') {\r\n                // prevent init and destroy event from called consecutively twice\r\n                if (state.lastEvent === handlerName) {\r\n                    return false;\r\n                }\r\n                state.lastEvent = handlerName;\r\n            }\r\n            if (matchWord(handlerName || eventName, 'keystroke gesture') && callHandler(state, null, data.data, null)) {\r\n                return self.handled;\r\n            }\r\n            var handler = state.handlers[handlerName || eventName];\r\n            if (!handler) {\r\n                return false;\r\n            }\r\n            var contextContainer = is(state.context, ZetaContainer) || container;\r\n            var event = new ZetaEvent(self, eventName, state, data === undefined ? containerRemoveAsyncEvent(container, eventName, state) : data);\r\n            var prevEventSource = eventSource;\r\n            var prevEvent = contextContainer.event;\r\n            contextContainer.event = event;\r\n            eventSource = self.sourceObj;\r\n            try {\r\n                var returnValue = handler.call(event.context, event, event.context);\r\n                if (returnValue !== undefined) {\r\n                    // @ts-ignore: type inference issue\r\n                    self.handled = resolve(returnValue);\r\n                }\r\n            } catch (e) {\r\n                console.error(e);\r\n                // @ts-ignore: type inference issue\r\n                self.handled = reject(e);\r\n            }\r\n            eventSource = prevEventSource;\r\n            contextContainer.event = prevEvent;\r\n            return self.handled;\r\n        };\r\n        if (is(target, ZetaEventHandlerState)) {\r\n            return callHandler(target, eventName, self.eventName, self.data);\r\n        }\r\n        // find the nearest ancestor that has widget or context set\r\n        var context = container.getContext(target || self.target);\r\n        return single((bubbles ? parentsAndSelf : makeArray)(context), function (v) {\r\n            var component = container.components.get(v.element || v);\r\n            return component && single(component.states, function (v) {\r\n                return callHandler(v, eventName, self.eventName, self.data);\r\n            });\r\n        });\r\n    }\r\n});\r\n\r\n\r\n/* --------------------------------------\r\n * ZetaEvent\r\n * -------------------------------------- */\r\n\r\nfunction ZetaEvent(event, eventName, state, data) {\r\n    var self = extend(this, event.properties);\r\n    self.eventName = eventName;\r\n    self.type = eventName;\r\n    self.context = state.context;\r\n    self.target = containsOrEquals(event.target, state.element) ? state.element : event.target;\r\n    self.data = null;\r\n    if (isPlainObject(data)) {\r\n        extend(self, data);\r\n    } else if (data !== undefined) {\r\n        self.data = data;\r\n    }\r\n    _(self, event);\r\n}\r\n\r\ndefinePrototype(ZetaEvent, {\r\n    handled: function (promise) {\r\n        var event = _(this);\r\n        if (!event.handled) {\r\n            event.handled = resolve(promise);\r\n        }\r\n    },\r\n    isHandled: function () {\r\n        return !!_(this).handled;\r\n    },\r\n    preventDefault: function () {\r\n        var event = this.originalEvent;\r\n        if (event) {\r\n            event.preventDefault();\r\n        } else {\r\n            _(this).defaultPrevented = true;\r\n        }\r\n    },\r\n    isDefaultPrevented: function () {\r\n        return !!(this.originalEvent || _(this)).defaultPrevented;\r\n    }\r\n});\r\n\r\n\r\n/* --------------------------------------\r\n * ZetaContainer\r\n * -------------------------------------- */\r\n\r\nfunction ZetaContainer(element, context) {\r\n    var self = this;\r\n    if (element) {\r\n        containers.set(element, self);\r\n    }\r\n    self.element = element || root;\r\n    self.context = context || null;\r\n    self.components = new Map();\r\n    self.asyncEvents = new Map();\r\n    self.autoDestroy = containsOrEquals(root, element);\r\n    if (element) {\r\n        containers.set(element, self);\r\n    }\r\n}\r\n\r\ndefinePrototype(ZetaContainer, {\r\n    event: null,\r\n    tap: function (handler) {\r\n        domEventTrap.setContext(this.element, this);\r\n        domEventTrap.add(this.element, {\r\n            tap: handler\r\n        });\r\n    },\r\n    getContext: function (element) {\r\n        return (containerGetContext(this, element) || '').context;\r\n    },\r\n    setContext: function (element, context) {\r\n        containerSetContext(this, element, context);\r\n        if (this !== domEventTrap && is(element, Node)) {\r\n            containers.set(element, this);\r\n        }\r\n    },\r\n    add: function (element, key, handlers) {\r\n        if (typeof key !== 'string') {\r\n            handlers = key;\r\n            key = randomId();\r\n        }\r\n        var self = this;\r\n        var target = is(element, Node) || element.element || element;\r\n        var component = is(target, Node) ? containerGetContext(self, target) : containerSetContext(self, element, element);\r\n        if (component) {\r\n            var state = component.states[key] || new ZetaEventHandlerState(target, is(element, Node) ? component.context : element, handlers);\r\n            component.attached = true;\r\n            component.states[key] = state;\r\n            containerRegisterWidgetEvent(self, state, true);\r\n        }\r\n    },\r\n    delete: function (element, key) {\r\n        var self = this;\r\n        var component = mapGet(self.components, element);\r\n        if (component) {\r\n            if (key) {\r\n                var state = component.states[key];\r\n                if (state) {\r\n                    delete component.states[key];\r\n                    containerRegisterWidgetEvent(self, state, false);\r\n                }\r\n            } else {\r\n                component.attached = false;\r\n                each(component.states, function (i, v) {\r\n                    containerRegisterWidgetEvent(self, v, false);\r\n                });\r\n            }\r\n        }\r\n    },\r\n    observe: function (callback, options) {\r\n        return containerCreateObserver(this, callback, options);\r\n    },\r\n    emit: function (eventName, target, data, bubbles) {\r\n        return emitEvent(eventName, this, data, target, bubbles);\r\n    },\r\n    emitAsync: function (event, target, data, bubbles, mergeData) {\r\n        containerRegisterAsyncEvent(this, event, target || this.element, data, bubbles, mergeData);\r\n    },\r\n    flushEvents: function () {\r\n        containerEmitAsyncEvents(this);\r\n    },\r\n    destroy: function () {\r\n        var self = this;\r\n        domEventTrap.delete(self.element);\r\n        containers.delete(self.element);\r\n        each(self.components, function (i, v) {\r\n            containers.delete(i);\r\n            self.emit('destroy', i);\r\n        });\r\n    }\r\n});\r\n\r\n\r\nfunction containerEmitAsyncEvents(inst) {\r\n    inst.timeout = null;\r\n    while (inst.asyncEvents.size) {\r\n        var map = inst.asyncEvents;\r\n        inst.asyncEvents = new Map();\r\n        each(map, function (i, v) {\r\n            each(v, function (j, v) {\r\n                if (!isPlainObject(i) || i.handlers[j]) {\r\n                    v.emit(null, null, i);\r\n                }\r\n            });\r\n        });\r\n        each(map, function (i, v) {\r\n            var obj = mapGet(inst.components, i.element || i);\r\n            if (obj && !obj.attached) {\r\n                inst.components.delete(i.element || i);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction containerRemoveAsyncEvent(inst, eventName, target) {\r\n    var obj = mapGet(inst.asyncEvents, target);\r\n    if (obj && obj[eventName]) {\r\n        var data = obj[eventName].data;\r\n        delete obj[eventName];\r\n        return data || {\r\n            data: data\r\n        };\r\n    }\r\n}\r\n\r\nfunction containerRegisterAsyncEvent(inst, eventName, target, data, bubbles, mergeData) {\r\n    var obj = mapGet(inst.asyncEvents, target, Object);\r\n    obj[eventName] = new ZetaEventEmitter(eventName, inst, target.element || target, mergeData && obj[eventName] ? mergeData(obj[eventName].data, data) : data, null, bubbles);\r\n    inst.timeout = inst.timeout || setTimeout(containerEmitAsyncEvents, 0, inst);\r\n}\r\n\r\nfunction containerRegisterWidgetEvent(container, state, isInit) {\r\n    var event = ['destroy', 'init'];\r\n    if (state.attached ^ isInit && !containerRemoveAsyncEvent(container, event[+!isInit], state)) {\r\n        containerRegisterAsyncEvent(container, event[+isInit], state);\r\n    }\r\n    state.attached = isInit;\r\n}\r\n\r\nfunction containerValidTarget(container, element) {\r\n    return container === domEventTrap || (containers.get(element) || container) === container;\r\n}\r\n\r\nfunction containerCreateObserver(container, callback, options) {\r\n    function handleMutations(mutations) {\r\n        var changes = [];\r\n        var orphans = new Map();\r\n        each(mutations, function (i, v) {\r\n            // filter out changes due to sizzle engine\r\n            // to prevent excessive invocation due to querying elements through jQuery\r\n            if (v.attributeName !== 'id' || ((v.oldValue || '').slice(0, 6) !== 'sizzle' && (v.target.id !== (v.oldValue || '')))) {\r\n                if (!containsOrEquals(container.element, v.target)) {\r\n                    mapGet(orphans, v.target, Array).push(v);\r\n                } else if (containerValidTarget(container, v.target)) {\r\n                    each(v.removedNodes, function (i, v) {\r\n                        if (orphans.has(v)) {\r\n                            changes.push.apply(changes, orphans.get(v));\r\n                        }\r\n                    });\r\n                    changes.push(v);\r\n                }\r\n            }\r\n        });\r\n        changes = changes.filter(function (v) {\r\n            return options[v.type];\r\n        });\r\n        if (changes[0]) {\r\n            callback(changes);\r\n        }\r\n    }\r\n\r\n    var moptions = extend({}, options);\r\n    moptions.subtree = true;\r\n    moptions.childList = true;\r\n    moptions.attributeOldValue |= options.attributes;\r\n\r\n    var observer = new MutationObserver(handleMutations);\r\n    observer.observe(container.element, moptions);\r\n    return function () {\r\n        handleMutations(observer.takeRecords());\r\n    };\r\n}\r\n\r\nfunction containerGetContext(inst, element) {\r\n    var component;\r\n    for (var cur = element; cur && !component; cur = cur.parentNode) {\r\n        component = inst.components.get(cur);\r\n    }\r\n    return component || null;\r\n}\r\n\r\nfunction containerSetContext(inst, element, context) {\r\n    var cur = mapGet(inst.components, element, ZetaComponent);\r\n    // @ts-ignore: undeclared property added to ZetaComponent\r\n    if ((cur.context || context) !== context) {\r\n        throw new Error('Element has already been set to another context');\r\n    }\r\n    // @ts-ignore: undeclared property added to ZetaComponent\r\n    cur.element = element;\r\n    // @ts-ignore: undeclared property added to ZetaComponent\r\n    cur.context = context;\r\n    return cur;\r\n}\r\n\r\nexport {\r\n    ZetaEventSource,\r\n    emitEvent,\r\n    emitDOMEvent,\r\n    listenDOMEvent,\r\n    getContainer,\r\n    getEventSource,\r\n    prepEventSource,\r\n    setLastEventSource\r\n};\r\n","import { Map, WeakMap, Promise } from \"./shim.js\";\r\nimport { any, createPrivateStore, definePrototype, extend, makeArray, mapRemove, reject, resolve } from \"./util.js\";\r\nimport { parentsAndSelf } from \"./domUtil.js\";\r\nimport { emitDOMEvent } from \"./events.js\";\r\n\r\nconst lockedElements = new WeakMap();\r\nconst handledErrors = new WeakMap();\r\nconst _ = createPrivateStore();\r\n\r\nfunction retryable(fn, done) {\r\n    var promise;\r\n    return function () {\r\n        return promise || (promise = resolve(fn()).then(done, function () {\r\n            // user has rejected the cancellation\r\n            // remove the promise object so that user will be prompted again\r\n            promise = null;\r\n            return reject('user_cancelled');\r\n        }));\r\n    };\r\n}\r\n\r\nfunction lock(element, promise, oncancel) {\r\n    var lock = lockedElements.get(element) || new DOMLock(element);\r\n    return promise ? lock.wait(promise, oncancel) : resolve();\r\n}\r\n\r\nfunction locked(element, parents) {\r\n    return !!any(parents ? parentsAndSelf(element) : [element], function (v) {\r\n        return (lockedElements.get(v) || '').locked;\r\n    });\r\n}\r\n\r\nfunction cancelLock(element, force) {\r\n    var lock = lockedElements.get(element);\r\n    return lock ? lock.cancel(force) : resolve();\r\n}\r\n\r\nfunction removeLock(element) {\r\n    var lock = mapRemove(lockedElements, element);\r\n    if (lock) {\r\n        lock.cancel(true);\r\n    }\r\n}\r\n\r\nfunction DOMLock(element) {\r\n    this.element = element;\r\n    lockedElements.set(element, this);\r\n    _(this, { promises: new Map() });\r\n}\r\n\r\ndefinePrototype(DOMLock, {\r\n    get locked() {\r\n        return _(this).promises.size > 0;\r\n    },\r\n    cancel: function (force) {\r\n        var self = this;\r\n        var state = _(self);\r\n        var promises = state.promises;\r\n        if (force || !promises.size) {\r\n            if (promises.size) {\r\n                // @ts-ignore: unable to reflect on interface member\r\n                emitDOMEvent('cancelled', null, self.element);\r\n            }\r\n            // remove all promises from the dictionary so that\r\n            // filtered promise from lock.wait() will be rejected by cancellation\r\n            promises.clear();\r\n            state.handler = null;\r\n            if (state.deferred) {\r\n                state.deferred.resolve();\r\n            }\r\n            return resolve();\r\n        }\r\n        return (state.handler || (state.handler = retryable(function () {\r\n            // request user cancellation for each async task in sequence\r\n            return makeArray(promises).reduce(function (a, v) {\r\n                return a.then(v);\r\n            }, resolve()).then(function () {\r\n                // @ts-ignore: unable to reflect on interface member\r\n                self.cancel(true);\r\n            });\r\n        })))();\r\n    },\r\n    wait: function (promise, oncancel) {\r\n        var self = this;\r\n        var state = _(self);\r\n        var promises = state.promises;\r\n        var finish = function () {\r\n            if (promises.delete(promise) && !promises.size) {\r\n                emitDOMEvent('asyncEnd', null, self.element);\r\n                self.cancel(true);\r\n            }\r\n        };\r\n        promises.set(promise, retryable(oncancel === true ? resolve : oncancel || reject, finish));\r\n        if (promises.size === 1) {\r\n            var callback = {};\r\n            var deferred = new Promise(function (resolve, reject) {\r\n                callback.resolve = resolve;\r\n                callback.reject = reject;\r\n            });\r\n            state.deferred = extend(deferred, callback);\r\n            for (var parent = self.element.parentNode; parent && !lockedElements.has(parent); parent = parent.parentNode);\r\n            if (parent) {\r\n                lockedElements.get(parent).wait(deferred, self.cancel.bind(self));\r\n            }\r\n            emitDOMEvent('asyncStart', null, self.element);\r\n        }\r\n        promise.catch(function (error) {\r\n            if (error && !handledErrors.has(error)) {\r\n                emitDOMEvent('error', null, self.element, {\r\n                    error: error\r\n                }, true);\r\n                // avoid firing error event for the same error for multiple target\r\n                // while propagating through the promise chain\r\n                if (typeof error === 'object') {\r\n                    handledErrors.set(error, true);\r\n                }\r\n            }\r\n            finish();\r\n        });\r\n        return promise.then(function (value) {\r\n            var cancelled = !promises.has(promise);\r\n            finish();\r\n            // the returned promise will be rejected\r\n            // if the current lock has been released or cancelled\r\n            return cancelled ? reject('user_cancelled') : value;\r\n        });\r\n    }\r\n});\r\n\r\nlock(document);\r\nwindow.onbeforeunload = function (e) {\r\n    if (locked(document)) {\r\n        e.returnValue = '';\r\n        e.preventDefault();\r\n    }\r\n};\r\n\r\nexport {\r\n    lock,\r\n    locked,\r\n    cancelLock,\r\n    removeLock\r\n};\r\n","import { IS_IE10, IS_MAC, IS_TOUCH } from \"./env.js\";\r\nimport { Map, Set, WeakMap, Promise, $ } from \"./shim.js\";\r\nimport { any, each, extend, lcfirst, makeArray, map, mapRemove, matchWord, single, ucfirst } from \"./util.js\";\r\nimport { bind, containsOrEquals, dispatchDOMMouseEvent, getRect, is, isVisible, makeSelection, parentsAndSelf, removeNode, scrollBy, selectIncludeSelf } from \"./domUtil.js\";\r\nimport { ZetaEventSource, lastEventSource, getContainer, setLastEventSource, getEventSource, emitDOMEvent, listenDOMEvent } from \"./events.js\";\r\nimport { lock, cancelLock, locked, removeLock } from \"./domLock.js\";\r\n\r\nconst KEYNAMES = JSON.parse('{\"8\":\"backspace\",\"9\":\"tab\",\"13\":\"enter\",\"16\":\"shift\",\"17\":\"ctrl\",\"18\":\"alt\",\"19\":\"pause\",\"20\":\"capsLock\",\"27\":\"escape\",\"32\":\"space\",\"33\":\"pageUp\",\"34\":\"pageDown\",\"35\":\"end\",\"36\":\"home\",\"37\":\"leftArrow\",\"38\":\"upArrow\",\"39\":\"rightArrow\",\"40\":\"downArrow\",\"45\":\"insert\",\"46\":\"delete\",\"48\":\"0\",\"49\":\"1\",\"50\":\"2\",\"51\":\"3\",\"52\":\"4\",\"53\":\"5\",\"54\":\"6\",\"55\":\"7\",\"56\":\"8\",\"57\":\"9\",\"65\":\"a\",\"66\":\"b\",\"67\":\"c\",\"68\":\"d\",\"69\":\"e\",\"70\":\"f\",\"71\":\"g\",\"72\":\"h\",\"73\":\"i\",\"74\":\"j\",\"75\":\"k\",\"76\":\"l\",\"77\":\"m\",\"78\":\"n\",\"79\":\"o\",\"80\":\"p\",\"81\":\"q\",\"82\":\"r\",\"83\":\"s\",\"84\":\"t\",\"85\":\"u\",\"86\":\"v\",\"87\":\"w\",\"88\":\"x\",\"89\":\"y\",\"90\":\"z\",\"91\":\"leftWindow\",\"92\":\"rightWindowKey\",\"93\":\"select\",\"96\":\"numpad0\",\"97\":\"numpad1\",\"98\":\"numpad2\",\"99\":\"numpad3\",\"100\":\"numpad4\",\"101\":\"numpad5\",\"102\":\"numpad6\",\"103\":\"numpad7\",\"104\":\"numpad8\",\"105\":\"numpad9\",\"106\":\"multiply\",\"107\":\"add\",\"109\":\"subtract\",\"110\":\"decimalPoint\",\"111\":\"divide\",\"112\":\"f1\",\"113\":\"f2\",\"114\":\"f3\",\"115\":\"f4\",\"116\":\"f5\",\"117\":\"f6\",\"118\":\"f7\",\"119\":\"f8\",\"120\":\"f9\",\"121\":\"f10\",\"122\":\"f11\",\"123\":\"f12\",\"144\":\"numLock\",\"145\":\"scrollLock\",\"186\":\"semiColon\",\"187\":\"equalSign\",\"188\":\"comma\",\"189\":\"dash\",\"190\":\"period\",\"191\":\"forwardSlash\",\"192\":\"backtick\",\"219\":\"openBracket\",\"220\":\"backSlash\",\"221\":\"closeBracket\",\"222\":\"singleQuote\"}');\r\nconst SELECTOR_FOCUSABLE = ':input, [contenteditable], a[href], area[href], iframe';\r\nconst META_KEYS = [16, 17, 18, 91, 93];\r\nconst OFFSET_ZERO = {\r\n    x: 0,\r\n    y: 0\r\n};\r\n\r\nconst root = document.documentElement;\r\nconst selection = window.getSelection();\r\nconst focusPath = [];\r\nconst focusFriends = new WeakMap();\r\nconst focusElements = new Set();\r\nconst modalElements = new Map();\r\nconst domReady = new Promise($);\r\n\r\nvar windowFocusedOut;\r\nvar currentEvent;\r\nvar scrollbarWidth;\r\n\r\n\r\n/* --------------------------------------\r\n * Helper functions\r\n * -------------------------------------- */\r\n\r\nfunction approxMultipleOf(a, b) {\r\n    return Math.abs(Math.round(a / b) - a / b) < 0.2;\r\n}\r\n\r\nfunction measureLine(p1, p2) {\r\n    var dx = p1.clientX - p2.clientX;\r\n    var dy = p1.clientY - p2.clientY;\r\n    return {\r\n        dx: dx,\r\n        dy: dy,\r\n        deg: Math.atan2(dy, dx) / Math.PI * 180,\r\n        length: Math.sqrt(dx * dx + dy * dy)\r\n    };\r\n}\r\n\r\nfunction textInputAllowed(v) {\r\n    return v.isContentEditable || is(v, 'input,textarea,select');\r\n}\r\n\r\nfunction getScrollParent(element) {\r\n    for (var s; element !== root && (s = getComputedStyle(element)) && s.overflow === 'visible' && matchWord(s.position, 'static relative'); element = element.parentNode);\r\n    return element;\r\n}\r\n\r\nfunction getUnobscuredRect(element) {\r\n    var style = getComputedStyle(element);\r\n    var hasOverflowX = element.offsetWidth < element.scrollWidth;\r\n    var hasOverflowY = element.offsetHeight < element.scrollHeight;\r\n    var parentRect = getRect(element === document.body ? root : element);\r\n    if ((style.overflow !== 'visible' || element === document.body) && (hasOverflowX || hasOverflowY)) {\r\n        if (style.overflowY === 'scroll' || ((style.overflowY !== 'hidden' || element === document.body) && hasOverflowY)) {\r\n            parentRect.right -= scrollbarWidth;\r\n        }\r\n        if (style.overflowX === 'scroll' || ((style.overflowX !== 'hidden' || element === document.body) && hasOverflowX)) {\r\n            parentRect.bottom -= scrollbarWidth;\r\n        }\r\n    }\r\n    return parentRect;\r\n}\r\n\r\nfunction scrollIntoView(element, rect) {\r\n    var parent = getScrollParent(element);\r\n    var parentRect = getUnobscuredRect(parent);\r\n    rect = rect || getRect(element);\r\n\r\n    var deltaX = Math.max(0, rect.right - parentRect.right) || Math.min(rect.left - parentRect.left, 0);\r\n    var deltaY = Math.max(0, rect.bottom - parentRect.bottom) || Math.min(rect.top - parentRect.top, 0);\r\n    var result = (deltaX || deltaY) && scrollBy(parent, deltaX, deltaY) || OFFSET_ZERO;\r\n    if (parent !== root) {\r\n        var parentResult = scrollIntoView(parent.parentNode, rect.translate(result.x, result.y));\r\n        if (parentResult) {\r\n            result = {\r\n                x: result.x + parentResult.x,\r\n                y: result.y + parentResult.y\r\n            };\r\n        }\r\n    }\r\n    return (result.x || result.y) ? result : false;\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Focus management\r\n * -------------------------------------- */\r\n\r\nfunction focused(element, strict) {\r\n    // @ts-ignore: activeElement is not null\r\n    return element === window ? !windowFocusedOut : focusElements.has(element) && (!strict || containsOrEquals(element, document.activeElement));\r\n}\r\n\r\nfunction focusable(element) {\r\n    var friends = map(parentsAndSelf(element), function (v) {\r\n        return focusFriends.get(v);\r\n    });\r\n    return any(focusPath, function (v) {\r\n        return containsOrEquals(v, element) || friends.indexOf(v) >= 0;\r\n    });\r\n}\r\n\r\nfunction focusLockedWithin(element) {\r\n    return single(modalElements, function (v, i) {\r\n        return $(v).find(element)[0] && i;\r\n    });\r\n}\r\n\r\nfunction triggerFocusEvent(eventName, elements, relatedTarget, source) {\r\n    each(elements, function (i, v) {\r\n        if (getContainer(v, true)) {\r\n            emitDOMEvent(eventName, null, v, {\r\n                relatedTarget: relatedTarget\r\n            }, false, source);\r\n        }\r\n    });\r\n}\r\n\r\nfunction setFocus(element, focusOnInput, source, path) {\r\n    if (focusOnInput && !is(element, SELECTOR_FOCUSABLE)) {\r\n        element = $(SELECTOR_FOCUSABLE, element).filter(':visible:not(:disabled,.disabled)')[0] || element;\r\n    }\r\n    path = path || focusPath;\r\n    if (path[0]) {\r\n        var within = path !== focusPath ? element : focusable(element);\r\n        if (!within) {\r\n            var lockParent = focusLockedWithin(element);\r\n            element = focused(lockParent) ? path[0] : lockParent;\r\n            within = focusable(element);\r\n        }\r\n        if (!within) {\r\n            return false;\r\n        }\r\n        var removed = path.splice(0, path.indexOf(within));\r\n        each(removed, function (i, v) {\r\n            focusElements.delete(v);\r\n        });\r\n        triggerFocusEvent('focusout', removed, element, source);\r\n    }\r\n    // check whether the element is still attached in ROM\r\n    // which can be detached while dispatching focusout event above\r\n    if (containsOrEquals(root, element)) {\r\n        var added = parentsAndSelf(element).filter(function (v) {\r\n            return !focusElements.has(v);\r\n        });\r\n        var friend = map(added, function (v) {\r\n            return focusFriends.get(v);\r\n        })[0];\r\n        if (friend && !focused(friend)) {\r\n            var result = setFocus(friend);\r\n            if (result !== undefined) {\r\n                return result && setFocus(element);\r\n            }\r\n        }\r\n        if (added[0]) {\r\n            path.unshift.apply(path, added);\r\n            each(added, function (i, v) {\r\n                focusElements.add(v);\r\n            });\r\n            triggerFocusEvent('focusin', added, null, source || new ZetaEventSource(added[0], path));\r\n        }\r\n        var activeElement = document.activeElement;\r\n        if (path[0] !== activeElement) {\r\n            path[0].focus();\r\n            // ensure previously focused element is properly blurred\r\n            // in case the new element is not focusable\r\n            if (activeElement && activeElement !== document.body && activeElement !== root && document.activeElement === activeElement) {\r\n                // @ts-ignore: activeElement is HTMLElement\r\n                activeElement.blur();\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\r\nfunction setModal(element, within) {\r\n    var focusWithin = is(within, Node) || root;\r\n    if (!focused(focusWithin)) {\r\n        setFocus(focusWithin);\r\n    }\r\n    modalElements.set(element, focusPath.splice(0, focusWithin === root || document.body ? focusPath.length : focusPath.indexOf(focusWithin)));\r\n    setFocus(element);\r\n}\r\n\r\nfunction retainFocus(a, b) {\r\n    focusFriends.set(b, a);\r\n}\r\n\r\nfunction releaseFocus(b) {\r\n    focusFriends.delete(b);\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Observe\r\n * -------------------------------------- */\r\n\r\nfunction watchElements(element, selector, callback) {\r\n    var collection = new Set();\r\n    var observer = new MutationObserver(function (records) {\r\n        var removedNodes = map(records, function (v) {\r\n            return selectIncludeSelf(selector, v.removedNodes);\r\n        });\r\n        var addedNodes = map(records, function (v) {\r\n            return selectIncludeSelf(selector, v.addedNodes);\r\n        });\r\n        addedNodes = addedNodes.filter(function (v) {\r\n            return containsOrEquals(element, v) && !collection.has(v);\r\n        });\r\n        removedNodes = removedNodes.filter(function (v) {\r\n            return !containsOrEquals(element, v);\r\n        });\r\n        addedNodes.forEach(collection.add.bind(collection));\r\n        removedNodes.forEach(collection.delete.bind(collection));\r\n        callback(addedNodes, removedNodes);\r\n    });\r\n    observer.observe(element, {\r\n        subtree: true,\r\n        childList: true\r\n    });\r\n}\r\n\r\n/* --------------------------------------\r\n * DOM event handling\r\n * -------------------------------------- */\r\n\r\n\r\ndomReady.then(function () {\r\n    var body = document.body;\r\n    var modifierCount;\r\n    var modifiedKeyCode;\r\n    var mouseInitialPoint;\r\n    var mousedownFocus;\r\n    var pressTimeout;\r\n    var imeNode;\r\n    var imeOffset;\r\n    var imeText;\r\n    \r\n    // detect native scrollbar size\r\n    // height being picked because scrollbar may not be shown if container is too short\r\n    var dummy = $('<div style=\"overflow:scroll;height:80px\"><div style=\"height:100px\"></div></div>').appendTo(body)[0];\r\n    scrollbarWidth = getRect(dummy).width - getRect(dummy.children[0]).width;\r\n    removeNode(dummy);\r\n\r\n    function getEventName(e, suffix) {\r\n        var mod = ((e.ctrlKey || e.metaKey) ? 'Ctrl' : '') + (e.altKey ? 'Alt' : '') + (e.shiftKey ? 'Shift' : '');\r\n        return mod ? lcfirst(mod + ucfirst(suffix)) : suffix;\r\n    }\r\n\r\n    function updateIMEState() {\r\n        var element = document.activeElement || root;\r\n        if ('selectionEnd' in element) {\r\n            imeNode = element;\r\n            // @ts-ignore: guranteed having selectionEnd property\r\n            imeOffset = element.selectionEnd;\r\n        } else {\r\n            // @ts-ignore: selection is not null\r\n            imeNode = selection.anchorNode;\r\n            // @ts-ignore: selection is not null\r\n            imeOffset = selection.anchorOffset;\r\n            if (imeNode && imeNode.nodeType === 1) {\r\n                // IE puts selection at element level\r\n                // however it will insert text in the previous text node\r\n                var child = imeNode.childNodes[imeOffset - 1];\r\n                if (child && child.nodeType === 3) {\r\n                    imeNode = child;\r\n                    // @ts-ignore: child is Text\r\n                    imeOffset = child.length;\r\n                } else {\r\n                    imeNode = imeNode.childNodes[imeOffset];\r\n                    imeOffset = 0;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function triggerUIEvent(eventName, nativeEvent, elements, data, bubbles) {\r\n        var prev = null;\r\n        return any(makeArray(elements), function (v) {\r\n            var container = getContainer(v);\r\n            if (prev !== container) {\r\n                prev = container;\r\n                if (emitDOMEvent(eventName, nativeEvent, v, data, bubbles)) {\r\n                    return true;\r\n                }\r\n                if (data.char && textInputAllowed(v)) {\r\n                    return emitDOMEvent('textInput', nativeEvent, v, data.char, true);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    function triggerKeystrokeEvent(keyName, char, nativeEvent) {\r\n        var data = {\r\n            data: keyName,\r\n            char: char\r\n        };\r\n        lastEventSource.sourceKeyName = keyName;\r\n        if (triggerUIEvent('keystroke', nativeEvent, focusPath, data, true)) {\r\n            nativeEvent.preventDefault();\r\n            return true;\r\n        }\r\n    }\r\n\r\n    function triggerMouseEvent(eventName, nativeEvent) {\r\n        var point = mouseInitialPoint || nativeEvent;\r\n        return emitDOMEvent(eventName, nativeEvent, nativeEvent.target, {\r\n            target: nativeEvent.target,\r\n            clientX: point.clientX,\r\n            clientY: point.clientY,\r\n            metakey: getEventName(nativeEvent)\r\n        });\r\n    }\r\n\r\n    function triggerGestureEvent(gesture, nativeEvent) {\r\n        mouseInitialPoint = null;\r\n        return triggerUIEvent('gesture', nativeEvent, focusPath.slice(-1), gesture);\r\n    }\r\n\r\n    function unmount(mutations) {\r\n        // automatically free resources when DOM nodes are removed from document\r\n        each(mutations, function (i, v) {\r\n            each(v.removedNodes, function (i, v) {\r\n                if (v.nodeType === 1 && !containsOrEquals(root, v)) {\r\n                    var container = getContainer(v, true);\r\n                    if (container && container.autoDestroy && container.element === v) {\r\n                        container.destroy();\r\n                    }\r\n                    removeLock(v);\r\n                    var modalPath = mapRemove(modalElements, v);\r\n                    if (modalPath && focused(v)) {\r\n                        var path = any(modalElements, function (w) {\r\n                            return w.indexOf(v) >= 0;\r\n                        }) || focusPath;\r\n                        path.push.apply(path, modalPath);\r\n                        setFocus(modalPath[0], false, null, path);\r\n                    }\r\n                    var index = focusPath.indexOf(v);\r\n                    if (index >= 0) {\r\n                        setFocus(focusPath[index + 1] || body);\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    if (IS_IE10) {\r\n        // polyfill for pointer-events: none for IE10\r\n        bind(body, 'mousedown mouseup mousemove mouseenter mouseleave click dblclick contextmenu wheel', function (e) {\r\n            // @ts-ignore: e.target is Element\r\n            if (getComputedStyle(e.target).pointerEvents === 'none') {\r\n                e.stopPropagation();\r\n                e.stopImmediatePropagation();\r\n                // @ts-ignore: e.target is Element\r\n                if (!e.bubbles || !dispatchDOMMouseEvent(e.type, e, e)) {\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        }, true);\r\n    }\r\n\r\n    bind(window, 'mousedown mouseup wheel compositionstart compositionend beforeinput textInput keydown keyup keypress touchstart touchend cut copy paste drop click dblclick contextmenu', function (e) {\r\n        currentEvent = e;\r\n        setTimeout(function () {\r\n            currentEvent = null;\r\n        });\r\n        setLastEventSource(null);\r\n        if (!focusable(e.target)) {\r\n            e.stopImmediatePropagation();\r\n            e.preventDefault();\r\n            if (matchWord(e.type, 'touchstart mousedown keydown')) {\r\n                emitDOMEvent('focusreturn', null, focusPath.slice(-1)[0]);\r\n            }\r\n        }\r\n        setLastEventSource(e.target);\r\n    }, true);\r\n\r\n    bind(root, {\r\n        compositionstart: function () {\r\n            updateIMEState();\r\n            imeText = '';\r\n        },\r\n        compositionupdate: function (e) {\r\n            imeText = e.data;\r\n        },\r\n        compositionend: function (e) {\r\n            var isInputElm = 'selectionEnd' in imeNode;\r\n            var prevText = imeText;\r\n            var prevOffset = imeOffset;\r\n            updateIMEState();\r\n\r\n            var curText = imeNode.value || imeNode.data || '';\r\n            imeText = e.data;\r\n            // some IME lacks inserted character sequence when selecting from phrase candidate list\r\n            // also legacy Microsoft Changjie IME reports full-width spaces (U+3000) instead of actual characters\r\n            if (!imeText || /^\\u3000+$/.test(imeText)) {\r\n                imeText = curText.slice(prevOffset, imeOffset);\r\n            }\r\n\r\n            // some old mobile browsers fire compositionend event before replacing final character sequence\r\n            // need to compare both to truncate the correct range of characters\r\n            // three cases has been observed: XXX{imeText}|, XXX{prevText}| and XXX|{imeText}\r\n            var o1 = imeOffset - imeText.length;\r\n            var o2 = imeOffset - prevText.length;\r\n            var startOffset = imeOffset;\r\n            if (curText.slice(o1, imeOffset) === imeText) {\r\n                startOffset = o1;\r\n            } else if (curText.slice(o2, imeOffset) === prevText) {\r\n                startOffset = o2;\r\n            } else if (curText.substr(imeOffset, imeText.length) === imeText) {\r\n                imeOffset += imeText.length;\r\n            }\r\n            var newText = curText.substr(0, startOffset) + curText.slice(imeOffset);\r\n            if (isInputElm) {\r\n                imeNode.value = newText;\r\n                imeNode.setSelectionRange(startOffset, startOffset);\r\n            } else {\r\n                imeNode.data = newText;\r\n                makeSelection(imeNode, startOffset);\r\n            }\r\n            if (!triggerUIEvent('textInput', e, focusPath[0], imeText)) {\r\n                if (isInputElm) {\r\n                    imeNode.value = curText;\r\n                    imeNode.setSelectionRange(imeOffset, imeOffset);\r\n                } else {\r\n                    imeNode.data = curText;\r\n                    makeSelection(imeNode, imeOffset);\r\n                }\r\n            }\r\n            imeNode = null;\r\n            setTimeout(function () {\r\n                imeText = null;\r\n            });\r\n        },\r\n        textInput: function (e) {\r\n            // required for older mobile browsers that do not support beforeinput event\r\n            // ignore in case browser fire textInput before/after compositionend\r\n            if (!imeNode && (e.data === imeText || triggerUIEvent('textInput', e, focusPath[0], e.data))) {\r\n                e.preventDefault();\r\n            }\r\n        },\r\n        keydown: function (e) {\r\n            if (!imeNode) {\r\n                var keyCode = e.keyCode;\r\n                var isModifierKey = (META_KEYS.indexOf(keyCode) >= 0);\r\n                if (isModifierKey && keyCode !== modifiedKeyCode) {\r\n                    triggerUIEvent('metakeychange', e, focusPath, getEventName(e), true);\r\n                }\r\n                var isSpecialKey = !isModifierKey && (KEYNAMES[keyCode] || '').length > 1 && !(keyCode >= 186 || (keyCode >= 96 && keyCode <= 111));\r\n                // @ts-ignore: boolean arithmetic\r\n                modifierCount = e.ctrlKey + e.shiftKey + e.altKey + e.metaKey + !isModifierKey;\r\n                // @ts-ignore: boolean arithmetic\r\n                modifierCount *= isSpecialKey || ((modifierCount > 2 || (modifierCount > 1 && !e.shiftKey)) && !isModifierKey);\r\n                modifiedKeyCode = keyCode;\r\n                if (modifierCount) {\r\n                    triggerKeystrokeEvent(getEventName(e, KEYNAMES[keyCode] || e.key), keyCode === 32 ? ' ' : '', e);\r\n                }\r\n            }\r\n        },\r\n        keyup: function (e) {\r\n            var isModifierKey = (META_KEYS.indexOf(e.keyCode) >= 0);\r\n            if (!imeNode && (isModifierKey || modifiedKeyCode === e.keyCode)) {\r\n                modifiedKeyCode = null;\r\n                modifierCount--;\r\n                if (isModifierKey) {\r\n                    triggerUIEvent('metakeychange', e, focusPath, getEventName(e) || '', true);\r\n                }\r\n            }\r\n        },\r\n        keypress: function (e) {\r\n            var data = e.char || e.key || String.fromCharCode(e.charCode);\r\n            // @ts-ignore: non-standard member\r\n            if (!imeNode && !modifierCount && (e.synthetic || !('onbeforeinput' in e.target))) {\r\n                triggerKeystrokeEvent(getEventName(e, KEYNAMES[modifiedKeyCode] || data), data, e);\r\n            }\r\n        },\r\n        beforeinput: function (e) {\r\n            if (!imeNode && e.cancelable) {\r\n                switch (e.inputType) {\r\n                    case 'insertText':\r\n                        return triggerUIEvent('textInput', e, focusPath[0], e.data);\r\n                    case 'deleteContent':\r\n                    case 'deleteContentBackward':\r\n                        return triggerKeystrokeEvent('backspace', '', e);\r\n                    case 'deleteContentForward':\r\n                        return triggerKeystrokeEvent('delete', '', e);\r\n                }\r\n            }\r\n        },\r\n        touchstart: function (e) {\r\n            mouseInitialPoint = extend({}, e.touches[0]);\r\n            if (!e.touches[1]) {\r\n                // @ts-ignore: e.target is Element\r\n                if (focused(getContainer(e.target).element)) {\r\n                    triggerMouseEvent('mousedown', e);\r\n                }\r\n                pressTimeout = setTimeout(function () {\r\n                    if (mouseInitialPoint) {\r\n                        triggerMouseEvent('longPress', e);\r\n                        mouseInitialPoint = null;\r\n                    }\r\n                }, 1000);\r\n            }\r\n        },\r\n        touchmove: function (e) {\r\n            clearTimeout(pressTimeout);\r\n            pressTimeout = null;\r\n            if (mouseInitialPoint) {\r\n                if (!e.touches[1]) {\r\n                    var line = measureLine(e.touches[0], mouseInitialPoint);\r\n                    if (line.length > 50 && approxMultipleOf(line.deg, 90)) {\r\n                        triggerGestureEvent('swipe' + (approxMultipleOf(line.deg, 180) ? (line.dx > 0 ? 'Right' : 'Left') : (line.dy > 0 ? 'Bottom' : 'Top')), e);\r\n                    }\r\n                } else if (!e.touches[2]) {\r\n                    triggerGestureEvent('pinchZoom', e);\r\n                }\r\n            }\r\n        },\r\n        touchend: function (e) {\r\n            clearTimeout(pressTimeout);\r\n            if (mouseInitialPoint && pressTimeout) {\r\n                setFocus(e.target);\r\n                triggerMouseEvent('click', e);\r\n                dispatchDOMMouseEvent('click', mouseInitialPoint, e);\r\n                e.preventDefault();\r\n            }\r\n        },\r\n        mousedown: function (e) {\r\n            setFocus(e.target);\r\n            if ((e.buttons || e.which) === 1) {\r\n                triggerMouseEvent('mousedown', e);\r\n            }\r\n            mouseInitialPoint = e;\r\n            mousedownFocus = document.activeElement;\r\n        },\r\n        mousemove: function (e) {\r\n            if (mouseInitialPoint && measureLine(e, mouseInitialPoint).length > 5) {\r\n                mouseInitialPoint = null;\r\n            }\r\n        },\r\n        mouseup: function () {\r\n            if (mousedownFocus && document.activeElement !== mousedownFocus) {\r\n                mousedownFocus.focus();\r\n            }\r\n        },\r\n        wheel: function (e) {\r\n            // @ts-ignore: e.target is Element\r\n            if (containsOrEquals(e.target, focusPath[0]) || !textInputAllowed(e.target)) {\r\n                var dir = e.deltaY || e.detail;\r\n                if (dir && triggerUIEvent('mousewheel', e, e.target, dir / Math.abs(dir) * (IS_MAC ? -1 : 1), true)) {\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        },\r\n        click: function (e) {\r\n            if (!IS_TOUCH && mouseInitialPoint) {\r\n                triggerMouseEvent('click', e);\r\n            }\r\n        },\r\n        contextmenu: function (e) {\r\n            triggerMouseEvent('rightClick', e);\r\n        },\r\n        dblclick: function (e) {\r\n            triggerMouseEvent('dblclick', e);\r\n        },\r\n        focusin: function (e) {\r\n            windowFocusedOut = false;\r\n            if (focusable(e.target)) {\r\n                setFocus(e.target, false, lastEventSource);\r\n            } else {\r\n                // @ts-ignore: e.target is Element\r\n                e.target.blur();\r\n            }\r\n        },\r\n        focusout: function (e) {\r\n            // browser set focus to body if the focused element is no longer visible\r\n            // which is not a desirable behavior in many cases\r\n            // find the first visible element in focusPath to focus\r\n            // @ts-ignore: e.target is Element\r\n            if (!e.relatedTarget && !isVisible(e.target)) {\r\n                var cur = any(focusPath.slice(focusPath.indexOf(e.target) + 1), isVisible);\r\n                if (cur) {\r\n                    setFocus(cur, false, lastEventSource);\r\n                }\r\n            }\r\n        }\r\n    }, true);\r\n\r\n    bind(window, {\r\n        wheel: function (e) {\r\n            // scrolling will happen on first scrollable element up the DOM tree\r\n            // prevent scrolling if interaction on such element should be blocked by modal element\r\n            var deltaX = -e.deltaX;\r\n            var deltaY = -e.deltaY;\r\n            // @ts-ignore: e.target is Element\r\n            for (var cur = e.target; cur && cur !== root; cur = cur.parentNode) {\r\n                // @ts-ignore: e.target is Element\r\n                var style = getComputedStyle(cur);\r\n                // @ts-ignore: e.target is Element\r\n                if (cur.scrollWidth > cur.offsetWidth && matchWord(style.overflowX, 'auto scroll') && ((deltaX > 0 && cur.scrollLeft > 0) || (deltaX < 0 && cur.scrollLeft + cur.offsetWidth < cur.scrollWidth))) {\r\n                    break;\r\n                }\r\n                // @ts-ignore: e.target is Element\r\n                if (cur.scrollHeight > cur.offsetHeight && matchWord(style.overflowY, 'auto scroll') && ((deltaY > 0 && cur.scrollTop > 0) || (deltaY < 0 && cur.scrollTop + cur.offsetHeight < cur.scrollHeight))) {\r\n                    break;\r\n                }\r\n            }\r\n            if (!focusable(cur)) {\r\n                e.preventDefault();\r\n            }\r\n        },\r\n        blur: function (e) {\r\n            if (e.target === window) {\r\n                windowFocusedOut = true;\r\n            }\r\n        }\r\n    });\r\n\r\n    new MutationObserver(unmount).observe(root, {\r\n        subtree: true,\r\n        childList: true\r\n    });\r\n    setFocus(document.activeElement);\r\n});\r\n\r\n\r\n/* --------------------------------------\r\n * Exports\r\n * -------------------------------------- */\r\n\r\nexport default {\r\n    get event() {\r\n        return currentEvent;\r\n    },\r\n    get activeElement() {\r\n        return focusPath[0];\r\n    },\r\n    get focusedElements() {\r\n        return focusPath.slice(0);\r\n    },\r\n    get eventSource() {\r\n        return getEventSource();\r\n    },\r\n    root,\r\n    ready: domReady,\r\n\r\n    focusable,\r\n    focused,\r\n    setModal,\r\n    setFocus,\r\n    retainFocus,\r\n    releaseFocus,\r\n    focus: function (element) {\r\n        setFocus(element, true);\r\n    },\r\n\r\n    getEventSource,\r\n    on: listenDOMEvent,\r\n    emit: function (eventName, element, data, bubbles) {\r\n        return emitDOMEvent(eventName, null, element, data, bubbles);\r\n    },\r\n\r\n    lock,\r\n    locked,\r\n    cancelLock,\r\n    removeLock,\r\n\r\n    scrollIntoView,\r\n    watchElements,\r\n};\r\n","import * as env from \"./env.js\";\r\nimport * as shim from \"./shim.js\";\r\nimport * as _util from \"./util.js\";\r\nimport * as _domUtil from \"./domUtil.js\";\r\nimport * as cssUtil from \"./cssUtil.js\";\r\nimport dom from \"./dom.js\";\r\n\r\nconst IS_IOS = env.IS_IOS;\r\nconst IS_IE10 = env.IS_IE10;\r\nconst IS_IE = env.IS_IE;\r\nconst IS_MAC = env.IS_MAC;\r\nconst IS_TOUCH = env.IS_TOUCH;\r\nconst util = { ..._util, ..._domUtil };\r\n\r\nexport default {\r\n    IS_IOS,\r\n    IS_IE10,\r\n    IS_IE,\r\n    IS_MAC,\r\n    IS_TOUCH,\r\n    shim,\r\n    util,\r\n    dom,\r\n    css: cssUtil\r\n};\r\n\r\nexport {\r\n    IS_IOS,\r\n    IS_IE10,\r\n    IS_IE,\r\n    IS_MAC,\r\n    IS_TOUCH,\r\n    shim,\r\n    util,\r\n    dom,\r\n    cssUtil as css\r\n};\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__804__;","module.exports = __WEBPACK_EXTERNAL_MODULE__44__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(463);\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"sourceRoot":""}