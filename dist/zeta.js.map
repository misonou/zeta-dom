{"version":3,"file":"zeta.js","mappings":"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","sources":["webpack://zeta/webpack/universalModuleDefinition","webpack://zeta/external umd {\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\",\"root\":\"jQuery\"}","webpack://zeta/webpack/bootstrap","webpack://zeta/webpack/runtime/define property getters","webpack://zeta/webpack/runtime/hasOwnProperty shorthand","webpack://zeta/webpack/runtime/make namespace object","webpack://zeta/./src/include/promise-polyfill.js","webpack://zeta/./src/include/jquery.js","webpack://zeta/./src/env.js","webpack://zeta/./src/errorCode.js","webpack://zeta/./src/util.js","webpack://zeta/./src/observe.js","webpack://zeta/./src/libCheck.js","webpack://zeta/./src/constants.js","webpack://zeta/./src/domLock.js","webpack://zeta/./src/dom.js","webpack://zeta/./src/events.js","webpack://zeta/./src/domUtil.js","webpack://zeta/./src/cssUtil.js","webpack://zeta/./src/tree.js","webpack://zeta/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jquery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"zeta-dom\", [\"jquery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"zeta-dom\"] = factory(require(\"jquery\"));\n\telse\n\t\troot[\"zeta\"] = factory(root[\"jQuery\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__914__) {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__914__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const Promise = window.Promise;\r\nexport default Promise;\r\n","import jQuery from \"jquery\";\r\nexport default jQuery;\r\n","// @ts-nocheck\r\nimport Promise from \"./include/promise-polyfill.js\";\r\nimport $ from \"./include/jquery.js\";\r\n\r\nexport const window = self;\r\nexport const document = window.document;\r\nexport const root = document.documentElement;\r\nexport const getSelection = window.getSelection;\r\nexport const getComputedStyle = window.getComputedStyle;\r\nexport const reportError = window.reportError || function (error) {\r\n    console.error(error);\r\n};\r\nexport const domReady = new Promise($);\r\n\r\nexport const IS_MAC = navigator.userAgent.indexOf('Macintosh') >= 0;\r\nexport const IS_IOS = (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) || (IS_MAC && navigator.maxTouchPoints > 2);\r\nexport const IS_IE10 = !!window.ActiveXObject;\r\nexport const IS_IE = IS_IE10 || root.style.msTouchAction !== undefined || root.style.msUserSelect !== undefined;\r\nexport const IS_TOUCH = 'ontouchstart' in window;\r\n","export const cancellationRejected = 'zeta/cancellation-rejected';\r\nexport const cancelled = 'zeta/cancelled';\r\nexport const invalidOperation = 'zeta/invalid-operation';\r\n","import Promise from \"./include/promise-polyfill.js\";\r\nimport { window } from \"./env.js\";\r\n\r\nconst objectProto = Object.prototype;\r\nconst keys = Object.keys;\r\nconst freeze = Object.freeze;\r\nconst defineProperty = Object.defineProperty;\r\nconst getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\r\nconst getOwnPropertyNames = Object.getOwnPropertyNames;\r\nconst getPrototypeOf = Object.getPrototypeOf;\r\nconst hasOwnPropertyImpl = objectProto.hasOwnProperty;\r\nconst propertyIsEnumerableImpl = objectProto.propertyIsEnumerable;\r\nconst toStringImpl = objectProto.toString;\r\nconst values = Object.values || function (obj) {\r\n    var vals = [];\r\n    for (var key in obj) {\r\n        if (hasOwnPropertyImpl.call(obj, key) && propertyIsEnumerableImpl.call(obj, key)) {\r\n            vals.push(obj[key]);\r\n        }\r\n    }\r\n    return vals;\r\n};\r\nconst queueMicrotask = window.queueMicrotask || function (callback) {\r\n    resolve().then(callback);\r\n};\r\nconst sameValue = Object.is || function (a, b) {\r\n    return sameValueZero(a, b) && (a !== 0 || 1 / a === 1 / b);\r\n};\r\n\r\nconst compareFn = [\r\n    function (b, v, i) { return !sameValueZero(b[i], v); },\r\n    function (b, v, i) { return !sameValueZero(b.get(i), v); },\r\n    function (b, v, i) { return !b.has(v); }\r\n];\r\n\r\nvar setImmediateStore = new Map();\r\nvar matchWordCache = Object.create(null);\r\nvar watchStore = createPrivateStore();\r\n\r\n/* --------------------------------------\r\n * Miscellaneous\r\n * -------------------------------------- */\r\n\r\nfunction noop() { }\r\n\r\nfunction pipe(v) {\r\n    return v;\r\n}\r\n\r\nfunction either(x, y) {\r\n    return x ? !y : !!y;\r\n}\r\n\r\nfunction sameValueZero(x, y) {\r\n    return x === y || x !== x && y !== y;\r\n}\r\n\r\nfunction is(obj, fn) {\r\n    return obj instanceof fn && obj;\r\n}\r\n\r\nfunction isUndefinedOrNull(value) {\r\n    return value === undefined || value === null;\r\n}\r\n\r\nfunction isArray(obj) {\r\n    return Array.isArray(obj) && obj;\r\n}\r\n\r\nfunction isFunction(obj) {\r\n    return typeof obj === 'function' && obj;\r\n}\r\n\r\nfunction isError(obj) {\r\n    return toStringImpl.call(obj) === '[object Error]' && obj;\r\n}\r\n\r\nfunction isThenable(obj) {\r\n    return !!obj && isFunction(obj.then) && obj;\r\n}\r\n\r\nfunction isPlainObject(obj) {\r\n    var proto = typeof obj === 'object' && obj !== null && getPrototypeOf(obj);\r\n    return (proto === objectProto || proto === null) && obj;\r\n}\r\n\r\nfunction isArrayLike(obj) {\r\n    if (!obj || typeof obj !== 'object' || obj === window) {\r\n        return false;\r\n    }\r\n    if (isArray(obj)) {\r\n        return true;\r\n    }\r\n    var length = obj.length;\r\n    return typeof length === 'number' && length >= 0 && (isFunction(obj.slice) !== false || toStringImpl.call(obj) !== '[object Object]');\r\n}\r\n\r\nfunction makeArray(obj) {\r\n    if (isArray(obj)) {\r\n        return obj.slice(0);\r\n    }\r\n    if (obj && (isArrayLike(obj) || isFunction(obj.forEach))) {\r\n        var arr = [];\r\n        each(obj, function (i, v) {\r\n            arr[arr.length] = v;\r\n        });\r\n        return arr;\r\n    }\r\n    return isUndefinedOrNull(obj) ? [] : [obj];\r\n}\r\n\r\nfunction extend() {\r\n    var options, name, src, copy, copyIsArray, clone;\r\n    var target = arguments[0] || {};\r\n    var i = 1;\r\n    var length = arguments.length;\r\n    var deep = false;\r\n\r\n    if (typeof target === 'boolean') {\r\n        deep = target;\r\n        target = arguments[i] || {};\r\n        i++;\r\n    }\r\n    if (typeof target !== 'object' && !isFunction(target)) {\r\n        target = {};\r\n    }\r\n    for (; i < length; i++) {\r\n        if ((options = arguments[i]) !== null) {\r\n            for (name in options) {\r\n                src = target[name];\r\n                copy = options[name];\r\n\r\n                // prevent never-ending loop\r\n                if (target === copy) {\r\n                    continue;\r\n                }\r\n                // recurse if we're merging plain objects or arrays\r\n                if (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\r\n                    if (copyIsArray) {\r\n                        copyIsArray = false;\r\n                        clone = src && isArray(src) ? src : [];\r\n                    } else {\r\n                        clone = src && isPlainObject(src) ? src : {};\r\n                    }\r\n                    // never move original objects, clone them\r\n                    target[name] = extend(deep, clone, copy);\r\n                } else {\r\n                    target[name] = copy;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return target;\r\n}\r\n\r\nfunction each(obj, callback) {\r\n    if (obj) {\r\n        var cur, i = 0;\r\n        callback = callback.bind(obj);\r\n        if (typeof obj === 'string') {\r\n            if (obj.indexOf(' ') < 0) {\r\n                callback(0, obj);\r\n                return;\r\n            }\r\n            obj = obj.split(' ');\r\n        } else if (obj instanceof Set) {\r\n            // would be less useful if key and value refers to the same object\r\n            obj = obj.values();\r\n        }\r\n        if (isArrayLike(obj)) {\r\n            var len = obj.length;\r\n            while (i < len && callback(i, obj[i++]) !== false);\r\n        } else if (isFunction(obj.entries)) {\r\n            obj = obj.entries();\r\n            while (!(cur = obj.next()).done && callback(cur.value[0], cur.value[1]) !== false);\r\n        } else if (isFunction(obj.next)) {\r\n            while (!(cur = obj.next()).done && callback(i++, cur.value) !== false);\r\n        } else if (isFunction(obj.nextNode)) {\r\n            while ((cur = obj.nextNode()) && callback(i++, cur) !== false);\r\n        } else if (isFunction(obj.forEach)) {\r\n            obj.forEach(function (v, i) {\r\n                if (cur !== false) {\r\n                    cur = callback(i, v);\r\n                }\r\n            });\r\n        } else {\r\n            for (i in obj) {\r\n                if (callback(i, obj[i]) === false) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction map(obj, callback) {\r\n    var arr = [];\r\n    each(obj, function (i, v) {\r\n        var result = callback.call(this, v, i);\r\n        if (!isUndefinedOrNull(result)) {\r\n            if (isArray(result)) {\r\n                arr.push.apply(arr, result);\r\n            } else {\r\n                arr[arr.length] = result;\r\n            }\r\n        }\r\n    });\r\n    return arr;\r\n}\r\n\r\nfunction grep(obj, callback) {\r\n    var arr = [];\r\n    callback = callback || pipe;\r\n    each(obj, function (i, v) {\r\n        if (callback.call(this, v, i)) {\r\n            arr[arr.length] = v;\r\n        }\r\n    });\r\n    return arr;\r\n}\r\n\r\nfunction splice(arr, callback) {\r\n    var result = [];\r\n    for (var i = arr.length - 1; i >= 0; i--) {\r\n        if (callback.call(arr, arr[i], i)) {\r\n            result.unshift(arr.splice(i, 1)[0]);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction any(obj, callback) {\r\n    var result = false;\r\n    callback = callback || pipe;\r\n    each(obj, function (i, v) {\r\n        if (callback.call(this, v, i)) {\r\n            result = v;\r\n            return false;\r\n        }\r\n    });\r\n    return result;\r\n}\r\n\r\nfunction single(obj, callback) {\r\n    var result;\r\n    each(obj, function (i, v) {\r\n        result = callback.call(this, v, i);\r\n        return !result;\r\n    });\r\n    return result;\r\n}\r\n\r\nfunction kv(key, value) {\r\n    var obj = {};\r\n    obj[key] = value;\r\n    return obj;\r\n}\r\n\r\nfunction fill(obj, keys, value) {\r\n    if (arguments.length < 3) {\r\n        return fill({}, obj, keys);\r\n    }\r\n    each(keys, function (i, v) {\r\n        obj[v] = value;\r\n    });\r\n    return obj;\r\n}\r\n\r\nfunction pick(obj, keys) {\r\n    var result = {};\r\n    if (isFunction(keys)) {\r\n        each(obj, function (i, v) {\r\n            if (keys.call(obj, v, i)) {\r\n                result[i] = v;\r\n            }\r\n        });\r\n    } else {\r\n        each(keys, function (i, v) {\r\n            if (v in obj) {\r\n                result[v] = obj[v];\r\n            }\r\n        });\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction exclude(obj, keys) {\r\n    var result = {};\r\n    if (isFunction(keys)) {\r\n        each(obj, function (i, v) {\r\n            if (!keys.call(obj, v, i)) {\r\n                result[i] = v;\r\n            }\r\n        });\r\n    } else {\r\n        extend(result, obj);\r\n        each(keys, function (i, v) {\r\n            delete result[v];\r\n        });\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction mapObject(obj, callback) {\r\n    var result = {};\r\n    each(obj, function (i, v) {\r\n        result[i] = callback.call(obj, v, i);\r\n    });\r\n    return result;\r\n}\r\n\r\nfunction mapGet(map, key, fn, passKey) {\r\n    if (!map.has(key) && fn) {\r\n        map.set(key, hasOwnProperty(fn, 'prototype') ? (passKey ? new fn(key) : new fn()) : (passKey ? fn(key) : fn()));\r\n    }\r\n    return map.get(key);\r\n}\r\n\r\nfunction mapRemove(map, key) {\r\n    var value = map.get(key);\r\n    map.delete(key);\r\n    return value;\r\n}\r\n\r\nfunction arrRemove(arr, obj) {\r\n    var index = arr.indexOf(obj);\r\n    if (index >= 0) {\r\n        return arr.splice(index, 1)[0];\r\n    }\r\n}\r\n\r\nfunction setAdd(set, obj) {\r\n    var result = !set.has(obj);\r\n    set.add(obj);\r\n    return result;\r\n}\r\n\r\nfunction equal(a, b) {\r\n    if (!a || !b || typeof a !== 'object' || a.constructor !== b.constructor) {\r\n        return sameValueZero(a, b);\r\n    }\r\n    var type = (a instanceof Map && 1) || (a instanceof Set && 2) || (isArrayLike(a) && 3) || 0;\r\n    if (type) {\r\n        return a.length === b.length && a.size === b.size && !single(a, compareFn[type % 3].bind(0, b));\r\n    }\r\n    var needles = keys(a);\r\n    return needles.length === keys(b).length && !single(needles, function (v) {\r\n        return !hasOwnPropertyImpl.call(b, v) || !propertyIsEnumerableImpl.call(b, v) || !sameValueZero(a[v], b[v]);\r\n    });\r\n}\r\n\r\nfunction combineFn(arr) {\r\n    arr = isFunction(arr) ? [].slice.call(arguments, 0) : arr;\r\n    return function () {\r\n        var self = this;\r\n        var args = [].slice.call(arguments, 0);\r\n        each(arr, function (i, v) {\r\n            v.apply(self, args);\r\n        });\r\n    };\r\n}\r\n\r\nfunction executeOnce(fn) {\r\n    var value;\r\n    return function () {\r\n        if (isFunction(fn)) {\r\n            value = fn.apply(this, arguments);\r\n        }\r\n        fn = undefined;\r\n        return value;\r\n    };\r\n}\r\n\r\nfunction createPrivateStore() {\r\n    var map = new WeakMap();\r\n    return function (obj, value) {\r\n        if (value) {\r\n            map.set(obj, value);\r\n        }\r\n        return value || map.get(obj);\r\n    };\r\n}\r\n\r\nfunction setImmediate(fn) {\r\n    var args = [].slice.call(arguments, 1);\r\n    queueMicrotask(function () {\r\n        fn.apply(undefined, args);\r\n    });\r\n}\r\n\r\nfunction setImmediateOnceCallback(fn) {\r\n    (mapRemove(setImmediateStore, fn) || noop)();\r\n}\r\n\r\nfunction setImmediateOnce(fn) {\r\n    mapGet(setImmediateStore, fn, function () {\r\n        return setImmediate(setImmediateOnceCallback.bind(0, fn)), fn;\r\n    });\r\n}\r\n\r\nfunction setTimeoutOnce(fn, ms) {\r\n    mapGet(setImmediateStore, fn, function () {\r\n        return setTimeout(setImmediateOnceCallback.bind(0, fn), ms || 0), fn;\r\n    });\r\n}\r\n\r\nfunction clearImmediateOnce(fn) {\r\n    mapRemove(setImmediateStore, fn);\r\n}\r\n\r\nfunction setTimeout() {\r\n    var t = window.setTimeout.apply(window, arguments);\r\n    return function () {\r\n        clearTimeout(t);\r\n    };\r\n}\r\n\r\nfunction setInterval() {\r\n    var t = window.setInterval.apply(window, arguments);\r\n    return function () {\r\n        clearInterval(t);\r\n    };\r\n}\r\n\r\nfunction setIntervalSafe(callback, ms) {\r\n    var args = makeArray(arguments).slice(2);\r\n    var cancelled = false;\r\n    var last = 0;\r\n    var t;\r\n    (function next() {\r\n        var now = Date.now();\r\n        if (!cancelled) {\r\n            t = window.setTimeout(function () {\r\n                always(callback.apply(this, args), next);\r\n            }, Math.max(0, Math.min(ms || 0, now - last)));\r\n            last = now;\r\n        }\r\n    })();\r\n    return function () {\r\n        clearTimeout(t);\r\n        cancelled = true;\r\n    };\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Throw helper\r\n * -------------------------------------- */\r\n\r\nfunction throws(error) {\r\n    throw (isError(error) || new Error(error));\r\n}\r\n\r\nfunction throwNotFunction(obj, name) {\r\n    if (!isFunction(obj)) {\r\n        throws((name || 'callback') + ' must be a function');\r\n    }\r\n    return obj;\r\n}\r\n\r\nfunction errorWithCode(code, message, props) {\r\n    return extend(new Error(message || code), props, {\r\n        code: code\r\n    });\r\n}\r\n\r\nfunction isErrorWithCode(error, code) {\r\n    return isError(error) && error.code === code;\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Strings\r\n * -------------------------------------- */\r\n\r\nfunction iequal(a, b) {\r\n    return a.toLowerCase() === b.toLowerCase();\r\n}\r\n\r\nfunction randomId() {\r\n    return Math.random().toString(36).substr(2, 8);\r\n}\r\n\r\nfunction repeat(str, count) {\r\n    return new Array(count + 1).join(str);\r\n}\r\n\r\nfunction camel(str) {\r\n    return String(str).replace(/-([a-z])/g, function (v, a) {\r\n        return a.toUpperCase();\r\n    });\r\n}\r\n\r\nfunction hyphenate(str) {\r\n    return String(str).replace(/[A-Z](?![A-Z])|[A-Z]{2,}(?=[A-Z])/g, function (v, a) {\r\n        return (a ? '-' : '') + v.toLowerCase();\r\n    });\r\n}\r\n\r\nfunction ucfirst(v) {\r\n    v = String(v || '');\r\n    return v.charAt(0).toUpperCase() + v.slice(1);\r\n}\r\n\r\nfunction lcfirst(v) {\r\n    v = String(v || '');\r\n    return v.charAt(0).toLowerCase() + v.slice(1);\r\n}\r\n\r\nfunction trim(v) {\r\n    return String(v || '').replace(/^(?:\\u200b|[^\\S\\u00a0])+|(?:\\u200b|[^\\S\\u00a0])+$/g, '');\r\n}\r\n\r\nfunction getMatchWordRegex(needle) {\r\n    return matchWordCache[needle] || (matchWordCache[needle] = new RegExp('(?:^|\\\\s)(' + needle.replace(/\\s+/g, '|') + ')(?=$|\\\\s)'));\r\n}\r\n\r\nfunction execFirstParen(re, haystack) {\r\n    return re.test(haystack) && RegExp.$1;\r\n}\r\n\r\nfunction matchWord(haystack, needle) {\r\n    return haystack ? execFirstParen(getMatchWordRegex(needle), String(haystack)) : false;\r\n}\r\n\r\nfunction matchWordMulti(haystack, needle) {\r\n    if (!haystack) {\r\n        return pipe.bind(0, false);\r\n    }\r\n    var re = new RegExp(getMatchWordRegex(needle).source, 'g');\r\n    return execFirstParen.bind(0, re, String(haystack));\r\n}\r\n\r\nfunction htmlDecode(input) {\r\n    return input && new DOMParser().parseFromString(input, 'text/html').documentElement.textContent;\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Promise related\r\n * -------------------------------------- */\r\n\r\nfunction resolve(value) {\r\n    return Promise.resolve(value);\r\n}\r\n\r\nfunction reject(reason) {\r\n    return Promise.reject(reason);\r\n}\r\n\r\nfunction always(promise, callback) {\r\n    promise = isThenable(promise) || resolve(promise);\r\n    return promise.then(function (v) {\r\n        return callback(true, v);\r\n    }, function (v) {\r\n        return callback(false, v);\r\n    });\r\n}\r\n\r\nfunction resolveAll(obj, callback) {\r\n    if (!obj || typeof obj !== 'object' || isThenable(obj)) {\r\n        return resolve(obj).then(callback);\r\n    }\r\n    if (isArray(obj)) {\r\n        return Promise.all(obj).then(callback);\r\n    }\r\n    var result = {};\r\n    var arr = map(obj, function (v, i) {\r\n        return resolve(v).then(function (d) {\r\n            result[i] = d;\r\n        });\r\n    });\r\n    return resolveAll(arr, function () {\r\n        return isFunction(callback) ? callback(result) : result;\r\n    });\r\n}\r\n\r\nfunction retryable(fn, done) {\r\n    var promise;\r\n    return function () {\r\n        return promise || (promise = makeAsync(fn).apply(this, arguments).then(done, function (e) {\r\n            promise = null;\r\n            throw e;\r\n        }));\r\n    };\r\n}\r\n\r\nfunction deferrable(arr) {\r\n    arr = makeArray(arr);\r\n    var resolved;\r\n    var promise = resolve().then(function next() {\r\n        resolved = !arr.length;\r\n        return resolved ? undefined : resolveAll(arr.splice(0).map(catchAsync), next);\r\n    });\r\n    return extend(promise, {\r\n        waitFor: function () {\r\n            return !resolved && !!arr.push.apply(arr, arguments);\r\n        }\r\n    });\r\n}\r\n\r\nfunction catchAsync(promise) {\r\n    promise = isThenable(promise) || resolve(promise);\r\n    return promise.catch(noop);\r\n}\r\n\r\nfunction setPromiseTimeout(promise, ms, resolveWhenTimeout) {\r\n    return new Promise(function (resolve, reject) {\r\n        promise.then(resolve, reject);\r\n        setTimeout(function () {\r\n            (resolveWhenTimeout ? resolve : reject)('timeout');\r\n        }, ms);\r\n    });\r\n}\r\n\r\nfunction delay(ms, callback) {\r\n    return new Promise(function (resolve) {\r\n        setTimeout(callback ? function () {\r\n            resolve(makeAsync(callback)());\r\n        } : resolve, ms);\r\n    });\r\n}\r\n\r\nfunction makeAsync(callback) {\r\n    return function () {\r\n        try {\r\n            return resolve(callback.apply(this, arguments));\r\n        } catch (e) {\r\n            return reject(e);\r\n        }\r\n    };\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Property and prototype\r\n * -------------------------------------- */\r\n\r\nfunction hasOwnProperty(obj, prop) {\r\n    return hasOwnPropertyImpl.call(obj, prop);\r\n}\r\n\r\nfunction getOwnPropertyDescriptors(obj) {\r\n    var props = {};\r\n    each(getOwnPropertyNames(obj || {}), function (i, v) {\r\n        props[v] = getOwnPropertyDescriptor(obj, v);\r\n    });\r\n    return props;\r\n}\r\n\r\nfunction define(o, p) {\r\n    each(getOwnPropertyDescriptors(p), function (i, v) {\r\n        if (isFunction(v.value)) {\r\n            v.enumerable = false;\r\n        }\r\n        defineProperty(o, i, v);\r\n    });\r\n}\r\n\r\nfunction defineOwnProperty(obj, name, value, readonly) {\r\n    defineProperty(obj, name, {\r\n        configurable: true,\r\n        enumerable: true,\r\n        writable: !readonly,\r\n        value: value\r\n    });\r\n}\r\n\r\nfunction defineGetterProperty(obj, name, get, set) {\r\n    defineProperty(obj, name, {\r\n        configurable: true,\r\n        enumerable: true,\r\n        get: get,\r\n        set: set\r\n    });\r\n}\r\n\r\nfunction defineHiddenProperty(obj, name, value, readonly) {\r\n    defineProperty(obj, name, {\r\n        configurable: true,\r\n        enumerable: false,\r\n        writable: !readonly,\r\n        value: value\r\n    });\r\n}\r\n\r\nfunction definePrototype(fn, prototype, props) {\r\n    if (isFunction(prototype)) {\r\n        fn.prototype = inherit(prototype, props);\r\n        defineHiddenProperty(fn.prototype, 'constructor', fn);\r\n        Object.setPrototypeOf(fn, prototype);\r\n    } else {\r\n        define(fn.prototype, prototype);\r\n    }\r\n}\r\n\r\nfunction inherit(proto, props) {\r\n    var obj = Object.create(isFunction(proto) ? proto.prototype : proto || objectProto);\r\n    define(obj, props || {});\r\n    return obj;\r\n}\r\n\r\nfunction deepFreeze(obj) {\r\n    freeze(obj);\r\n    getOwnPropertyNames(obj).forEach(function (v) {\r\n        var value = obj[v];\r\n        if (value && typeof value === 'object') {\r\n            deepFreeze(value);\r\n        }\r\n    });\r\n    return obj;\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Observable\r\n * -------------------------------------- */\r\n\r\nfunction getObservableState(obj, sync) {\r\n    return watchStore(obj) || watchStore(obj, {\r\n        sync: !!sync,\r\n        values: {},\r\n        oldValues: {},\r\n        newValues: {},\r\n        alias: Object.create(null),\r\n        handlers: [],\r\n        handleChanges: function (callback) {\r\n            var self = watchStore(obj);\r\n            var result;\r\n            try {\r\n                self.lock = true;\r\n                do {\r\n                    var oldValues = self.oldValues;\r\n                    var newValues = self.newValues;\r\n                    if (isFunction(callback)) {\r\n                        result = callback();\r\n                        callback = null;\r\n                    }\r\n                    for (var i in oldValues) {\r\n                        if (sameValueZero(oldValues[i], newValues[i])) {\r\n                            delete oldValues[i];\r\n                            delete newValues[i];\r\n                        }\r\n                    }\r\n                    if (getOwnPropertyNames(oldValues)[0]) {\r\n                        self.oldValues = {};\r\n                        self.newValues = {};\r\n                        self.handlers.slice(0).forEach(function (v) {\r\n                            v.call(obj, {\r\n                                oldValues: oldValues,\r\n                                newValues: newValues\r\n                            });\r\n                        });\r\n                    }\r\n                } while (self.sync && getOwnPropertyNames(self.oldValues)[0]);\r\n            } finally {\r\n                self.lock = false;\r\n            }\r\n            return result;\r\n        }\r\n    });\r\n}\r\n\r\nfunction ensurePropertyObserved(obj, prop) {\r\n    for (var proto = obj; proto && proto !== objectProto; proto = getPrototypeOf(proto)) {\r\n        if (hasOwnProperty(proto, prop)) {\r\n            var state = getObservableState(proto);\r\n            var alias = state.alias[prop];\r\n            if (alias) {\r\n                return ensurePropertyObserved(alias[0], alias[1]);\r\n            }\r\n            if (hasOwnProperty(state.values, prop)) {\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    defineObservableProperty(obj, prop);\r\n}\r\n\r\nfunction throwNotOwnDataProperty(obj, prop) {\r\n    var desc = getOwnPropertyDescriptor(obj, prop);\r\n    if (!desc ? prop in obj : desc.get || desc.set) {\r\n        throws('Must be own data property');\r\n    }\r\n}\r\n\r\nfunction defineAliasProperty(obj, prop, target, targetProp) {\r\n    targetProp = targetProp || prop;\r\n    throwNotOwnDataProperty(obj, prop);\r\n    defineGetterProperty(obj, prop, function () {\r\n        return target[targetProp];\r\n    }, function (value) {\r\n        target[targetProp] = value;\r\n    });\r\n    var state = getObservableState(obj);\r\n    state.alias[prop] = getObservableState(target).alias[targetProp] || [target, targetProp];\r\n}\r\n\r\nfunction defineObservableProperty(obj, prop, initialValue, callback) {\r\n    var state = getObservableState(obj);\r\n    var alias = state.alias[prop];\r\n    if (alias) {\r\n        return defineObservableProperty(alias[0], alias[1], initialValue, callback);\r\n    }\r\n    if (!hasOwnProperty(state.values, prop)) {\r\n        throwNotOwnDataProperty(obj, prop);\r\n        var setter = function (value) {\r\n            var state = getObservableState(this);\r\n            var oldValue = state.values[prop];\r\n            if (isFunction(callback)) {\r\n                value = callback.call(this, value, oldValue);\r\n            }\r\n            if (!sameValueZero(value, oldValue)) {\r\n                state.values[prop] = value;\r\n                if (state.handlers[0]) {\r\n                    if (!hasOwnProperty(state.oldValues, prop)) {\r\n                        state.oldValues[prop] = oldValue;\r\n                    }\r\n                    state.newValues[prop] = value;\r\n                    if (!state.sync) {\r\n                        setImmediateOnce(state.handleChanges);\r\n                    } else if (!state.lock) {\r\n                        state.handleChanges();\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        state.values[prop] = prop in obj ? obj[prop] : initialValue;\r\n        defineGetterProperty(obj, prop, function () {\r\n            var state = getObservableState(this);\r\n            return state.values[prop];\r\n        }, callback === true ? undefined : setter);\r\n        return setter.bind(obj);\r\n    }\r\n}\r\n\r\nfunction watch(obj, prop, handler, fireInit) {\r\n    if (typeof prop === 'boolean') {\r\n        if (watchStore(obj)) {\r\n            throws('Observable initialized');\r\n        }\r\n        var state = getObservableState(obj, prop);\r\n        return state.handleChanges;\r\n    }\r\n    var wrapper, handlers;\r\n    if (isFunction(prop)) {\r\n        wrapper = prop;\r\n        handlers = getObservableState(obj).handlers;\r\n        handlers.push(prop);\r\n    } else {\r\n        ensurePropertyObserved(obj, prop);\r\n        if (isFunction(handler)) {\r\n            var alias = getObservableState(obj).alias[prop] || [obj, prop];\r\n            handlers = getObservableState(alias[0]).handlers;\r\n            wrapper = function (e) {\r\n                if (hasOwnProperty(e.newValues, alias[1])) {\r\n                    handler.call(obj, e.newValues[alias[1]], e.oldValues[alias[1]], prop, obj);\r\n                }\r\n            };\r\n            handlers.push(wrapper);\r\n            if (fireInit) {\r\n                handler.call(obj, obj[prop], null, prop, obj);\r\n            }\r\n        }\r\n    }\r\n    if (wrapper) {\r\n        return executeOnce(function () {\r\n            arrRemove(handlers, wrapper);\r\n        });\r\n    }\r\n    return noop;\r\n}\r\n\r\nfunction watchOnce(obj, prop, handler) {\r\n    ensurePropertyObserved(obj, prop);\r\n    return new Promise(function (resolve) {\r\n        var alias = getObservableState(obj).alias[prop] || [obj, prop];\r\n        var handlers = getObservableState(alias[0]).handlers;\r\n        handlers.push(function fn(e) {\r\n            if (hasOwnProperty(e.newValues, alias[1])) {\r\n                var value = e.newValues[alias[1]];\r\n                var returnValue;\r\n                arrRemove(handlers, fn);\r\n                if (isFunction(handler)) {\r\n                    returnValue = handler(value);\r\n                }\r\n                resolve(returnValue === undefined ? value : returnValue);\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nfunction watchable(obj) {\r\n    obj = obj || {};\r\n    define(obj, {\r\n        watch: function (prop, handler, fireInit) {\r\n            return watch(this, prop, handler, fireInit);\r\n        },\r\n        watchOnce: function (prop, handler) {\r\n            return watchOnce(this, prop, handler);\r\n        }\r\n    });\r\n    return obj;\r\n}\r\n\r\nexport {\r\n    // miscellanous\r\n    noop,\r\n    pipe,\r\n    either,\r\n    sameValue,\r\n    sameValueZero,\r\n    is,\r\n    isUndefinedOrNull,\r\n    isArray,\r\n    isFunction,\r\n    isError,\r\n    isThenable,\r\n    isPlainObject,\r\n    isArrayLike,\r\n    makeArray,\r\n    extend,\r\n    each,\r\n    map,\r\n    grep,\r\n    splice,\r\n    any,\r\n    single,\r\n    kv,\r\n    fill,\r\n    pick,\r\n    exclude,\r\n    mapObject,\r\n    mapGet,\r\n    mapRemove,\r\n    arrRemove,\r\n    setAdd,\r\n    equal,\r\n    combineFn,\r\n    executeOnce,\r\n    createPrivateStore,\r\n    setTimeout,\r\n    setTimeoutOnce,\r\n    setInterval,\r\n    setIntervalSafe,\r\n    setImmediate,\r\n    setImmediateOnce,\r\n    clearImmediateOnce,\r\n\r\n    // throw\r\n    throws,\r\n    throwNotFunction,\r\n    errorWithCode,\r\n    isErrorWithCode,\r\n\r\n    // property and prototype related\r\n    keys,\r\n    values,\r\n    hasOwnProperty,\r\n    getOwnPropertyDescriptors,\r\n    define,\r\n    definePrototype,\r\n    defineOwnProperty,\r\n    defineGetterProperty,\r\n    defineHiddenProperty,\r\n    defineAliasProperty,\r\n    defineObservableProperty,\r\n    watch,\r\n    watchOnce,\r\n    watchable,\r\n    inherit,\r\n    freeze,\r\n    deepFreeze,\r\n\r\n    // string related\r\n    iequal,\r\n    randomId,\r\n    repeat,\r\n    camel,\r\n    hyphenate,\r\n    ucfirst,\r\n    lcfirst,\r\n    trim,\r\n    matchWord,\r\n    matchWordMulti,\r\n    htmlDecode,\r\n\r\n    // promise\r\n    resolve,\r\n    reject,\r\n    always,\r\n    resolveAll,\r\n    retryable,\r\n    deferrable,\r\n    catchAsync,\r\n    setPromiseTimeout,\r\n    delay,\r\n    makeAsync\r\n};\r\n","import Promise from \"./include/promise-polyfill.js\";\r\nimport { root } from \"./env.js\";\r\nimport { combineFn, each, extend, grep, is, isFunction, makeArray, map, mapGet, mapRemove, noop, throwNotFunction } from \"./util.js\";\r\nimport { containsOrEquals, selectIncludeSelf } from \"./domUtil.js\";\r\n\r\nconst detachHandlers = new WeakMap();\r\nconst optionsForChildList = {\r\n    subtree: true,\r\n    childList: true\r\n};\r\nconst globalCleanups = createAutoCleanupMap(function (element, arr) {\r\n    combineFn(arr)();\r\n});\r\n\r\nfunction DetachHandlerState() {\r\n    this.handlers = []\r\n    this.map = new Map();\r\n}\r\n\r\nfunction observe(element, options, callback) {\r\n    callback = throwNotFunction(callback || options);\r\n    if (isFunction(options)) {\r\n        options = optionsForChildList;\r\n    }\r\n    var filterRecords = options.attributes && (options.attributeFilter || ['id']).indexOf('id') >= 0;\r\n    var processRecords = function (records) {\r\n        if (filterRecords) {\r\n            records = records.filter(function (v) {\r\n                // filter out changes due to sizzle engine\r\n                // to prevent excessive invocation due to querying elements through jQuery\r\n                return v.attributeName !== 'id' || ((v.oldValue || '').slice(0, 6) !== 'sizzle' && (v.target.id !== (v.oldValue || '')));\r\n            });\r\n        }\r\n        if (records[0]) {\r\n            callback(records);\r\n        }\r\n    };\r\n    var observer = new MutationObserver(processRecords);\r\n    observer.observe(element, options);\r\n    var collect = function (discard) {\r\n        (discard ? noop : processRecords)(observer.takeRecords());\r\n    };\r\n    var dispose = function () {\r\n        observer.disconnect();\r\n    };\r\n    if (element !== root) {\r\n        registerCleanup(element, dispose);\r\n    }\r\n    return extend(collect, { dispose });\r\n}\r\n\r\nfunction registerCleanup(element, callback) {\r\n    if (isFunction(element)) {\r\n        var state = initDetachWatcher(root);\r\n        state.handlers.push(element);\r\n    } else {\r\n        mapGet(globalCleanups, element, Set).add(callback);\r\n    }\r\n}\r\n\r\nfunction createAutoCleanupMap(container, callback) {\r\n    if (!container || isFunction(container)) {\r\n        callback = container;\r\n        container = root;\r\n    }\r\n    var map = new Map();\r\n    callback = isFunction(callback) || noop;\r\n    observe(container, function () {\r\n        each(map, function (i) {\r\n            if (!container.contains(i)) {\r\n                callback(i, mapRemove(map, i));\r\n            }\r\n        });\r\n    });\r\n    return map;\r\n}\r\n\r\nfunction afterDetached(element, from, callback) {\r\n    if (!is(from, Node)) {\r\n        callback = from;\r\n        from = root;\r\n    }\r\n    var promise;\r\n    if (!isFunction(callback)) {\r\n        promise = new Promise(function (resolve) {\r\n            callback = resolve;\r\n        });\r\n    }\r\n    var state = initDetachWatcher(from);\r\n    mapGet(state.map, element, Array).push(callback);\r\n    return promise;\r\n}\r\n\r\nfunction trackElements(element, selector) {\r\n    var collection = new Set();\r\n    var add = collection.add.bind(collection);\r\n    var remove = collection.delete.bind(collection);\r\n    return function (callback) {\r\n        var matched = selectIncludeSelf(selector, element);\r\n        var removedNodes = grep(collection, function (v) {\r\n            return matched.indexOf(v) < 0;\r\n        });\r\n        var addedNodes = matched.filter(function (v) {\r\n            return !collection.has(v);\r\n        });\r\n        if (addedNodes[0] || removedNodes[0]) {\r\n            addedNodes.forEach(add);\r\n            removedNodes.forEach(remove);\r\n            (callback || noop)(addedNodes, removedNodes);\r\n        }\r\n        return [addedNodes, removedNodes];\r\n    };\r\n}\r\n\r\nfunction watchElements(element, selector, callback, fireInit) {\r\n    var collect = trackElements(element, selector);\r\n    var attributes;\r\n    var attributeFilter = [];\r\n    selector.replace(/\\.|\\[([^=~|^$*\\]]+)|:(?!empty|is|has|not|where|(?:first|last|only|nth|nth-last)-(?:child|of-type))/g, function (v, a) {\r\n        attributes = true;\r\n        if (v[0] === ':') {\r\n            attributeFilter = undefined;\r\n        } else if (attributeFilter) {\r\n            attributeFilter.push(v[0] === '.' ? 'class' : a);\r\n        }\r\n    });\r\n    var options = extend({}, optionsForChildList, {\r\n        attributes: attributes,\r\n        attributeFilter: attributes && attributeFilter\r\n    });\r\n    var fn = observe(element, options, function () {\r\n        collect(callback);\r\n    });\r\n    collect(fireInit && callback);\r\n    return fn;\r\n}\r\n\r\nfunction watchAttributes(element, attributes, callback, fireInit) {\r\n    var collect = trackElements(element, '[' + makeArray(attributes).join('],[') + ']');\r\n    var options = extend({}, optionsForChildList, {\r\n        attributes: true,\r\n        attributeFilter: makeArray(attributes)\r\n    });\r\n    var fn = observe(element, options, function (records) {\r\n        var set = new Set();\r\n        var arr = [[]].concat(collect());\r\n        var all = arr[1].concat(arr[2]);\r\n        each(records, function (i, v) {\r\n            var target = v.target;\r\n            if (v.attributeName && all.indexOf(target) < 0 && set.add(target)) {\r\n                all.push(target);\r\n            }\r\n        });\r\n        arr[0] = all;\r\n        arr[3] = makeArray(set);\r\n        if (arr[0][0]) {\r\n            callback.apply(this, arr);\r\n        }\r\n    });\r\n    collect(fireInit && function (added) {\r\n        callback(added, added, [], []);\r\n    });\r\n    return fn;\r\n}\r\n\r\nfunction watchOwnAttributes(element, attributes, callback) {\r\n    return observe(element, {\r\n        attributes: true,\r\n        attributeFilter: makeArray(attributes)\r\n    }, callback);\r\n}\r\n\r\nfunction initDetachWatcher(element) {\r\n    return mapGet(detachHandlers, element, function () {\r\n        var state = new DetachHandlerState();\r\n        observe(element, function (records) {\r\n            var removedNodes = map(records, function (v) {\r\n                return grep(v.removedNodes, function (v) {\r\n                    return v.nodeType === 1 && !containsOrEquals(element, v);\r\n                });\r\n            });\r\n            if (removedNodes[0]) {\r\n                state.handlers.forEach(function (callback) {\r\n                    callback(removedNodes.slice(0));\r\n                });\r\n                each(state.map, function (child, handlers) {\r\n                    if (!containsOrEquals(element, child) && mapRemove(state.map, child)) {\r\n                        handlers.forEach(function (callback) {\r\n                            callback(child);\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        return state;\r\n    });\r\n}\r\n\r\nexport {\r\n    observe,\r\n    registerCleanup,\r\n    createAutoCleanupMap,\r\n    afterDetached,\r\n    watchElements,\r\n    watchAttributes,\r\n    watchOwnAttributes\r\n};\r\n","import { defineHiddenProperty, throws } from \"./util.js\";\r\n\r\nconst ZETA_KEY = '__ZETA__';\r\nif (window[ZETA_KEY]) {\r\n    throws('Another copy of zeta-dom is instantiated. Please check your dependencies.');\r\n}\r\ndefineHiddenProperty(window, ZETA_KEY, true, true);\r\n\r\nexport default null;\r\n","/**\r\n *  Key code mapping for keyboard events.\r\n */\r\nexport const KEYNAMES = {\r\n    8: 'backspace',\r\n    9: 'tab',\r\n    13: 'enter',\r\n    16: 'shift',\r\n    17: 'ctrl',\r\n    18: 'alt',\r\n    19: 'pause',\r\n    20: 'capsLock',\r\n    27: 'escape',\r\n    32: 'space',\r\n    33: 'pageUp',\r\n    34: 'pageDown',\r\n    35: 'end',\r\n    36: 'home',\r\n    37: 'leftArrow',\r\n    38: 'upArrow',\r\n    39: 'rightArrow',\r\n    40: 'downArrow',\r\n    45: 'insert',\r\n    46: 'delete',\r\n    48: '0',\r\n    49: '1',\r\n    50: '2',\r\n    51: '3',\r\n    52: '4',\r\n    53: '5',\r\n    54: '6',\r\n    55: '7',\r\n    56: '8',\r\n    57: '9',\r\n    65: 'a',\r\n    66: 'b',\r\n    67: 'c',\r\n    68: 'd',\r\n    69: 'e',\r\n    70: 'f',\r\n    71: 'g',\r\n    72: 'h',\r\n    73: 'i',\r\n    74: 'j',\r\n    75: 'k',\r\n    76: 'l',\r\n    77: 'm',\r\n    78: 'n',\r\n    79: 'o',\r\n    80: 'p',\r\n    81: 'q',\r\n    82: 'r',\r\n    83: 's',\r\n    84: 't',\r\n    85: 'u',\r\n    86: 'v',\r\n    87: 'w',\r\n    88: 'x',\r\n    89: 'y',\r\n    90: 'z',\r\n    91: 'meta',\r\n    92: 'meta',\r\n    93: 'select',\r\n    96: 'numpad0',\r\n    97: 'numpad1',\r\n    98: 'numpad2',\r\n    99: 'numpad3',\r\n    100: 'numpad4',\r\n    101: 'numpad5',\r\n    102: 'numpad6',\r\n    103: 'numpad7',\r\n    104: 'numpad8',\r\n    105: 'numpad9',\r\n    106: 'multiply',\r\n    107: 'add',\r\n    109: 'subtract',\r\n    110: 'decimalPoint',\r\n    111: 'divide',\r\n    112: 'f1',\r\n    113: 'f2',\r\n    114: 'f3',\r\n    115: 'f4',\r\n    116: 'f5',\r\n    117: 'f6',\r\n    118: 'f7',\r\n    119: 'f8',\r\n    120: 'f9',\r\n    121: 'f10',\r\n    122: 'f11',\r\n    123: 'f12',\r\n    144: 'numLock',\r\n    145: 'scrollLock',\r\n    186: 'semiColon',\r\n    187: 'equalSign',\r\n    188: 'comma',\r\n    189: 'dash',\r\n    190: 'period',\r\n    191: 'forwardSlash',\r\n    192: 'backtick',\r\n    219: 'openBracket',\r\n    220: 'backSlash',\r\n    221: 'closeBracket',\r\n    222: 'singleQuote',\r\n    MetaLeft: 'meta',\r\n    MetaRight: 'meta'\r\n};\r\n\r\n'1234567890'.split('').forEach(function (v) {\r\n    KEYNAMES['Digit' + v] = v;\r\n    KEYNAMES['Numpad' + v] = 'numpad' + v;\r\n});\r\n'abcdefghijklmnopqrstuvwxyz'.split('').forEach(function (v) {\r\n    KEYNAMES['Key' + v.toUpperCase()] = v;\r\n});\r\n\r\nconst map = {\r\n    ShiftLeft: 16,       // shift\r\n    ShiftRight: 16,      // shift\r\n    ControlLeft: 17,     // ctrl\r\n    ControlRight: 17,    // ctrl\r\n    AltLeft: 18,         // alt\r\n    AltRight: 18,        // alt\r\n    ArrowLeft: 37,       // leftArrow\r\n    ArrowUp: 38,         // upArrow\r\n    ArrowRight: 39,      // rightArrow\r\n    ArrowDown: 40,       // downArrow\r\n    OSLeft: 91,          // leftWindow\r\n    OSRight: 92,         // rightWindowKey\r\n    ContextMenu: 93,     // select\r\n    NumpadMultiply: 106, // multiply\r\n    NumpadAdd: 107,      // add\r\n    NumpadSubtract: 109, // subtract\r\n    NumpadDecimal: 110,  // decimalPoint\r\n    NumpadDivide: 111,   // divide\r\n    Semicolon: 186,      // semiColon\r\n    Equal: 187,          // equalSign\r\n    Minus: 189,          // dash\r\n    Slash: 191,          // forwardSlash\r\n    Backquote: 192,      // backtick\r\n    BracketLeft: 219,    // openBracket\r\n    BracketRight: 221,   // closeBracket\r\n    Quote: 222           // singleQuote\r\n};\r\nfor (var i in map) {\r\n    KEYNAMES[i] = KEYNAMES[map[i]];\r\n}\r\n\r\n[\r\n    8,   // backspace\r\n    9,   // tab\r\n    13,  // enter\r\n    19,  // pause\r\n    20,  // capsLock\r\n    27,  // escape\r\n    32,  // space\r\n    33,  // pageUp\r\n    34,  // pageDown\r\n    35,  // end\r\n    36,  // home\r\n    45,  // insert\r\n    46,  // delete\r\n    144, // numLock\r\n    145, // scrollLock\r\n    188, // comma\r\n    190, // period\r\n    220, // backSlash\r\n    112, // f1\r\n    113, // f2\r\n    114, // f3\r\n    115, // f4\r\n    116, // f5\r\n    117, // f6\r\n    118, // f7\r\n    119, // f8\r\n    120, // f9\r\n    121, // f10\r\n    122, // f11\r\n    123  // f12\r\n].forEach(function (v) {\r\n    v = KEYNAMES[v];\r\n    KEYNAMES[v[0].toUpperCase() + v.slice(1)] = v;\r\n});\r\n","import Promise from \"./include/promise-polyfill.js\";\r\nimport * as ErrorCode from \"./errorCode.js\";\r\nimport { window, root } from \"./env.js\";\r\nimport { always, any, combineFn, each, errorWithCode, executeOnce, extend, grep, is, isFunction, makeArray, makeAsync, mapGet, mapRemove, noop, reject, resolve, retryable, setAdd } from \"./util.js\";\r\nimport { bind, containsOrEquals, parentsAndSelf } from \"./domUtil.js\";\r\nimport { emitDOMEvent, listenDOMEvent, ZetaEventSource } from \"./events.js\";\r\nimport { createAutoCleanupMap } from \"./observe.js\";\r\nimport { iterateFocusPath, reportError } from \"./dom.js\";\r\n\r\nconst handledErrors = new WeakSet();\r\nconst subscribers = new WeakMap();\r\nconst locks = createAutoCleanupMap(clearLock);\r\n\r\nvar leaveCounter = 0;\r\n\r\nfunction CancellationRequest(reason, eventSource) {\r\n    var self = this;\r\n    eventSource = eventSource || new ZetaEventSource();\r\n    self.reason = String(reason || '');\r\n    self.source = eventSource.source;\r\n    self.sourceKeyName = eventSource.sourceKeyName;\r\n}\r\n\r\nfunction muteAndReturn(error) {\r\n    handledErrors.add(error);\r\n    return error;\r\n}\r\n\r\nfunction ensureLock(element) {\r\n    var promises = mapGet(locks, element, Map);\r\n    if (!promises.cancel) {\r\n        promises.element = element;\r\n        promises.cancel = retryable(function (reason) {\r\n            // request user cancellation for each async task in sequence\r\n            return makeArray(promises).reduce(function (a, v) {\r\n                return a.then(v.bind(0, false, reason));\r\n            }, resolve()).catch(function () {\r\n                throw muteAndReturn(errorWithCode(ErrorCode.cancellationRejected));\r\n            });\r\n        });\r\n    }\r\n    return promises;\r\n}\r\n\r\nfunction clearLock(element, map) {\r\n    var cancelCallbacks = makeArray(mapRemove(locks, element) || map).concat(makeArray(subscribers.get(element)));\r\n    if (cancelCallbacks[0]) {\r\n        combineFn(cancelCallbacks)(true);\r\n        emitDOMEvent('cancelled', element);\r\n    }\r\n}\r\n\r\nfunction handlePromise(source, element, oncancel, sendAsync) {\r\n    var cancel;\r\n    var promise = new Promise(function (resolve, reject) {\r\n        cancel = executeOnce(function () {\r\n            var error = muteAndReturn(errorWithCode(ErrorCode.cancelled));\r\n            reject(error);\r\n            (oncancel || noop)(error);\r\n        });\r\n        source.then(resolve, reject);\r\n    });\r\n    if (sendAsync) {\r\n        var eventSource = window.event ? new ZetaEventSource() : null;\r\n        source.catch(function (error) {\r\n            // avoid firing error event for the same error for multiple target\r\n            // while propagating through the promise chain\r\n            if (error && (typeof error !== 'object' || setAdd(handledErrors, error))) {\r\n                reportError(error, element, eventSource);\r\n            }\r\n        });\r\n        var targets = new Map();\r\n        // ensure oncancel is called when cancelLock is called\r\n        ensureLock(element);\r\n        subscribeAsync(element);\r\n        each(iterateFocusPath(element), function (i, v) {\r\n            var promises = subscribers.get(v);\r\n            if (promises) {\r\n                targets.set(v, promises);\r\n                promises.set(promise, cancel);\r\n                return !promises.handled;\r\n            }\r\n        });\r\n        always(promise, function () {\r\n            each(targets, function (i, v) {\r\n                if (v.delete(promise) && v.started && !v.size) {\r\n                    v.started = false;\r\n                    emitDOMEvent('asyncEnd', i);\r\n                }\r\n            });\r\n        });\r\n        setTimeout(function () {\r\n            each(targets, function (i, v) {\r\n                if (v.size && !v.started) {\r\n                    v.started = true;\r\n                    emitDOMEvent('asyncStart', i);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    return extend(promise, { cancel });\r\n}\r\n\r\nfunction lock(element, promise, oncancel) {\r\n    if (!promise) {\r\n        return subscribeAsync(element);\r\n    }\r\n    if (isFunction(promise)) {\r\n        promise = lock(element, new Promise(noop), promise);\r\n        return promise.cancel;\r\n    }\r\n    var promises = ensureLock(element);\r\n    promise = handlePromise(promise, element);\r\n    oncancel = isFunction(oncancel) ? retryable(oncancel) : oncancel ? noop : reject;\r\n    promises.set(promise, function (force, reason) {\r\n        return resolve(force || oncancel(reason)).then(promise.cancel);\r\n    });\r\n    always(promise, function () {\r\n        promises.delete(promise);\r\n    });\r\n    return promise;\r\n}\r\n\r\nfunction subscribeAsync(element, callback) {\r\n    var promises = mapGet(subscribers, element, Map);\r\n    if (callback === true) {\r\n        promises.handled = true;\r\n    } else if (isFunction(callback)) {\r\n        return listenDOMEvent(element, {\r\n            asyncStart: function () {\r\n                callback.call(element, true);\r\n            },\r\n            asyncEnd: function () {\r\n                callback.call(element, false);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction notifyAsync(element, promise, oncancel) {\r\n    handlePromise(promise, element, oncancel, true);\r\n}\r\n\r\nfunction runAsync(element, callback) {\r\n    var delegated, resolve = noop;\r\n    var controller = { abort: noop };\r\n    var promise = makeAsync(callback)({\r\n        get signal() {\r\n            return controller.signal || (controller = new AbortController()).signal;\r\n        },\r\n        get promise() {\r\n            return delegated || promise || (delegated = new Promise(function (res) {\r\n                resolve = res;\r\n            }));\r\n        }\r\n    });\r\n    resolve(promise);\r\n    return handlePromise(promise, element, function (error) {\r\n        controller.abort(error);\r\n    }, true);\r\n}\r\n\r\nfunction preventLeave(element, promise, oncancel) {\r\n    if (!element) {\r\n        leaveCounter++;\r\n        return executeOnce(function () {\r\n            leaveCounter--;\r\n        });\r\n    }\r\n    always(promise ? lock(element, promise, oncancel) : element, preventLeave());\r\n}\r\n\r\nfunction locked(element, parents) {\r\n    if (!element || element === root) {\r\n        return !!any(locks, function (v, i) {\r\n            return containsOrEquals(root, i) && v.size;\r\n        });\r\n    }\r\n    return !!any(parents ? parentsAndSelf(element) : [element], function (v) {\r\n        return (locks.get(v) || '').size;\r\n    });\r\n}\r\n\r\nfunction cancelLock(element, reason) {\r\n    var targets = element ? grep(locks, function (v, i) {\r\n        return containsOrEquals(element, i);\r\n    }) : makeArray(locks);\r\n    var finalize = function () {\r\n        each(targets, function (i, v) {\r\n            clearLock(v.element);\r\n        });\r\n    };\r\n    if (reason === true) {\r\n        return resolve(finalize());\r\n    }\r\n    reason = is(reason, CancellationRequest) || new CancellationRequest(reason);\r\n    return targets.reduce(function (a, v) {\r\n        return a.then(v.cancel.bind(v, reason));\r\n    }, resolve()).then(finalize);\r\n}\r\n\r\nbind(window, 'beforeunload', function (e) {\r\n    if (leaveCounter) {\r\n        e.returnValue = '';\r\n        e.preventDefault();\r\n    }\r\n});\r\nsubscribeAsync(root);\r\n\r\nexport {\r\n    CancellationRequest,\r\n    lock,\r\n    locked,\r\n    cancelLock,\r\n    subscribeAsync,\r\n    notifyAsync,\r\n    runAsync,\r\n    preventLeave\r\n};\r\n","import { } from \"./libCheck.js\";\r\nimport { IS_MAC, IS_TOUCH, window, document, root, getSelection, getComputedStyle, domReady, reportError as reportErrorImpl } from \"./env.js\";\r\nimport { KEYNAMES } from \"./constants.js\";\r\nimport * as ErrorCode from \"./errorCode.js\";\r\nimport $ from \"./include/jquery.js\";\r\nimport { always, any, combineFn, each, errorWithCode, extend, fill, grep, isFunction, isPlainObject, isUndefinedOrNull, keys, lcfirst, makeArray, map, mapRemove, matchWord, noop, reject, setAdd, setImmediateOnce, setTimeoutOnce, ucfirst } from \"./util.js\";\r\nimport { bind, bindUntil, containsOrEquals, elementFromPoint, getContentRect, getScrollParent, isVisible, makeSelection, matchSelector, parentsAndSelf, scrollIntoView, tagName, toPlainRect } from \"./domUtil.js\";\r\nimport { getEventContext, getEventSource, emitDOMEvent, listenDOMEvent } from \"./events.js\";\r\nimport { lock, cancelLock, locked, notifyAsync, preventLeave, runAsync, subscribeAsync } from \"./domLock.js\";\r\nimport { afterDetached, createAutoCleanupMap, observe, registerCleanup, watchAttributes, watchElements, watchOwnAttributes } from \"./observe.js\";\r\n\r\nconst SELECTOR_FOCUSABLE = 'input,select,button,textarea,[contenteditable],a[href],area[href],iframe';\r\n\r\nconst focusPath = [root];\r\nconst focusFriends = new WeakMap();\r\nconst focusElements = new Set([root]);\r\nconst modalElements = createAutoCleanupMap(releaseModal);\r\nconst tabIndex = new WeakMap();\r\nconst tabRoots = new WeakSet();\r\nconst shortcuts = {};\r\nconst metaKeys = {\r\n    alt: true,\r\n    ctrl: true,\r\n    meta: true,\r\n    shift: true\r\n};\r\nconst beforeInputType = {\r\n    insertFromDrop: 'drop',\r\n    insertFromPaste: 'paste',\r\n    deleteByCut: 'cut'\r\n};\r\nconst sourceDict = {\r\n    cut: 'cut',\r\n    copy: 'copy',\r\n    drop: 'drop',\r\n    paste: 'paste',\r\n    wheel: 'wheel'\r\n};\r\n\r\nvar windowFocusedOut;\r\nvar currentEvent = null;\r\nvar currentKeyName = '';\r\nvar currentMetaKey = '';\r\nvar currentTabRoot = root;\r\nvar lastKey = {};\r\nvar lastClickTarget;\r\nvar eventSource;\r\nvar eventPath;\r\nvar trustedEvent;\r\nvar trackPromise;\r\nvar trackCallbacks;\r\nvar touchedClick;\r\n\r\nfill(sourceDict, 'touchstart touchend touchmove', 'touch');\r\nfill(sourceDict, 'compositionstart compositionupdate compositionend keydown keyup keypress', 'keyboard');\r\nfill(sourceDict, 'beforeinput input textInput', function (e) {\r\n    return beforeInputType[e.inputType] || eventSource || 'input';\r\n});\r\nfill(sourceDict, 'pointerdown', function (e) {\r\n    touchedClick = e.pointerType === 'touch' || (e.pointerType === 'pen' && (e.sourceCapabilities || { firesTouchEvents: IS_TOUCH }).firesTouchEvents);\r\n    return touchedClick ? 'touch' : 'mouse';\r\n});\r\nfill(sourceDict, 'mousedown mouseup mousemove click contextmenu dblclick', function (e) {\r\n    return touchedClick ? 'touch' : e.pointerId < 0 && e.target === lastKey.target ? 'keyboard' : e.type !== 'mousemove' || e.button || e.buttons ? 'mouse' : 'script';\r\n});\r\n\r\n/* --------------------------------------\r\n * Helper functions\r\n * -------------------------------------- */\r\n\r\nfunction approxMultipleOf(a, b) {\r\n    return Math.abs(Math.round(a / b) - a / b) < 0.2;\r\n}\r\n\r\nfunction measureLine(p1, p2) {\r\n    var dx = p1.clientX - p2.clientX;\r\n    var dy = p1.clientY - p2.clientY;\r\n    return {\r\n        dx: dx,\r\n        dy: dy,\r\n        deg: Math.atan2(dy, dx) / Math.PI * 180,\r\n        length: Math.sqrt(dx * dx + dy * dy)\r\n    };\r\n}\r\n\r\nfunction textInputAllowed(v) {\r\n    if (v.disabled || v.readOnly) {\r\n        return false;\r\n    }\r\n    if (v.isContentEditable) {\r\n        return true;\r\n    }\r\n    if (tagName(v) === 'input') {\r\n        return !matchWord(v.type, 'button checkbox color file image radio range reset submit');\r\n    }\r\n    return matchSelector(v, 'textarea,select');\r\n}\r\n\r\nfunction isMouseDown(e) {\r\n    return (isUndefinedOrNull(e.buttons) ? e.which : e.buttons) === 1;\r\n}\r\n\r\nfunction normalizeKey(e) {\r\n    var key = KEYNAMES[e.code || e.keyCode];\r\n    return {\r\n        key: key || lcfirst(e.code) || e.key,\r\n        char: e.char || ((e.key || '').length === 1 && e.key) || (e.charCode && String.fromCharCode(e.charCode)) || (key === 'enter' ? '\\r' : ''),\r\n        meta: !!metaKeys[key]\r\n    };\r\n}\r\n\r\nfunction inputValueImpl(element, method, value) {\r\n    // React defines its own getter and setter on input elements\r\n    var desc = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(element), 'value');\r\n    if (desc && desc[method]) {\r\n        return desc[method].call(element, value);\r\n    }\r\n    return method === 'get' ? element.value : (element.value = value);\r\n}\r\n\r\nfunction setTextData(node, text, offset) {\r\n    if (node.tagName) {\r\n        inputValueImpl(node, 'set', text);\r\n        node.setSelectionRange(offset, offset);\r\n    } else {\r\n        var range = document.createRange();\r\n        node.data = text;\r\n        range.setStart(node, offset);\r\n        makeSelection(range);\r\n    }\r\n}\r\n\r\nfunction dispatchInputEvent(element, text) {\r\n    element.dispatchEvent(new InputEvent('input', {\r\n        inputType: text ? 'insertText' : 'deleteContent',\r\n        data: text || null,\r\n        bubbles: true\r\n    }));\r\n}\r\n\r\n/* --------------------------------------\r\n * Focus management\r\n * -------------------------------------- */\r\n\r\nfunction cleanupFocusPath() {\r\n    for (var i = focusPath.length - 1; i >= 0; i--) {\r\n        if (!containsOrEquals(root, focusPath[i])) {\r\n            setFocus(focusPath[i + 1] || document.body);\r\n            break;\r\n        }\r\n    }\r\n}\r\n\r\nfunction getActiveElement() {\r\n    if (!containsOrEquals(root, focusPath[0])) {\r\n        cleanupFocusPath();\r\n    }\r\n    return focusPath[0];\r\n}\r\n\r\nfunction getModalElement() {\r\n    var element = focusPath.slice(-2)[0];\r\n    if (element === document.body) {\r\n        return null;\r\n    }\r\n    if (!containsOrEquals(root, element)) {\r\n        releaseModal(element);\r\n        return getModalElement();\r\n    }\r\n    return element;\r\n}\r\n\r\nfunction focused(element, strict) {\r\n    return element === window ? !windowFocusedOut : focusElements.has(element) && (!strict || containsOrEquals(element, document.activeElement));\r\n}\r\n\r\nfunction focusable(element) {\r\n    if (!containsOrEquals(root, element)) {\r\n        return false;\r\n    }\r\n    if (element === root || !focusPath[1] || !modalElements.size) {\r\n        return root;\r\n    }\r\n    return getFocusableWithin(parentsAndSelf(element));\r\n}\r\n\r\nfunction getFocusableWithin(parents) {\r\n    var friends = map(parents, function (v) {\r\n        return focusFriends.get(v);\r\n    });\r\n    var within = any(focusPath, function (v) {\r\n        return containsOrEquals(v, parents[0]) || friends.indexOf(v) >= 0;\r\n    });\r\n    if (within !== root || !focusPath[1]) {\r\n        return within;\r\n    }\r\n    // allow any fixed element to be focusable under modal unless it is already blocked\r\n    var index = parents.findIndex(function (v) {\r\n        return getComputedStyle(v).position === 'fixed';\r\n    });\r\n    return index >= 0 && !focusElements.has(parents[index]) && parents.splice(index + 1) && focusPath.slice(-2)[0];\r\n}\r\n\r\nfunction triggerFocusEvent(eventName, elements, relatedTarget) {\r\n    var data = {\r\n        relatedTarget: relatedTarget || null\r\n    };\r\n    each(elements, function (i, v) {\r\n        emitDOMEvent(eventName, v, data, {\r\n            handleable: false\r\n        });\r\n    });\r\n}\r\n\r\nfunction triggerModalChangeEvent() {\r\n    emitDOMEvent('modalchange', root, {\r\n        modalElement: getModalElement()\r\n    });\r\n}\r\n\r\nfunction updateTabRoot() {\r\n    var tabRoot = any(focusPath, function (v) {\r\n        return tabRoots.has(v);\r\n    }) || getModalElement() || root;\r\n    if (tabRoot !== currentTabRoot) {\r\n        currentTabRoot = tabRoot;\r\n        updateTabIndex();\r\n    }\r\n}\r\n\r\nfunction updateTabIndex(newNodes) {\r\n    $(newNodes || SELECTOR_FOCUSABLE).each(function (i, v) {\r\n        if (!containsOrEquals(currentTabRoot, v)) {\r\n            if (v.tabIndex !== -1) {\r\n                tabIndex.set(v, $(v).attr('tabindex') || null);\r\n                v.tabIndex = -1;\r\n            }\r\n        } else if (tabIndex.has(v)) {\r\n            $(v).attr('tabindex', mapRemove(tabIndex, v));\r\n        }\r\n    });\r\n}\r\n\r\nfunction setFocus(element, suppressFocusChange) {\r\n    if (element === root) {\r\n        element = document.body;\r\n    }\r\n    var len = focusPath.length;\r\n    var index = focusPath.indexOf(element);\r\n    if (index === 0 || !containsOrEquals(root, element)) {\r\n        setFocusUnsafe(focusPath, []);\r\n        return len;\r\n    }\r\n    var before = len;\r\n    var added = [];\r\n    if (index > 0) {\r\n        removeFocusUnsafe(focusPath, element, element);\r\n        len = len - index;\r\n    } else {\r\n        var friend;\r\n        any(parentsAndSelf(element), function (v) {\r\n            return focusPath.indexOf(v) >= 0 || (added.push(v) && (friend = focusFriends.get(v)));\r\n        });\r\n        if (friend && added.indexOf(friend) < 0 && focusPath.indexOf(friend) < 0) {\r\n            len = setFocus(friend, true);\r\n        }\r\n        var within = getFocusableWithin(added);\r\n        if (within) {\r\n            removeFocusUnsafe(focusPath, within, element, true);\r\n            len = Math.min(len, focusPath.length);\r\n            // check whether the element is still attached in ROM\r\n            // which can be detached while dispatching focusout event above\r\n            if (containsOrEquals(root, element)) {\r\n                each(added, function (i, element) {\r\n                    if (focusElements.has(element) && focusPath.indexOf(element) < 0) {\r\n                        any(modalElements, function (v) {\r\n                            return removeFocusUnsafe(v, element, element, true) && v.shift();\r\n                        });\r\n                    }\r\n                });\r\n            } else {\r\n                added = [];\r\n            }\r\n            setFocusUnsafe(focusPath, added);\r\n        }\r\n    }\r\n    if (!suppressFocusChange && (len !== before || (within && added[0]))) {\r\n        triggerFocusEvent('focusin', focusPath.slice(0, -len).reverse());\r\n        triggerFocusEvent('focuschange', focusPath.slice(-len));\r\n    }\r\n    return len;\r\n}\r\n\r\nfunction setFocusUnsafe(path, elements, suppressFocus) {\r\n    if (elements[0]) {\r\n        path.unshift.apply(path, elements);\r\n        elements = grep(elements, function (v) {\r\n            return setAdd(focusElements, v);\r\n        });\r\n    }\r\n    if (path === focusPath && !suppressFocus) {\r\n        var activeElement = any(focusPath, function (v) {\r\n            return matchSelector(v, SELECTOR_FOCUSABLE);\r\n        });\r\n        if (activeElement) {\r\n            activeElement.focus();\r\n        } else {\r\n            document.activeElement.blur();\r\n        }\r\n        setTimeoutOnce(updateTabRoot);\r\n    }\r\n}\r\n\r\nfunction removeFocusUnsafe(path, element, relatedTarget, suppressFocus) {\r\n    var index = path.indexOf(element);\r\n    if (index > 0) {\r\n        var removed = path.splice(0, index);\r\n        each(removed, function (i, v) {\r\n            focusElements.delete(v);\r\n        });\r\n        triggerFocusEvent('focusout', removed, relatedTarget);\r\n        setFocusUnsafe(path, [], suppressFocus);\r\n    }\r\n    return index >= 0;\r\n}\r\n\r\nfunction setModal(element) {\r\n    if (modalElements.has(element)) {\r\n        return true;\r\n    }\r\n    cleanupFocusPath();\r\n    if (element === root || element === document.body || (element.parentNode !== document.body && !focusable(element))) {\r\n        return false;\r\n    }\r\n    var from = focusPath.indexOf(element) + 1;\r\n    var modalPath = focusPath.splice(from, focusPath.length - from - 1);\r\n    modalElements.set(element, modalPath);\r\n    if (!focused(element)) {\r\n        setFocusUnsafe(focusPath, [element]);\r\n        triggerFocusEvent('focusin', [element]);\r\n        triggerFocusEvent('focuschange', [root]);\r\n    }\r\n    setImmediateOnce(triggerModalChangeEvent);\r\n    return true;\r\n}\r\n\r\nfunction releaseModal(element, modalPath) {\r\n    modalPath = mapRemove(modalElements, element) || modalPath;\r\n    if (!modalPath) {\r\n        return;\r\n    }\r\n    var index = focusPath.indexOf(element);\r\n    if (index >= 0) {\r\n        focusPath.splice.apply(focusPath, [index + 1, 0].concat(modalPath));\r\n        setFocus(focusPath[0]);\r\n        cleanupFocusPath();\r\n        setImmediateOnce(triggerModalChangeEvent);\r\n    } else {\r\n        each(modalElements, function (i, v) {\r\n            var index = v.indexOf(element);\r\n            if (index >= 0) {\r\n                v.splice.apply(v, [index + 1, 0].concat(modalPath));\r\n                removeFocusUnsafe(v, modalPath[0]);\r\n                return false;\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction setTabRoot(a) {\r\n    if (a !== root && a !== document.body && setAdd(tabRoots, a)) {\r\n        setTimeoutOnce(updateTabRoot);\r\n    }\r\n}\r\n\r\nfunction unsetTabRoot(a) {\r\n    if (tabRoots.delete(a)) {\r\n        setTimeoutOnce(updateTabRoot);\r\n    }\r\n}\r\n\r\nfunction retainFocus(a, b) {\r\n    if (a !== root && a !== document.body) {\r\n        focusFriends.set(b, a);\r\n    }\r\n}\r\n\r\nfunction releaseFocus(b) {\r\n    focusFriends.delete(b);\r\n}\r\n\r\nfunction iterateFocusPath(element) {\r\n    var index = focusPath.indexOf(element);\r\n    if (index >= 0) {\r\n        return focusPath.slice(index).values();\r\n    }\r\n    var path = focusPath.slice(0);\r\n    var visited = new Set();\r\n    var returnedOnce;\r\n    var next = function () {\r\n        if (!returnedOnce || !element) {\r\n            returnedOnce = true;\r\n        } else if (!focusElements.has(element)) {\r\n            var friend = focusFriends.get(element);\r\n            // make sure the next iterated element in connected in DOM and\r\n            // not being the descendants of current element\r\n            element = friend && !visited.has(friend) && containsOrEquals(root, friend) && !containsOrEquals(element, friend) ? friend : element.parentNode;\r\n        } else {\r\n            while (path[0] && element !== path[0]) {\r\n                path.splice(0, path.findIndex(function (v) {\r\n                    return v === element || modalElements.has(v);\r\n                }));\r\n                if (element !== path[0]) {\r\n                    path.unshift.apply(path, modalElements.get(path.shift()));\r\n                }\r\n            }\r\n            path.shift();\r\n            element = path[0];\r\n        }\r\n        visited.add(element);\r\n        return {\r\n            done: !element,\r\n            value: element\r\n        };\r\n    };\r\n    return { next };\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * DOM event handling\r\n * -------------------------------------- */\r\n\r\nfunction getShortcut(key) {\r\n    return keys(shortcuts[key] || {});\r\n}\r\n\r\nfunction setShortcut(command, keystroke) {\r\n    if (isPlainObject(command)) {\r\n        each(command, setShortcut);\r\n    } else {\r\n        var dict = shortcuts[command] || (shortcuts[command] = {});\r\n        var copy = extend({}, dict);\r\n        each(keystroke, function (i, v) {\r\n            if (copy[v]) {\r\n                delete copy[v];\r\n            } else {\r\n                dict[v] = true;\r\n                (shortcuts[v] || (shortcuts[v] = {}))[command] = true;\r\n            }\r\n        });\r\n        each(copy, function (v) {\r\n            delete shortcuts[command][v];\r\n            delete shortcuts[v][command];\r\n        });\r\n    }\r\n}\r\n\r\nfunction trackPointer(callback) {\r\n    if (trackCallbacks) {\r\n        if (callback) {\r\n            trackCallbacks.push(callback);\r\n        }\r\n        return trackPromise;\r\n    }\r\n    var target = currentEvent.target;\r\n    var lastPoint = currentEvent;\r\n    var scrollWithin = grep(focusPath, function (v) {\r\n        return containsOrEquals(v, target);\r\n    }).slice(-1)[0];\r\n    var scrollParent = getScrollParent(target);\r\n    var scrollTimeout;\r\n    var resolve, reject;\r\n\r\n    trackCallbacks = callback ? [callback] : [];\r\n    trackPromise = new Promise(function (res, rej) {\r\n        resolve = res.bind(0, undefined);\r\n        reject = rej;\r\n    });\r\n    callback = combineFn(trackCallbacks);\r\n    if (root.setCapture) {\r\n        root.setCapture();\r\n    }\r\n\r\n    var stopScroll = function () {\r\n        cancelAnimationFrame(scrollTimeout);\r\n        scrollTimeout = null;\r\n    };\r\n    var startScroll = function () {\r\n        var last;\r\n        scrollTimeout = scrollTimeout || requestAnimationFrame(function next(ts) {\r\n            if (last) {\r\n                var f = ((ts - last) / 16) - 1;\r\n                var x = lastPoint.clientX;\r\n                var y = lastPoint.clientY;\r\n                var r = getContentRect(scrollParent);\r\n                var dx = Math.max(x - r.right + 5, 0) || Math.min(x - r.left - 5, 0);\r\n                var dy = Math.max(y - r.bottom + 5, 0) || Math.min(y - r.top - 5, 0);\r\n                if ((!dx && !dy) || !scrollIntoView(target, toPlainRect(x + dx * f, y + dy * f).expand(5), scrollWithin, 'instant')) {\r\n                    scrollTimeout = null;\r\n                    return;\r\n                }\r\n                callback(lastPoint);\r\n            }\r\n            last = ts;\r\n            scrollTimeout = requestAnimationFrame(next);\r\n        });\r\n    };\r\n    bindUntil(trackPromise, root, {\r\n        mouseup: resolve,\r\n        touchend: resolve,\r\n        keydown: function (e) {\r\n            if (normalizeKey(e).key === 'escape') {\r\n                reject(errorWithCode(ErrorCode.cancelled));\r\n            }\r\n        },\r\n        mousemove: function (e) {\r\n            startScroll();\r\n            if (!e.which && !lastPoint.touches) {\r\n                resolve();\r\n            } else if (e.clientX !== lastPoint.clientX || e.clientY !== lastPoint.clientY) {\r\n                lastPoint = e;\r\n                callback(lastPoint);\r\n            }\r\n        },\r\n        touchmove: function (e) {\r\n            var points = makeArray(e.touches);\r\n            if (!points[1] && trackCallbacks[0]) {\r\n                startScroll();\r\n                lastPoint = points[0];\r\n            }\r\n            callback.apply(0, points);\r\n        }\r\n    }, true);\r\n    always(trackPromise, function () {\r\n        stopScroll();\r\n        trackCallbacks = null;\r\n        trackPromise = null;\r\n        if (root.releaseCapture) {\r\n            root.releaseCapture();\r\n        }\r\n    });\r\n    trackPromise.preventScroll = function () {\r\n        stopScroll();\r\n        startScroll = noop;\r\n    };\r\n    return trackPromise;\r\n}\r\n\r\nfunction beginDrag(within, callback) {\r\n    if (!currentEvent || !matchWord(currentEvent.type, 'mousedown mousemove touchstart touchmove')) {\r\n        return reject(errorWithCode(ErrorCode.invalidOperation));\r\n    }\r\n    var initialPoint = (currentEvent.touches || [currentEvent])[0];\r\n    callback = isFunction(callback || within);\r\n    return trackPointer(callback && function (p) {\r\n        var x = p.clientX;\r\n        var y = p.clientY;\r\n        callback(x, y, x - initialPoint.clientX, y - initialPoint.clientY);\r\n    });\r\n}\r\n\r\nfunction beginPinchZoom(callback) {\r\n    var initialPoints = (currentEvent || '').touches;\r\n    if (!initialPoints || !initialPoints[1]) {\r\n        return reject(errorWithCode(ErrorCode.invalidOperation));\r\n    }\r\n    var m0 = measureLine(initialPoints[0], initialPoints[1]);\r\n    return trackPointer(isFunction(callback) && function (p1, p2) {\r\n        var m1 = measureLine(p1, p2);\r\n        callback((m1.deg - m0.deg + 540) % 360 - 180, m1.length / m0.length, p1.clientX - initialPoints[0].clientX + (m0.dx - m1.dx) / 2, p1.clientY - initialPoints[0].clientY + (m0.dy - m1.dy) / 2);\r\n    });\r\n}\r\n\r\nfunction insertText(element, text, startOffset, endOffset) {\r\n    if (isUndefinedOrNull(element.selectionStart)) {\r\n        throw errorWithCode(ErrorCode.invalidOperation);\r\n    }\r\n    var prevText = inputValueImpl(element, 'get');\r\n    var maxLength = element.maxLength;\r\n    if (startOffset === undefined) {\r\n        startOffset = element.selectionStart;\r\n        endOffset = element.selectionEnd;\r\n    } else {\r\n        startOffset = Math.max(0, Math.min(startOffset, prevText.length));\r\n        endOffset = Math.max(startOffset, endOffset || startOffset);\r\n    }\r\n    if (maxLength >= 0) {\r\n        text = text.slice(0, Math.max(0, maxLength - prevText.length + endOffset - startOffset));\r\n    }\r\n    if (text || startOffset !== endOffset) {\r\n        var newtext = prevText.slice(0, startOffset) + text + prevText.slice(endOffset);\r\n        setTextData(element, newtext, startOffset + text.length);\r\n        dispatchInputEvent(element, text);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\ndomReady.then(function () {\r\n    var eventTimeout;\r\n    var modifierCount;\r\n    var modifiedKeyCode;\r\n    var mouseInitialPoint;\r\n    var preventClick;\r\n    var pressTimeout;\r\n    var hasBeforeInput;\r\n    var hasCompositionUpdate;\r\n    var imeModifyOnUpdate;\r\n    var imeNodeText;\r\n    var imeNode;\r\n    var imeOffset;\r\n    var imeText;\r\n\r\n    function getEventSource(e) {\r\n        var value = sourceDict[e.type];\r\n        return value && (typeof value === 'string' ? value : value(e));\r\n    }\r\n\r\n    function getEventName(e, suffix) {\r\n        var mod = ((e.ctrlKey || e.metaKey) ? 'Ctrl' : '') + (e.altKey ? 'Alt' : '') + (e.shiftKey ? 'Shift' : '');\r\n        return mod ? lcfirst(mod + ucfirst(suffix)) : suffix;\r\n    }\r\n\r\n    function updateIMEState() {\r\n        var element = document.activeElement || root;\r\n        var selection = getSelection();\r\n        if (!selection) {\r\n            return;\r\n        }\r\n        if ('selectionEnd' in element) {\r\n            imeNode = element;\r\n            imeOffset = [element.selectionStart, element.selectionEnd];\r\n            imeNodeText = inputValueImpl(element, 'get');\r\n        } else {\r\n            imeNode = selection.anchorNode;\r\n            imeOffset = [selection.focusOffset, selection.anchorOffset];\r\n            if (imeNode && imeNode.nodeType === 1) {\r\n                // IE puts selection at element level\r\n                // however it will insert text in the previous text node\r\n                var child = imeNode.childNodes[imeOffset[1] - 1];\r\n                if (child && child.nodeType === 3) {\r\n                    imeNode = child;\r\n                    imeOffset = [child.length, child.length];\r\n                } else {\r\n                    imeNode = imeNode.childNodes[imeOffset[1]];\r\n                    imeOffset = [0, 0];\r\n                }\r\n            }\r\n            imeNodeText = imeNode.data || '';\r\n        }\r\n    }\r\n\r\n    function triggerUIEvent(eventName, data, preventNative, target, options) {\r\n        if (target && !focusable(target)) {\r\n            return false;\r\n        }\r\n        return emitDOMEvent(eventName, target || getActiveElement(), data, extend({\r\n            bubbles: true,\r\n            preventNative: preventNative,\r\n            originalEvent: currentEvent\r\n        }, options));\r\n    }\r\n\r\n    function triggerKeystrokeEvent(keyName, char) {\r\n        var data = {\r\n            data: keyName,\r\n            char: char\r\n        };\r\n        var extraEvent = [];\r\n        if (char && textInputAllowed(getActiveElement())) {\r\n            extraEvent.push({ eventName: 'textInput', data: char });\r\n        }\r\n        return triggerUIEvent('keystroke', data, true, null, {\r\n            preAlias: [keyName],\r\n            postAlias: extraEvent.concat(getShortcut(keyName))\r\n        });\r\n    }\r\n\r\n    function triggerMouseEvent(eventName, point, data, preAlias, postAlias) {\r\n        point = point || currentEvent;\r\n        data = {\r\n            data: data || null,\r\n            target: point.target,\r\n            metakey: getEventName(point) || ''\r\n        };\r\n        return triggerUIEvent(eventName, data, true, point.target, {\r\n            clientX: point.clientX,\r\n            clientY: point.clientY,\r\n            preAlias: preAlias && [{ eventName: preAlias, data }],\r\n            postAlias: postAlias && [{ eventName: postAlias, data }]\r\n        });\r\n    }\r\n\r\n    function triggerGestureEvent(gesture) {\r\n        return triggerUIEvent('gesture', gesture, true, mouseInitialPoint.target, {\r\n            preAlias: [gesture]\r\n        });\r\n    }\r\n\r\n    function handleUIEventWrapper(type, callback) {\r\n        var isMoveEvent = matchWord(type, 'mousemove touchmove');\r\n        var isKeyboardEvent = matchWord(type, 'keydown keyup keypress');\r\n        var fireFocusReturn = matchWord(type, 'mousedown touchstart');\r\n        return function (e) {\r\n            currentEvent = e;\r\n            if (e.isTrusted !== false) {\r\n                clearTimeout(eventTimeout);\r\n                trustedEvent = e;\r\n                eventSource = getEventSource(e);\r\n                eventPath = null;\r\n                eventTimeout = setTimeout(function () {\r\n                    eventSource = '';\r\n                }, 20);\r\n                if (type === 'click' && e.pointerId >= 0) {\r\n                    lastClickTarget = e.target;\r\n                }\r\n            }\r\n            setTimeout(function () {\r\n                currentEvent = currentEvent === e ? null : currentEvent;\r\n                trustedEvent = trustedEvent === e ? null : trustedEvent;\r\n            });\r\n            if ('ctrlKey' in e) {\r\n                var metaKey = getEventName(e, '');\r\n                if (metaKey !== currentMetaKey) {\r\n                    currentMetaKey = metaKey;\r\n                    triggerUIEvent('metakeychange', metaKey, false);\r\n                }\r\n            }\r\n            if (!isMoveEvent && !focusable(e.target)) {\r\n                e.stopImmediatePropagation();\r\n                if (!isKeyboardEvent) {\r\n                    e.preventDefault();\r\n                }\r\n                if (fireFocusReturn) {\r\n                    emitDOMEvent('focusreturn', focusPath.slice(-2)[0]);\r\n                }\r\n            }\r\n            callback(e);\r\n        };\r\n    }\r\n\r\n    var uiEvents = {\r\n        compositionstart: function () {\r\n            updateIMEState();\r\n            imeModifyOnUpdate = false;\r\n            imeText = '';\r\n        },\r\n        compositionupdate: function (e) {\r\n            if (!imeNode || imeOffset[0] === null) {\r\n                return;\r\n            }\r\n            if (!hasCompositionUpdate && imeOffset[0] !== imeOffset[1]) {\r\n                triggerUIEvent('textInput', '', false);\r\n            }\r\n            imeText = e.data || '';\r\n            hasCompositionUpdate = true;\r\n        },\r\n        compositionend: function (e) {\r\n            if (!imeNode || imeOffset[0] === null) {\r\n                return;\r\n            }\r\n            var prevText = imeText;\r\n            var prevOffset = imeOffset;\r\n            var prevNodeText = imeNodeText;\r\n            updateIMEState();\r\n\r\n            imeText = e.data;\r\n            // some IME lacks inserted character sequence when selecting from phrase candidate list\r\n            // also legacy Microsoft Changjie IME reports full-width spaces (U+3000) instead of actual characters\r\n            if (!imeText || /^\\u3000+$/.test(imeText)) {\r\n                imeText = imeNodeText.slice(prevOffset[1], imeOffset[1]);\r\n            }\r\n\r\n            var afterNodeText = imeNodeText;\r\n            var afterOffset = imeOffset[1];\r\n            var startOffset = afterOffset;\r\n            // in some case the node does not contain the final input text\r\n            if ((!hasCompositionUpdate || imeModifyOnUpdate) && (prevOffset[0] + imeText.length !== afterOffset)) {\r\n                afterNodeText = imeNodeText.slice(0, afterOffset) + imeText + imeNodeText.slice(afterOffset);\r\n                afterOffset += imeText.length;\r\n            }\r\n            // some old mobile browsers fire compositionend event before replacing final character sequence\r\n            // need to compare both to truncate the correct range of characters\r\n            // three cases has been observed: XXX{imeText}|, XXX{prevText}| and XXX|{imeText}\r\n            var o1 = afterOffset - imeText.length;\r\n            var o2 = afterOffset - prevText.length;\r\n            if (imeNodeText.slice(o1, afterOffset) === imeText) {\r\n                startOffset = o1;\r\n            } else if (imeNodeText.slice(o2, afterOffset) === prevText) {\r\n                startOffset = o2;\r\n            } else if (imeNodeText.substr(afterOffset, imeText.length) === imeText) {\r\n                afterOffset += imeText.length;\r\n            }\r\n            prevNodeText = imeNodeText.substr(0, startOffset) + imeNodeText.slice(afterOffset);\r\n            hasCompositionUpdate = false;\r\n\r\n            setTextData(imeNode, prevNodeText, startOffset);\r\n            if (!triggerUIEvent('textInput', imeText, false)) {\r\n                setTextData(imeNode, afterNodeText, afterOffset);\r\n                dispatchInputEvent(e.target, imeText);\r\n            }\r\n            imeNode = null;\r\n            setTimeout(function () {\r\n                imeText = null;\r\n            });\r\n        },\r\n        textInput: function (e) {\r\n            // required for older mobile browsers that do not support beforeinput event\r\n            // ignore in case browser fire textInput before/after compositionend\r\n            if (!hasCompositionUpdate && (e.data === imeText || (!hasBeforeInput && triggerUIEvent('textInput', e.data, true)))) {\r\n                e.preventDefault();\r\n            }\r\n            hasBeforeInput = false;\r\n        },\r\n        keydown: function (e) {\r\n            var data = normalizeKey(e);\r\n            modifierCount = e.ctrlKey + e.shiftKey + e.altKey + e.metaKey + !data.meta;\r\n            modifierCount *= !data.meta && (!data.char || modifierCount > 2 || (modifierCount > 1 && !e.shiftKey));\r\n            modifiedKeyCode = data.meta ? modifiedKeyCode : data.key;\r\n            currentKeyName = getEventName(e, modifiedKeyCode);\r\n            lastKey = {\r\n                key: currentKeyName,\r\n                target: e.target\r\n            };\r\n            if (!imeNode && modifierCount) {\r\n                triggerKeystrokeEvent(currentKeyName, '');\r\n            }\r\n        },\r\n        keyup: function (e) {\r\n            var data = normalizeKey(e);\r\n            if (modifiedKeyCode === data.key) {\r\n                modifiedKeyCode = null;\r\n            }\r\n            currentKeyName = getEventName(e, modifiedKeyCode || '');\r\n        },\r\n        keypress: function (e) {\r\n            var data = normalizeKey(e).char;\r\n            currentKeyName = getEventName(e, modifiedKeyCode || data);\r\n            if (!imeNode && !modifierCount) {\r\n                triggerKeystrokeEvent(currentKeyName, data);\r\n            }\r\n        },\r\n        beforeinput: function (e) {\r\n            if (e.inputType !== 'insertCompositionText') {\r\n                hasCompositionUpdate = false;\r\n            }\r\n            if (!imeNode && e.cancelable) {\r\n                hasBeforeInput = true;\r\n                if (!currentKeyName || beforeInputType[e.inputType]) {\r\n                    switch (e.inputType) {\r\n                        case 'insertText':\r\n                        case 'insertFromPaste':\r\n                        case 'insertFromDrop':\r\n                            return triggerUIEvent('textInput', e.data, true);\r\n                        case 'deleteByCut':\r\n                        case 'deleteContent':\r\n                        case 'deleteContentBackward':\r\n                            return triggerKeystrokeEvent('backspace', '');\r\n                        case 'deleteContentForward':\r\n                            return triggerKeystrokeEvent('delete', '');\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        input: function (e) {\r\n            if (hasCompositionUpdate) {\r\n                updateIMEState();\r\n                imeModifyOnUpdate = true;\r\n                imeOffset[0] = imeOffset[1] - imeText.length;\r\n            } else if (e.inputType) {\r\n                triggerUIEvent('input');\r\n            }\r\n        },\r\n        touchstart: function (e) {\r\n            var singleTouch = !e.touches[1];\r\n            mouseInitialPoint = extend({}, e.touches[0]);\r\n            triggerMouseEvent('touchstart', mouseInitialPoint, null, null, singleTouch && 'mousedown');\r\n            if (singleTouch) {\r\n                pressTimeout = setTimeout(function () {\r\n                    triggerMouseEvent('longPress', mouseInitialPoint);\r\n                    mouseInitialPoint = null;\r\n                }, 1000);\r\n            }\r\n        },\r\n        touchmove: function (e) {\r\n            clearTimeout(pressTimeout);\r\n            if (mouseInitialPoint) {\r\n                if (!e.touches[1]) {\r\n                    var line = measureLine(e.touches[0], mouseInitialPoint);\r\n                    if (line.length > 5) {\r\n                        var swipeDir = approxMultipleOf(line.deg, 90) && (approxMultipleOf(line.deg, 180) ? (line.dx > 0 ? 'Right' : 'Left') : (line.dy > 0 ? 'Down' : 'Up'));\r\n                        if (!swipeDir || !triggerGestureEvent('swipe' + swipeDir)) {\r\n                            triggerMouseEvent('drag', mouseInitialPoint);\r\n                        }\r\n                        mouseInitialPoint = null;\r\n                    }\r\n                } else if (!e.touches[2]) {\r\n                    triggerGestureEvent('pinchZoom');\r\n                    mouseInitialPoint = null;\r\n                }\r\n            }\r\n        },\r\n        touchend: function (e) {\r\n            clearTimeout(pressTimeout);\r\n        },\r\n        mousedown: function (e) {\r\n            mouseInitialPoint = e;\r\n            preventClick = false;\r\n            if ((!touchedClick || e.isTrusted !== true) && isMouseDown(e)) {\r\n                triggerMouseEvent('mousedown');\r\n            }\r\n        },\r\n        mousemove: function (e) {\r\n            if (mouseInitialPoint && measureLine(e, mouseInitialPoint).length > 5) {\r\n                var target = mouseInitialPoint.target;\r\n                if (isMouseDown(e) && containsOrEquals(target, elementFromPoint(mouseInitialPoint.clientX, mouseInitialPoint.clientY))) {\r\n                    triggerMouseEvent('drag', mouseInitialPoint);\r\n                }\r\n                mouseInitialPoint = null;\r\n                preventClick = true;\r\n            }\r\n        },\r\n        wheel: function (e) {\r\n            var dir = e.deltaY || e.deltaX || e.detail;\r\n            if (dir && !textInputAllowed(e.target) && triggerMouseEvent('mousewheel', e, dir / Math.abs(dir) * (IS_MAC ? -1 : 1))) {\r\n                e.stopPropagation();\r\n            }\r\n        },\r\n        click: function (e) {\r\n            if (!preventClick) {\r\n                if (e.isTrusted !== false) {\r\n                    setFocus(e.target);\r\n                }\r\n                var alias = getEventName(e, 'click');\r\n                triggerMouseEvent('click', e, null, alias !== 'click' && alias);\r\n            }\r\n            preventClick = false;\r\n        },\r\n        contextmenu: function (e) {\r\n            triggerMouseEvent('rightClick');\r\n        },\r\n        dblclick: function (e) {\r\n            triggerMouseEvent('dblclick');\r\n        }\r\n    };\r\n    // required for setup event source by event wrapper\r\n    fill(uiEvents, 'drop cut copy paste pointerdown mouseup', noop);\r\n\r\n    each(uiEvents, function (i, v) {\r\n        bind(root, i, handleUIEventWrapper(i, v), { capture: true, passive: false });\r\n    });\r\n\r\n    bind(root, {\r\n        focusin: function (e) {\r\n            var target = e.target;\r\n            windowFocusedOut = false;\r\n            if (!focusable(target)) {\r\n                target.blur();\r\n            } else {\r\n                if (focusPath.indexOf(target) < 0) {\r\n                    setFocus(target);\r\n                }\r\n                scrollIntoView(target, 10);\r\n            }\r\n        },\r\n        focusout: function (e) {\r\n            imeNode = null;\r\n            hasCompositionUpdate = false;\r\n            if (!e.relatedTarget) {\r\n                if (!isVisible(e.target)) {\r\n                    // browser set focus to body if the focused element is no longer visible\r\n                    // which is not a desirable behavior in many cases\r\n                    // find the first visible element in focusPath to focus\r\n                    var cur = any(focusPath.slice(focusPath.indexOf(e.target) + 1), isVisible);\r\n                    if (cur) {\r\n                        setFocus(cur);\r\n                    }\r\n                } else if (!currentEvent) {\r\n                    setTimeout(function () {\r\n                        if (!windowFocusedOut && focusPath[0] === e.target) {\r\n                            setFocus(e.target.parentNode);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }, true);\r\n\r\n    bind(window, 'wheel', function (e) {\r\n        if (currentMetaKey) {\r\n            return;\r\n        }\r\n        // scrolling will happen on first scrollable element up the DOM tree\r\n        // prevent scrolling if interaction on such element should be blocked by modal element\r\n        var deltaX = -e.deltaX;\r\n        var deltaY = -e.deltaY;\r\n        for (var cur = e.target; cur && cur !== root; cur = cur.parentNode) {\r\n            var style = getComputedStyle(cur);\r\n            if (cur.scrollWidth > cur.offsetWidth && matchWord(style.overflowX, 'auto scroll') && ((deltaX > 0 && cur.scrollLeft > 0) || (deltaX < 0 && cur.scrollLeft + cur.offsetWidth < cur.scrollWidth))) {\r\n                break;\r\n            }\r\n            if (cur.scrollHeight > cur.offsetHeight && matchWord(style.overflowY, 'auto scroll') && ((deltaY > 0 && cur.scrollTop > 0) || (deltaY < 0 && cur.scrollTop + cur.offsetHeight < cur.scrollHeight))) {\r\n                break;\r\n            }\r\n        }\r\n        if (!focusable(cur === root ? document.body : cur)) {\r\n            e.preventDefault();\r\n        }\r\n    }, { passive: false });\r\n\r\n    bind(window, 'blur', function (e) {\r\n        if (e.target === window) {\r\n            windowFocusedOut = true;\r\n            currentKeyName = '';\r\n            modifiedKeyCode = '';\r\n        }\r\n    });\r\n\r\n    listenDOMEvent('escape', function () {\r\n        setFocus(getModalElement() || document.body);\r\n    });\r\n    setFocus(document.activeElement);\r\n    watchElements(root, SELECTOR_FOCUSABLE, updateTabIndex);\r\n});\r\n\r\nsetShortcut({\r\n    undo: 'ctrlZ',\r\n    redo: 'ctrlY ctrlShiftZ',\r\n    selectAll: 'ctrlA'\r\n});\r\n\r\n/* --------------------------------------\r\n * Exports\r\n * -------------------------------------- */\r\n\r\nfunction reportError(error, element, source) {\r\n    return emitDOMEvent('error', element || root, { error }, { bubbles: true, source }) || reportErrorImpl(error);\r\n}\r\n\r\nfunction focus(element, focusInput) {\r\n    if (focusInput !== false && !matchSelector(element, SELECTOR_FOCUSABLE)) {\r\n        element = $(SELECTOR_FOCUSABLE, element).filter(':visible:not(:disabled,.disabled)')[0] || element;\r\n    }\r\n    setFocus(element);\r\n    return focusPath[0] === element;\r\n}\r\n\r\nfunction blur(element) {\r\n    setFocus(focusPath[focusPath.indexOf(element) + 1]);\r\n    return !focusElements.has(element);\r\n}\r\n\r\nexport default {\r\n    get event() {\r\n        return currentEvent;\r\n    },\r\n    get metaKey() {\r\n        return currentMetaKey;\r\n    },\r\n    get pressedKey() {\r\n        return trustedEvent && trustedEvent.pointerId < 0 && eventSource === 'keyboard' ? lastKey.key : currentKeyName;\r\n    },\r\n    get context() {\r\n        return getEventContext(getActiveElement()).context;\r\n    },\r\n    get activeElement() {\r\n        return getActiveElement();\r\n    },\r\n    get modalElement() {\r\n        return getModalElement();\r\n    },\r\n    get focusedElements() {\r\n        cleanupFocusPath();\r\n        return focusPath.slice(0);\r\n    },\r\n    get eventSource() {\r\n        return trustedEvent ? eventSource : 'script';\r\n    },\r\n    get eventSourcePath() {\r\n        if (!trustedEvent) {\r\n            return [root];\r\n        }\r\n        if (!eventPath) {\r\n            if (eventSource === 'keyboard') {\r\n                eventPath = focusPath.slice(0);\r\n            } else {\r\n                var target = eventSource === 'mouse' && trustedEvent.pointerId < 0 && lastClickTarget ? lastClickTarget : trustedEvent.target;\r\n                eventPath = grep(parentsAndSelf(target), focusable);\r\n            }\r\n        }\r\n        return eventPath.slice(0);\r\n    },\r\n    root,\r\n    ready: domReady,\r\n\r\n    reportError,\r\n    textInputAllowed,\r\n    focusable,\r\n    focused,\r\n    setTabRoot,\r\n    unsetTabRoot,\r\n    setModal,\r\n    releaseModal,\r\n    retainFocus,\r\n    releaseFocus,\r\n    iterateFocusPath,\r\n    focus,\r\n    blur,\r\n    beginDrag,\r\n    beginPinchZoom,\r\n    insertText,\r\n    getShortcut,\r\n    setShortcut,\r\n\r\n    getEventSource,\r\n    getEventContext,\r\n    on: listenDOMEvent,\r\n    emit: emitDOMEvent,\r\n\r\n    lock,\r\n    locked,\r\n    cancelLock,\r\n    subscribeAsync,\r\n    notifyAsync,\r\n    runAsync,\r\n    preventLeave,\r\n\r\n    observe,\r\n    registerCleanup,\r\n    createAutoCleanupMap,\r\n    afterDetached,\r\n    watchElements,\r\n    watchAttributes,\r\n    watchOwnAttributes\r\n};\r\n\r\nexport {\r\n    reportError,\r\n    textInputAllowed,\r\n    beginDrag,\r\n    beginPinchZoom,\r\n    insertText,\r\n    getShortcut,\r\n    setShortcut,\r\n    focusable,\r\n    focused,\r\n    setTabRoot,\r\n    unsetTabRoot,\r\n    setModal,\r\n    releaseModal,\r\n    retainFocus,\r\n    releaseFocus,\r\n    iterateFocusPath,\r\n    focus,\r\n    blur\r\n}\r\n","import $ from \"./include/jquery.js\";\r\nimport { root, reportError } from \"./env.js\";\r\nimport { arrRemove, createPrivateStore, deferrable, defineHiddenProperty, definePrototype, each, executeOnce, extend, fill, grep, is, isFunction, isPlainObject, isUndefinedOrNull, kv, map, mapGet, mapRemove, noop, reject, resolve, setAdd, setImmediateOnce, single, splice, throwNotFunction } from \"./util.js\";\r\nimport { containsOrEquals, parentsAndSelf } from \"./domUtil.js\";\r\nimport { registerCleanup } from \"./observe.js\";\r\nimport dom, { iterateFocusPath } from \"./dom.js\";\r\n\r\nconst _ = createPrivateStore();\r\nconst containers = new WeakMap();\r\nconst domEventTrap = new ZetaEventContainer();\r\nconst domContainer = new ZetaEventContainer();\r\nconst asyncEventData = new Map();\r\nconst asyncEvents = [];\r\n\r\nexport var eventSource;\r\nexport var lastEventSource;\r\n\r\n\r\n/* --------------------------------------\r\n * Helper functions\r\n * -------------------------------------- */\r\n\r\nfunction ZetaEventSource() {\r\n    var self = this;\r\n    self.path = dom.eventSourcePath;\r\n    self.source = dom.eventSource;\r\n    self.sourceKeyName = self.source === 'keyboard' ? dom.pressedKey : null;\r\n}\r\n\r\nfunction setLastEventSource() {\r\n}\r\n\r\nfunction prepEventSource(promise) {\r\n    return resolve(promise);\r\n}\r\n\r\nfunction getEventSource() {\r\n    return dom.eventSource;\r\n}\r\n\r\nfunction getContainerForElement(element) {\r\n    var container = mapGet(containers, element);\r\n    return container && !_(container).destroyed && container;\r\n}\r\n\r\nfunction removeContainerForElement(element, container) {\r\n    var cached = mapGet(containers, element);\r\n    if (cached && cached === container) {\r\n        mapRemove(containers, element);\r\n    }\r\n}\r\n\r\nfunction getEventContext(element) {\r\n    var container;\r\n    for (; !container && element; element = element.parentNode) {\r\n        container = getContainerForElement(element);\r\n    }\r\n    return _(container || domContainer).options;\r\n}\r\n\r\nfunction normalizeEventTarget(container, target) {\r\n    return (container.captureDOMEvents && is(target.element, Node)) || target;\r\n}\r\n\r\nfunction normalizeEventOptions(options, overrides) {\r\n    if (typeof options === 'boolean') {\r\n        options = { bubbles: options };\r\n    }\r\n    return extend({\r\n        handleable: true,\r\n        asyncResult: true\r\n    }, options, overrides);\r\n}\r\n\r\nfunction emitDOMEvent(eventName, target, data, options) {\r\n    if (!is(target, Node)) {\r\n        options = data;\r\n        data = target;\r\n        target = dom.activeElement;\r\n    }\r\n    var emitter = new ZetaEventEmitter(eventName, domContainer, target, data, normalizeEventOptions(options));\r\n    var visited = new Set();\r\n    return single(parentsAndSelf(target), function (v) {\r\n        var container = getContainerForElement(v);\r\n        if (container && setAdd(visited, container)) {\r\n            return emitter.emit(domEventTrap, 'tap', container, false);\r\n        }\r\n    }) || emitter.emit();\r\n}\r\n\r\nfunction wrapSelectorHandler(selector, callback) {\r\n    return function (e) {\r\n        var matched = $(e.target).closest(selector)[0];\r\n        if (matched) {\r\n            e.currentTarget = matched;\r\n            return callback.call(matched, e, matched);\r\n        }\r\n    };\r\n}\r\n\r\nfunction listenDOMEvent(element, event, handler, extra) {\r\n    if (!is(element, Node)) {\r\n        extra = handler;\r\n        handler = event;\r\n        event = element;\r\n        element = root;\r\n    }\r\n    if (typeof handler === 'string') {\r\n        handler = wrapSelectorHandler(handler, extra);\r\n    }\r\n    return domContainer.add(element, event, handler);\r\n}\r\n\r\nfunction registerAsyncEvent(eventName, container, target, data, options, mergeData) {\r\n    var map = mapGet(asyncEventData, container, Map);\r\n    var dict = mapGet(map, target || container.element, Object);\r\n    if (dict[eventName] && (isFunction(mergeData) || (isUndefinedOrNull(data) && isUndefinedOrNull(dict[eventName].data)))) {\r\n        dict[eventName].data = mergeData && mergeData(dict[eventName].data, data);\r\n    } else {\r\n        dict[eventName] = new ZetaEventEmitter(eventName, container, target, data, normalizeEventOptions(options, { handleable: false }));\r\n        asyncEvents.push(dict[eventName]);\r\n        setImmediateOnce(emitAsyncEvents);\r\n    }\r\n}\r\n\r\nfunction removeAsyncEvent(eventName, container, target) {\r\n    var map = mapGet(asyncEventData, container);\r\n    var dict = map && mapGet(map, target);\r\n    if (dict && dict[eventName]) {\r\n        var event = dict[eventName];\r\n        delete dict[eventName];\r\n        arrRemove(asyncEvents, event);\r\n        return event.data || { data: event.data };\r\n    }\r\n}\r\n\r\nfunction emitAsyncEvents(container) {\r\n    var events;\r\n    if (!container) {\r\n        events = asyncEvents.splice(0);\r\n        asyncEventData.clear();\r\n    } else if (mapRemove(asyncEventData, container)) {\r\n        events = splice(asyncEvents, function (v) {\r\n            return v.container === container;\r\n        });\r\n    }\r\n    each(events, function (i, v) {\r\n        v.emit();\r\n    });\r\n}\r\n\r\n/* --------------------------------------\r\n * ZetaEventEmitter\r\n * -------------------------------------- */\r\n\r\nfunction ZetaEventEmitter(eventName, container, target, data, options) {\r\n    target = target || container.element;\r\n    var self = this;\r\n    var element = normalizeEventTarget(container, target);\r\n    var source = options.source || new ZetaEventSource();\r\n    var result = options.deferrable ? deferrable() : undefined;\r\n    var properties = {\r\n        eventName: eventName,\r\n        target: target,\r\n        source: source.source,\r\n        sourceKeyName: source.sourceKeyName,\r\n        timestamp: performance.now(),\r\n        clientX: options.clientX,\r\n        clientY: options.clientY,\r\n        originalEvent: options.originalEvent || null\r\n    };\r\n    extend(self, options, properties, {\r\n        container: container,\r\n        element: element,\r\n        data: data,\r\n        properties: properties,\r\n        result: result,\r\n        current: [],\r\n    });\r\n    if (result) {\r\n        self.handleable = false;\r\n        properties.waitFor = result.waitFor;\r\n    }\r\n}\r\n\r\ndefinePrototype(ZetaEventEmitter, {\r\n    emit: function (container, eventName, target, bubbles) {\r\n        var self = this;\r\n        container = container || self.container;\r\n        target = target || self.target;\r\n        if (isUndefinedOrNull(bubbles)) {\r\n            bubbles = self.bubbles;\r\n        }\r\n        var targets = bubbles ? emitterIterateTargets(self, container, target) : [target];\r\n        var emitting = self.current[0] || self;\r\n        var components = _(container).components;\r\n        single(targets, function (v) {\r\n            var component = components.get(v);\r\n            return component && emitterCallHandlers(self, container, component, emitting.eventName, eventName, emitting.data);\r\n        });\r\n        return self.result;\r\n    }\r\n});\r\n\r\nfunction emitterIterateTargets(emitter, container, target) {\r\n    if (container !== domContainer || !is(target, Node)) {\r\n        return container.getEventPath(target, emitter.properties);\r\n    }\r\n    var targets = iterateFocusPath(target);\r\n    if (emitter.clientX !== undefined) {\r\n        return grep(targets, function (v) {\r\n            return containsOrEquals(v, target);\r\n        });\r\n    }\r\n    return targets;\r\n}\r\n\r\nfunction emitterCallHandlers(emitter, container, component, eventName, handlerName, data) {\r\n    var shouldForward = eventName === emitter.eventName;\r\n    var forwardEvent = function (entries) {\r\n        return single(entries, function (v) {\r\n            return emitterCallHandlers(emitter, container, component, v.eventName || v, handlerName, v.data);\r\n        });\r\n    };\r\n    if (!handlerName && shouldForward && forwardEvent(emitter.preAlias)) {\r\n        return true;\r\n    }\r\n    var handlers = component.handlers[handlerName || eventName];\r\n    var handled;\r\n    if (handlers && handlers.count) {\r\n        emitter.current.unshift({ eventName, data });\r\n        handled = single(handlers, function (v) {\r\n            var event = new ZetaEvent(emitter, eventName, component, v.context, data);\r\n            var contextContainer = is(v.context, ZetaEventContainer) || container;\r\n            var prevEvent = contextContainer.event;\r\n            container.initEvent(event);\r\n            contextContainer.event = event;\r\n            try {\r\n                var returnValue = v.callback.call(event.context, event, event.context);\r\n                if (returnValue !== undefined) {\r\n                    event.handled(returnValue);\r\n                }\r\n            } catch (e) {\r\n                if (emitter.asyncResult) {\r\n                    emitterHandleResult(emitter, e, reject);\r\n                }\r\n                reportError(e);\r\n            }\r\n            contextContainer.event = prevEvent;\r\n            return emitter.handled;\r\n        });\r\n        emitter.current.shift();\r\n    }\r\n    return handled || (!emitter.current[0] && shouldForward && forwardEvent(emitter.postAlias));\r\n}\r\n\r\nfunction emitterHandleResult(emitter, value, reject) {\r\n    if (emitter.handleable && !emitter.handled) {\r\n        emitter.handled = true;\r\n        emitter.result = emitter.asyncResult ? (reject || resolve)(value) : value;\r\n        if (emitter.originalEvent && emitter.preventNative) {\r\n            emitter.originalEvent.preventDefault();\r\n        }\r\n    }\r\n}\r\n\r\n/* --------------------------------------\r\n * ZetaEvent\r\n * -------------------------------------- */\r\n\r\nfunction ZetaEvent(event, eventName, component, context, data) {\r\n    var self = extend(this, event.properties);\r\n    self.eventName = eventName;\r\n    self.type = eventName;\r\n    self.context = context;\r\n    self.currentTarget = normalizeEventTarget(event.container, component.target);\r\n    self.target = event.element;\r\n    self.data = null;\r\n    if (isPlainObject(data)) {\r\n        extend(self, data);\r\n    } else if (data !== undefined) {\r\n        self.data = data;\r\n    }\r\n    _(self, event);\r\n}\r\n\r\ndefinePrototype(ZetaEvent, {\r\n    handled: function (value) {\r\n        emitterHandleResult(_(this), value);\r\n    },\r\n    isHandled: function () {\r\n        return !!_(this).handled;\r\n    },\r\n    preventDefault: function () {\r\n        var event = this.originalEvent;\r\n        if (event) {\r\n            event.preventDefault();\r\n        }\r\n    },\r\n    isDefaultPrevented: function () {\r\n        return !!(this.originalEvent || _(this)).defaultPrevented;\r\n    }\r\n});\r\n\r\n\r\n/* --------------------------------------\r\n * ZetaEventContainer\r\n * -------------------------------------- */\r\n\r\nfunction ZetaEventContainer(element, context, options) {\r\n    var self = this;\r\n    options = extend({\r\n        element: element || root,\r\n        context: context || null,\r\n        autoDestroy: false,\r\n        normalizeTouchEvents: false,\r\n        captureDOMEvents: false,\r\n        initEvent: noop\r\n    }, options);\r\n    _(self, {\r\n        options: options,\r\n        components: options.willDestroy || options.autoDestroy ? new Map() : new WeakMap()\r\n    });\r\n    extend(self, options);\r\n    if (element && self.captureDOMEvents) {\r\n        containers.set(element, self);\r\n    }\r\n    if (self.autoDestroy) {\r\n        registerCleanup(element, function () {\r\n            self.destroy();\r\n        });\r\n    }\r\n}\r\n\r\ndefinePrototype(ZetaEventContainer, {\r\n    event: null,\r\n    tap: function (handler) {\r\n        return domEventTrap.add(this, 'tap', handler);\r\n    },\r\n    getEventPath: function (element, props) {\r\n        return parentsAndSelf(element);\r\n    },\r\n    getContexts: function (element) {\r\n        var state = _(this).components.get(element);\r\n        var visited = new Set();\r\n        return map(state && state.handlers, function (v) {\r\n            return map(v, function (v) {\r\n                return v.context !== element && setAdd(visited, v.context) ? v.context : null;\r\n            });\r\n        });\r\n    },\r\n    add: function (target, event, handler) {\r\n        var self = this;\r\n        var state = _(self);\r\n        if (state.destroyed) {\r\n            return noop;\r\n        }\r\n        var element = normalizeEventTarget(self, target);\r\n        if (element !== target) {\r\n            containers.set(element, self);\r\n        }\r\n        var handlers = isPlainObject(event) || fill(event, handler);\r\n        return containerCreateDispose(\r\n            containerRegisterHandler(state, target, target, handlers),\r\n            element !== target && containerRegisterHandler(state, element, target, handlers));\r\n    },\r\n    delete: function (target) {\r\n        var self = this;\r\n        var cur = mapRemove(_(self).components, target);\r\n        if (self.captureDOMEvents) {\r\n            removeContainerForElement(target, self);\r\n        }\r\n        each(cur && cur.refs, function (i, v) {\r\n            v.dispose = noop;\r\n        });\r\n    },\r\n    emit: function (eventName, target, data, bubbles) {\r\n        var self = this;\r\n        var options = normalizeEventOptions(bubbles);\r\n        var emitter = is(_(eventName), ZetaEventEmitter) || new ZetaEventEmitter(eventName, self, target, isUndefinedOrNull(data) ? removeAsyncEvent(eventName, self, target) : data, options);\r\n        return emitter.emit(self, null, target, options.bubbles);\r\n    },\r\n    emitAsync: function (eventName, target, data, bubbles, mergeData) {\r\n        registerAsyncEvent(eventName, this, target, data, bubbles, mergeData);\r\n    },\r\n    flushEvents: function () {\r\n        emitAsyncEvents(this);\r\n    },\r\n    destroy: function () {\r\n        var self = this;\r\n        var state = _(self);\r\n        domEventTrap.delete(this);\r\n        each(state.components, function (i) {\r\n            self.delete(i);\r\n        });\r\n        state.destroyed = true;\r\n        state.components = new WeakMap();\r\n    }\r\n});\r\n\r\nfunction containerCreateDispose(ref, ref2) {\r\n    return executeOnce(function () {\r\n        ref.dispose();\r\n        if (ref2) {\r\n            ref2.dispose();\r\n        }\r\n    });\r\n}\r\n\r\nfunction ContainerComponent(target) {\r\n    var self = this;\r\n    self.target = target;\r\n    self.refs = new Set();\r\n    self.index = 0;\r\n    self.handlers = {};\r\n}\r\n\r\nfunction containerRegisterHandler(state, target, context, callbacks) {\r\n    var cur = mapGet(state.components, target, ContainerComponent, true);\r\n    var key = cur.index++;\r\n    var handlers = cur.handlers;\r\n    var dispose = function () {\r\n        cur.refs.delete(controller);\r\n        each(handlers, function (i, v) {\r\n            if (v[key]) {\r\n                v.count -= delete v[key];\r\n            }\r\n        });\r\n    };\r\n    each(callbacks, function (i, v) {\r\n        var dict = handlers[i] || (handlers[i] = {});\r\n        if (dict.count === undefined) {\r\n            defineHiddenProperty(dict, 'count', 0);\r\n        }\r\n        dict[key] = {\r\n            context: context,\r\n            callback: throwNotFunction(v)\r\n        };\r\n        dict.count++;\r\n    });\r\n    var controller = { dispose };\r\n    cur.refs.add(controller);\r\n    return controller;\r\n}\r\n\r\nexport {\r\n    ZetaEventContainer,\r\n    ZetaEventSource,\r\n    emitDOMEvent,\r\n    listenDOMEvent,\r\n    getEventContext,\r\n    getEventSource,\r\n    prepEventSource,\r\n    setLastEventSource\r\n};\r\n","import { any, is, isFunction, isPlainObject, each, map, definePrototype, kv, noop, always, matchWord, makeArray, grep, freeze, isArray, matchWordMulti, executeOnce } from \"./util.js\";\r\nimport $ from \"./include/jquery.js\";\r\nimport { window, document, root, getSelection, getComputedStyle, domReady } from \"./env.js\";\r\nimport { emitDOMEvent } from \"./events.js\";\r\n\r\nconst elementsFromPoint = document.msElementsFromPoint || document.elementsFromPoint;\r\nconst compareDocumentPositionImpl = document.compareDocumentPosition;\r\nconst visualViewport = window.visualViewport;\r\nconst parseFloat = window.parseFloat;\r\n\r\nvar helperDiv = $('<div style=\"position:fixed;top:0;left:0;right:0;bottom:0;visibility:hidden;pointer-events:none;--sai:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)\">')[0];\r\nvar safeAreaInset;\r\n\r\n/* --------------------------------------\r\n * Custom class\r\n * -------------------------------------- */\r\n\r\nfunction Rect(l, t, r, b) {\r\n    var self = this;\r\n    self.left = l;\r\n    self.top = t;\r\n    self.right = r;\r\n    self.bottom = b;\r\n}\r\n\r\ndefinePrototype(Rect, {\r\n    get width() {\r\n        return this.right - this.left;\r\n    },\r\n    get height() {\r\n        return this.bottom - this.top;\r\n    },\r\n    get centerX() {\r\n        return (this.left + this.right) / 2;\r\n    },\r\n    get centerY() {\r\n        return (this.top + this.bottom) / 2;\r\n    },\r\n    collapse: function (side, offset) {\r\n        var rect = this;\r\n        var pos = rect[side] + (offset || 0);\r\n        return side === 'left' || side === 'right' ? toPlainRect(pos, rect.top, pos, rect.bottom) : toPlainRect(rect.left, pos, rect.right, pos);\r\n    },\r\n    translate: function (x, y) {\r\n        var self = this;\r\n        return toPlainRect(self.left + x, self.top + y, self.right + x, self.bottom + y);\r\n    },\r\n    expand: function (l, t, r, b) {\r\n        var self = this;\r\n        if (l && l.top !== undefined) {\r\n            t = t || 1;\r\n            return self.expand(l.left * t, l.top * t, l.right * t, l.bottom * t);\r\n        }\r\n        switch (arguments.length) {\r\n            case 1:\r\n                t = l;\r\n            case 2:\r\n                r = l;\r\n            case 3:\r\n                b = t;\r\n        }\r\n        var w = self.width;\r\n        var h = self.height;\r\n        var dx = l + r + w;\r\n        var dy = t + b + h;\r\n        if (dx < 0) {\r\n            l -= (dx * l / (l + r)) | 0;\r\n            r = -(l + w);\r\n        }\r\n        if (dy < 0) {\r\n            t -= (dy * t / (t + b)) | 0;\r\n            b = -(t + h);\r\n        }\r\n        return toPlainRect(self.left - l, self.top - t, self.right + r, self.bottom + b);\r\n    }\r\n});\r\n\r\n\r\n/* --------------------------------------\r\n * General helper\r\n * -------------------------------------- */\r\n\r\nfunction attachHelperDiv() {\r\n    if (!containsOrEquals(document.body, helperDiv)) {\r\n        document.body.appendChild(helperDiv);\r\n    }\r\n    return helperDiv;\r\n}\r\n\r\nfunction tagName(element) {\r\n    return element && element.tagName && element.tagName.toLowerCase();\r\n}\r\n\r\nfunction matchSelector(element, selector) {\r\n    if (!element || !selector) {\r\n        return false;\r\n    }\r\n    return (selector === '*' || tagName(element) === selector || $(element).is(selector)) && element;\r\n}\r\n\r\nfunction comparePosition(a, b, strict) {\r\n    if (a === b) {\r\n        return 0;\r\n    }\r\n    var v = a && b && compareDocumentPositionImpl.call(a.element || a, b.element || b);\r\n    if (v & 2) {\r\n        return (strict && v & 8) || (v & 1) ? NaN : 1;\r\n    }\r\n    if (v & 4) {\r\n        return (strict && v & 16) || (v & 1) ? NaN : -1;\r\n    }\r\n    return NaN;\r\n}\r\n\r\nfunction connected(a, b) {\r\n    return a && b && !(compareDocumentPositionImpl.call(a.commonAncestorContainer || a, b.commonAncestorContainer || b) & 1);\r\n}\r\n\r\nfunction containsOrEquals(container, contained) {\r\n    container = (container || '').element || container;\r\n    contained = (contained || '').element || contained;\r\n    return container === contained || $.contains(container, contained);\r\n}\r\n\r\nfunction isVisible(element) {\r\n    if (!connected(root, element)) {\r\n        return false;\r\n    }\r\n    if (!element.offsetWidth && !element.offsetHeight) {\r\n        for (var cur = element; cur && cur !== document; cur = cur.parentNode) {\r\n            if (getComputedStyle(cur).display === 'none') {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\nfunction acceptNode(iterator, node) {\r\n    node = node || iterator.currentNode;\r\n    if (!node || !(iterator.whatToShow & (1 << (node.nodeType - 1)))) {\r\n        return 3;\r\n    }\r\n    var filter = iterator.filter;\r\n    return !filter ? 1 : (filter.acceptNode || filter).call(filter, node);\r\n}\r\n\r\nfunction combineNodeFilters() {\r\n    var args = grep(makeArray(arguments), isFunction);\r\n    if (!args[1]) {\r\n        return args[0] || function () {\r\n            return 1;\r\n        };\r\n    }\r\n    return function (node) {\r\n        var result = 1;\r\n        for (var i = 0, len = args.length; i < len; i++) {\r\n            var value = args[i].call(null, node);\r\n            if (value === 2) {\r\n                return 2;\r\n            }\r\n            result |= value;\r\n        }\r\n        return result;\r\n    };\r\n}\r\n\r\nfunction iterateNode(iterator, callback, from, until) {\r\n    var i = 0;\r\n    iterator.currentNode = from = from || iterator.currentNode;\r\n    callback = callback || noop;\r\n    switch (acceptNode(iterator)) {\r\n        case 2:\r\n            return;\r\n        case 1:\r\n            callback(from, i++);\r\n    }\r\n    for (var cur; (cur = iterator.nextNode()) && (!until || (isFunction(until) ? until(cur) : cur !== until || void callback(cur, i++))); callback(cur, i++));\r\n}\r\n\r\nfunction iterateNodeToArray(iterator, callback, from, until) {\r\n    var result = [];\r\n    iterateNode(iterator, function (v) {\r\n        result[result.length] = v;\r\n    }, from, until);\r\n    return callback ? map(result, callback) : result;\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Advanced traversal\r\n * -------------------------------------- */\r\n\r\nfunction getCommonAncestor(a, b) {\r\n    for (b = b || a; a && a !== b && compareDocumentPositionImpl.call(a, b) !== 20; a = a.parentNode);\r\n    return a;\r\n}\r\n\r\nfunction parentsAndSelf(element) {\r\n    if (element === window) {\r\n        return [];\r\n    }\r\n    for (var arr = []; element && element !== document && arr.push(element); element = element.parentNode || element.parent);\r\n    return arr;\r\n}\r\n\r\nfunction selectIncludeSelf(selector, container) {\r\n    container = container || root;\r\n    try {\r\n        var matched = makeArray(container.querySelectorAll(selector));\r\n        return matchSelector(container, selector) ? [container].concat(matched) : matched;\r\n    } catch (e) {\r\n        var matched = $(container).filter(selector).add($(container).find(selector)).get();\r\n        if (matched[0] || container === root) {\r\n            return matched;\r\n        }\r\n        return $(container).find($(selector)).get();\r\n    }\r\n}\r\n\r\nfunction selectClosestRelative(selector, container) {\r\n    container = container || root;\r\n    var element = $(selector, container)[0];\r\n    if (!element) {\r\n        var $matched = $(selector);\r\n        for (; container !== root && !element; container = container.parentNode) {\r\n            element = $matched.get().filter(function (v) {\r\n                return containsOrEquals(container, v);\r\n            })[0];\r\n        }\r\n    }\r\n    return element;\r\n}\r\n\r\nfunction createNodeIterator(root, whatToShow, filter) {\r\n    return document.createNodeIterator(root, whatToShow, isFunction(filter) || null, false);\r\n}\r\n\r\nfunction createTreeWalker(root, whatToShow, filter) {\r\n    return document.createTreeWalker(root, whatToShow, isFunction(filter) || null, false);\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Events\r\n * -------------------------------------- */\r\n\r\nfunction addOrRemoveEventListener(method, element, event, listener, useCapture) {\r\n    if (isPlainObject(event)) {\r\n        each(event, function (i, v) {\r\n            element[method](i, v, listener);\r\n        });\r\n    } else if (typeof event === 'string') {\r\n        each(event.split(' '), function (i, v) {\r\n            element[method](v, listener, useCapture);\r\n        });\r\n    }\r\n}\r\n\r\nfunction bind(element, event, listener, useCapture) {\r\n    addOrRemoveEventListener('addEventListener', element, event, listener, useCapture);\r\n    return executeOnce(function () {\r\n        addOrRemoveEventListener('removeEventListener', element, event, listener);\r\n    });\r\n}\r\n\r\nfunction bindOnce(element, event, listener, useCapture) {\r\n    var unbind = bind(element, event, function () {\r\n        unbind();\r\n        return listener.apply(this, arguments);\r\n    }, useCapture);\r\n    return unbind;\r\n}\r\n\r\nfunction bindUntil(promise, element, event, listener, useCapture) {\r\n    always(promise, bind(element, event, listener, useCapture));\r\n}\r\n\r\nfunction dispatchDOMMouseEvent(eventName, point, e) {\r\n    if (typeof eventName !== 'string') {\r\n        e = eventName;\r\n        eventName = e.type;\r\n    }\r\n    var target = point ? elementFromPoint(point.clientX, point.clientY) || root : e.target;\r\n    var event = document.createEvent('MouseEvent');\r\n    point = point || e;\r\n    event.initMouseEvent(eventName, e.bubbles, e.cancelable, e.view, e.detail, point.screenX, point.screenY, point.clientX, point.clientY, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, e.button, e.relatedTarget);\r\n    return target.dispatchEvent(event);\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * DOM manip\r\n * -------------------------------------- */\r\n\r\nfunction removeNode(node) {\r\n    if (node.parentNode) {\r\n        node.parentNode.removeChild(node);\r\n    }\r\n}\r\n\r\nfunction getClass(element, className) {\r\n    var re = new RegExp('(?:^|\\\\s+)' + className + '(?:-(\\\\S+)|\\\\b)', 'ig');\r\n    var t = [false];\r\n    (element.getAttribute('class') || '').replace(re, function (v, a) {\r\n        t[a ? t.length : 0] = a || true;\r\n    });\r\n    return t[1] ? t.slice(1) : t[0];\r\n}\r\n\r\nfunction setClass(element, className, values) {\r\n    var value = element.getAttribute('class') || '';\r\n    each(isPlainObject(className) || kv(className, values), function (i, v) {\r\n        var re = new RegExp('(^|\\\\s)\\\\s*' + i + '(?:-(\\\\S+)|\\\\b)|\\\\s*$', 'ig');\r\n        var replaced = 0;\r\n        if (isPlainObject(v)) {\r\n            v = map(v, function (v, i) {\r\n                return v ? i : null;\r\n            });\r\n        }\r\n        value = value.replace(re, function () {\r\n            return replaced++ || !v || v.length === 0 ? '' : (' ' + i + (v[0] ? [''].concat(v).join(' ' + i + '-') : ''));\r\n        });\r\n    });\r\n    element.setAttribute('class', value);\r\n}\r\n\r\nfunction getSafeAreaInset() {\r\n    if (!safeAreaInset) {\r\n        var values = getComputedStyle(attachHelperDiv()).getPropertyValue('--sai').split(' ');\r\n        safeAreaInset = freeze({\r\n            top: parseFloat(values[0]) || 0,\r\n            left: parseFloat(values[3]) || 0,\r\n            right: parseFloat(values[1]) || 0,\r\n            bottom: parseFloat(values[2]) || 0\r\n        });\r\n    }\r\n    return safeAreaInset;\r\n}\r\n\r\nfunction getBoxValues(element, prop, sign) {\r\n    var style = getComputedStyle(element);\r\n    var t = parseFloat(style[prop + 'Top']) || 0;\r\n    var l = parseFloat(style[prop + 'Left']) || 0;\r\n    var r = parseFloat(style[prop + 'Right']) || 0;\r\n    var b = parseFloat(style[prop + 'Bottom']) || 0;\r\n    return sign === -1 ? [-l, -t, -r, -b] : [l, t, r, b];\r\n}\r\n\r\nfunction getInnerBoxValues(element, prop) {\r\n    var a = prop ? getBoxValues(element, prop, -1) : [0, 0, 0, 0];\r\n    var b = getBoxValues(element, 'border');\r\n    if (element !== root && element !== document.body) {\r\n        var dx = element.offsetWidth - element.clientWidth - b[0] - b[2];\r\n        var dy = element.offsetHeight - element.clientHeight - b[1] - b[3];\r\n        if (dx > 0.5) {\r\n            b[element.clientLeft - b[0] > 0.5 ? 0 : 2] += dx;\r\n        }\r\n        if (dy > 0.5) {\r\n            b[element.clientTop - b[1] > 0.5 ? 1 : 3] += dy;\r\n        }\r\n    }\r\n    return [a[0] - b[0], a[1] - b[1], a[2] - b[2], a[3] - b[3]];\r\n}\r\n\r\nfunction applyBoxValues(rect, values) {\r\n    return rect.expand.apply(rect, makeArray(values));\r\n}\r\n\r\nfunction getScrollOffset(winOrElm) {\r\n    return {\r\n        x: winOrElm.pageXOffset || winOrElm.scrollLeft || 0,\r\n        y: winOrElm.pageYOffset || winOrElm.scrollTop || 0\r\n    };\r\n}\r\n\r\nfunction getScrollParent(element, skipSelf, target) {\r\n    target = target || element;\r\n    for (; element; element = element.parentNode) {\r\n        var s = getComputedStyle(element);\r\n        if (skipSelf) {\r\n            return element === root || s.position === 'fixed' ? null : getScrollParent(element.parentNode, false, target);\r\n        }\r\n        if (element === root || s.overflow !== 'visible' || !matchWord(s.position, 'static relative') || getContentRectCustom(element, target)) {\r\n            break;\r\n        }\r\n    }\r\n    return element;\r\n}\r\n\r\nfunction scrollBy(element, x, y, behavior) {\r\n    behavior = behavior || 'auto';\r\n    var result = emitDOMEvent('scrollBy', element, { x, y, behavior }, { asyncResult: false });\r\n    if (result) {\r\n        return result;\r\n    }\r\n    element = element === window || element === document.body ? root : element;\r\n\r\n    var style = getComputedStyle(element);\r\n    if (style.overflowX !== 'scroll' && style.overflowX !== 'auto') {\r\n        x = 0;\r\n    }\r\n    // include special case for root or body where scrolling is enabled when overflowY is visible\r\n    if (style.overflowY !== 'scroll' && style.overflowY !== 'auto' && (element !== root || style.overflowY !== 'visible')) {\r\n        y = 0;\r\n    }\r\n    if (!x && !y) {\r\n        return { x, y };\r\n    }\r\n    var orig = getScrollOffset(element);\r\n    var getResult = function () {\r\n        var cur = getScrollOffset(element);\r\n        return {\r\n            x: cur.x - orig.x,\r\n            y: cur.y - orig.y\r\n        };\r\n    };\r\n    var getOptions = function (left, top, behavior) {\r\n        return { left, top, behavior };\r\n    };\r\n    if (element.scrollBy) {\r\n        element.scrollBy(getOptions(x, y, 'instant'));\r\n        if (behavior === 'smooth' || (behavior === 'auto' && style.scrollBehavior === 'smooth')) {\r\n            result = getResult();\r\n            element.scrollTo(getOptions(orig.x, orig.y, 'instant'));\r\n            element.scrollBy(getOptions(x, y, behavior));\r\n        }\r\n    } else {\r\n        element.scrollLeft = orig.x + x;\r\n        element.scrollTop = orig.y + y;\r\n    }\r\n    return result || getResult();\r\n}\r\n\r\nfunction getContentRectCustom(element, target) {\r\n    var result = emitDOMEvent('getContentRect', element, { target }, { asyncResult: false });\r\n    return result && toPlainRect(result);\r\n}\r\n\r\nfunction getContentRectNative(element) {\r\n    if (element === document.body) {\r\n        element = root;\r\n    }\r\n    var parentRect = applyBoxValues(getRect(element), getInnerBoxValues(element, 'scrollPadding'));\r\n    if (element === root) {\r\n        var inset = getSafeAreaInset();\r\n        var winRect = getRect();\r\n        return toPlainRect({\r\n            top: Math.max(parentRect.top, winRect.top + inset.top),\r\n            left: Math.max(parentRect.left, winRect.left + inset.left),\r\n            right: Math.min(parentRect.right, winRect.right - inset.right),\r\n            bottom: Math.min(parentRect.bottom, winRect.bottom - inset.bottom)\r\n        });\r\n    }\r\n    return parentRect;\r\n}\r\n\r\nfunction getContentRect(element) {\r\n    return getContentRectCustom(element, element) || getContentRectNative(element);\r\n}\r\n\r\nfunction scrollIntoView(element, align, rect, within, behavior) {\r\n    if (!isVisible(element)) {\r\n        return false;\r\n    }\r\n    if (typeof align !== 'string') {\r\n        behavior = within;\r\n        within = rect;\r\n        rect = align;\r\n        align = '';\r\n    }\r\n    within = within || root;\r\n    if (!rect || rect.top === undefined) {\r\n        rect = getRect(element, typeof rect === 'number' ? rect : getBoxValues(element, 'scrollMargin'));\r\n    }\r\n    var dirX = matchWord(align, 'left right');\r\n    var dirY = matchWord(align, 'top bottom');\r\n    if (!dirX || !dirY) {\r\n        var iter = matchWordMulti(align, 'auto center');\r\n        var iterValue = iter();\r\n        dirX = dirX || iterValue;\r\n        dirY = dirY || iter() || iterValue;\r\n    }\r\n    var getDelta = function (a, b, dir, dStart, dEnd, dCenter) {\r\n        if (dir === dStart || dir === dEnd) {\r\n            return a[dir] - b[dir];\r\n        } else if (dir === 'center') {\r\n            return a[dCenter] - b[dCenter];\r\n        } else {\r\n            var d = a[dStart] - b[dStart];\r\n            return Math.min(d, 0) || Math.max(0, Math.min(d, a[dEnd] - b[dEnd]));\r\n        }\r\n    };\r\n    var parent = getScrollParent(element);\r\n    var result = { x: 0, y: 0 };\r\n    while (containsOrEquals(within, parent)) {\r\n        var parentRect = getContentRectCustom(parent, element) || getContentRectNative(parent);\r\n        var deltaX = getDelta(rect, parentRect, dirX, 'left', 'right', 'centerX');\r\n        var deltaY = getDelta(rect, parentRect, dirY, 'top', 'bottom', 'centerY');\r\n        if (deltaX || deltaY) {\r\n            var parentResult = scrollBy(parent, deltaX, deltaY, behavior);\r\n            rect = rect.translate(-parentResult.x, -parentResult.y);\r\n            result.x += parentResult.x;\r\n            result.y += parentResult.y;\r\n        }\r\n        parent = getScrollParent(parent, true, element);\r\n    }\r\n    return (result.x || result.y) ? result : false;\r\n}\r\n\r\n\r\n/* --------------------------------------\r\n * Range and rect\r\n * -------------------------------------- */\r\n\r\nfunction makeSelection(b, e) {\r\n    var selection = getSelection();\r\n    if (!selection) {\r\n        return;\r\n    }\r\n    e = e || b;\r\n\r\n    // for newer browsers that supports setBaseAndExtent\r\n    // avoid undesirable effects when direction of editor's selection direction does not match native one\r\n    if (selection.setBaseAndExtent) {\r\n        selection.setBaseAndExtent(b.startContainer, b.startOffset, e.endContainer, e.endOffset);\r\n        return;\r\n    }\r\n\r\n    var range = document.createRange();\r\n    range.setStart(b.startContainer, b.startOffset);\r\n    range.setEnd(e.endContainer, e.endOffset);\r\n    selection.removeAllRanges();\r\n    selection.addRange(range);\r\n}\r\n\r\nfunction getRect(elm, includeMargin) {\r\n    var rect, margins;\r\n    elm = elm || window;\r\n    if (elm === window) {\r\n        rect = visualViewport ? toPlainRect(0, 0, visualViewport.width, visualViewport.height) : toPlainRect(0, 0, root.clientWidth, root.clientHeight);\r\n    } else if (elm.getRect) {\r\n        rect = elm.getRect();\r\n    } else {\r\n        elm = elm.element || elm;\r\n        if (elm === root && (!includeMargin || typeof includeMargin === 'number')) {\r\n            rect = getRect(attachHelperDiv());\r\n        } else if (!isVisible(elm)) {\r\n            // return zero rect at origin aligning with getBoundingClientRect\r\n            rect = toPlainRect(0, 0, 0, 0);\r\n            includeMargin = 0;\r\n        } else {\r\n            rect = toPlainRect(elm.getBoundingClientRect());\r\n            switch (includeMargin) {\r\n                case true:\r\n                case 'margin-box':\r\n                    margins = getBoxValues(elm, 'margin');\r\n                    includeMargin = includeMargin === true ? margins.map(function (v) {\r\n                        return Math.max(0, v);\r\n                    }) : margins;\r\n                    break;\r\n                case 'border-box':\r\n                    includeMargin = 0;\r\n                    break;\r\n                case 'padding-box':\r\n                    includeMargin = getInnerBoxValues(elm);\r\n                    break;\r\n                case 'content-box':\r\n                    includeMargin = getInnerBoxValues(elm, 'padding');\r\n            }\r\n        }\r\n    }\r\n    return includeMargin ? applyBoxValues(rect, includeMargin) : rect;\r\n}\r\n\r\nfunction getRects(range) {\r\n    if (!is(range, Range)) {\r\n        var r1 = document.createRange();\r\n        r1.selectNodeContents(range);\r\n        range = r1;\r\n    }\r\n    return map(range.getClientRects(), toPlainRect);\r\n}\r\n\r\nfunction toPlainRect(l, t, r, b) {\r\n    function clip(v) {\r\n        // IE provides precision up to 0.05 but with floating point errors that hinder comparisons\r\n        return Math.round(v * 1000) / 1000;\r\n    }\r\n    if (l.top !== undefined) {\r\n        return new Rect(clip(l.left), clip(l.top), clip(l.right), clip(l.bottom));\r\n    }\r\n    if (r === undefined) {\r\n        return new Rect(l, t, l, t);\r\n    }\r\n    return new Rect(l, t, r, b);\r\n}\r\n\r\nfunction rectEquals(a, b) {\r\n    function check(prop) {\r\n        return Math.abs(a[prop] - b[prop]) < 1;\r\n    }\r\n    return check('left') && check('top') && check('bottom') && check('right');\r\n}\r\n\r\nfunction rectCovers(a, b) {\r\n    return b.left >= a.left && b.right <= a.right && b.top >= a.top && b.bottom <= a.bottom;\r\n}\r\n\r\nfunction rectIntersects(a, b) {\r\n    return !(b.right < a.left || b.left > a.right) && !(b.bottom < a.top || b.top > a.bottom);\r\n}\r\n\r\nfunction pointInRect(x, y, rect, within) {\r\n    within = within || 0;\r\n    return rect.width && rect.height && x - rect.left >= -within && x - rect.right <= within && y - rect.top >= -within && y - rect.bottom <= within;\r\n}\r\n\r\nfunction mergeRect(a, b) {\r\n    return toPlainRect(Math.min(a.left, b.left), Math.min(a.top, b.top), Math.max(a.right, b.right), Math.max(a.bottom, b.bottom));\r\n}\r\n\r\nfunction elementFromPoint(x, y, container) {\r\n    container = container || document.body;\r\n    return any(elementsFromPoint.call(document, x, y), function (v) {\r\n        return containsOrEquals(container, v) && getComputedStyle(v).pointerEvents !== 'none';\r\n    }) || null;\r\n}\r\n\r\n\r\nexport {\r\n    domReady,\r\n    tagName,\r\n    isVisible,\r\n    matchSelector,\r\n    comparePosition,\r\n    connected,\r\n    containsOrEquals,\r\n    acceptNode,\r\n    combineNodeFilters,\r\n    iterateNode,\r\n    iterateNodeToArray,\r\n\r\n    getCommonAncestor,\r\n    parentsAndSelf,\r\n    selectIncludeSelf,\r\n    selectClosestRelative,\r\n\r\n    createNodeIterator,\r\n    createTreeWalker,\r\n\r\n    bind,\r\n    bindOnce,\r\n    bindUntil,\r\n    dispatchDOMMouseEvent,\r\n\r\n    removeNode,\r\n    getClass,\r\n    setClass,\r\n    getSafeAreaInset,\r\n    getScrollOffset,\r\n    getScrollParent,\r\n    getContentRect,\r\n    scrollBy,\r\n    scrollIntoView,\r\n    makeSelection,\r\n\r\n    getRect,\r\n    getRects,\r\n    toPlainRect,\r\n    rectEquals,\r\n    rectCovers,\r\n    rectIntersects,\r\n    pointInRect,\r\n    mergeRect,\r\n    elementFromPoint\r\n};\r\n","import Promise from \"./include/promise-polyfill.js\";\r\nimport $ from \"./include/jquery.js\";\r\nimport * as ErrorCode from \"./errorCode.js\";\r\nimport { window, document, getComputedStyle, root } from \"./env.js\";\r\nimport { getClass, setClass, iterateNode, createNodeIterator, isVisible, bind } from \"./domUtil.js\";\r\nimport { reject, noop, resolve, each, matchWord, keys, resolveAll, grep, errorWithCode } from \"./util.js\";\r\n\r\nconst getAnimationsImpl = root.getAnimations;\r\n\r\nfunction parseCSS(value) {\r\n    var styles = {};\r\n    var div = document.createElement('div');\r\n    div.setAttribute('style', value);\r\n    each(div.style, function (i, v) {\r\n        styles[v] = div.style[v];\r\n    });\r\n    return styles;\r\n}\r\n\r\nfunction isCssUrlValue(value) {\r\n    return value && value !== 'none' && /url\\((?:'(.+)'|\"(.+)\"|([^)]+))\\)/.test(value) && (RegExp.$1 || RegExp.$2 || RegExp.$3);\r\n}\r\n\r\nfunction normalizeCSSValue(curValue) {\r\n    if (curValue === 'matrix(1, 0, 0, 1, 0, 0)') {\r\n        return 'none';\r\n    }\r\n    return curValue;\r\n}\r\n\r\nfunction styleToJSON(style) {\r\n    var t = {};\r\n    each(style, function (i, v) {\r\n        t[v] = style[v];\r\n    });\r\n    return t;\r\n}\r\n\r\nfunction animatableValue(v, allowNumber) {\r\n    return /(?:^|\\s)(?:[+-]?(\\d+(?:\\.\\d+)?)(cm|mm|Q|in|pc|pt|px|em|ex|ch|rem|lh|vw|vh|vmin|vmax|%)?|#[0-9a-f]{3,}|(rgba?|hsla?|matrix|calc)\\(.+\\))(?:$|\\s)/.test(v) && (allowNumber || !RegExp.$1 || RegExp.$2);\r\n}\r\n\r\nfunction removeVendorPrefix(name) {\r\n    return name.replace(/^-(webkit|moz|ms|o)-/, '');\r\n}\r\n\r\nfunction runCSSTransition(element, className, callback) {\r\n    if (getClass(element, className)) {\r\n        return reject(errorWithCode(ErrorCode.invalidOperation));\r\n    }\r\n    callback = callback || noop;\r\n    if (callback === true) {\r\n        callback = setClass.bind(null, element, className, false);\r\n    }\r\n\r\n    function complete() {\r\n        if (getClass(element, className)) {\r\n            callback();\r\n            return resolve(element);\r\n        } else {\r\n            return reject(errorWithCode(ErrorCode.cancelled));\r\n        }\r\n    }\r\n\r\n    if (getAnimationsImpl) {\r\n        var anim = getAnimationsImpl.call(element, { subtree: true });\r\n        setClass(element, className, true);\r\n        anim = grep(getAnimationsImpl.call(element, { subtree: true }), function (v) {\r\n            return !anim.includes(v);\r\n        });\r\n        if (!anim[0]) {\r\n            return complete();\r\n        }\r\n        return resolveAll(anim.map(function (v) {\r\n            return v.finished;\r\n        })).then(complete, function () {\r\n            return reject(errorWithCode(ErrorCode.cancelled));\r\n        });\r\n    }\r\n\r\n    var arr = [];\r\n    var map1 = new Map();\r\n    var test = function (element, pseudoElement) {\r\n        var style = getComputedStyle(element, pseudoElement);\r\n        if (style.transitionDuration !== '0s' || style.animationName != 'none') {\r\n            var key = { element: element, pseudoElement: pseudoElement };\r\n            map1.set(key, style.transitionProperty.split(/,\\s*/));\r\n            arr.push(key);\r\n        }\r\n    };\r\n    setClass(element, className, true);\r\n    iterateNode(createNodeIterator(element, 1, function (v) {\r\n        if (!isVisible(v)) {\r\n            return 2;\r\n        }\r\n        test(v, null);\r\n        test(v, '::before');\r\n        test(v, '::after');\r\n    }));\r\n    if (!arr[0]) {\r\n        return complete();\r\n    }\r\n\r\n    var targets = arr.map(function (v) {\r\n        return v.element;\r\n    });\r\n    setClass(element, className, false);\r\n    $(targets).css({\r\n        transition: 'none',\r\n        animationDuration: '0s',\r\n    });\r\n    setClass(element, className, true);\r\n    var newStyle = arr.map(function (v) {\r\n        return styleToJSON(getComputedStyle(v.element, v.pseudoElement));\r\n    });\r\n    setClass(element, className, false);\r\n\r\n    var appendPseudoToAnim = window.AnimationEvent && 'pseudoElement' in AnimationEvent.prototype;\r\n    var map = new Map();\r\n    each(arr, function (i, v) {\r\n        var pseudoElement = v.pseudoElement;\r\n        var curStyle = getComputedStyle(v.element, pseudoElement);\r\n        var transitionProperties = map1.get(v);\r\n        var dict = {};\r\n        each(curStyle, function (j, v) {\r\n            var curValue = normalizeCSSValue(curStyle[v]);\r\n            var newValue = normalizeCSSValue(newStyle[i][v]);\r\n            if (curValue !== newValue) {\r\n                var prop = removeVendorPrefix(v);\r\n                var allowNumber = matchWord(v, 'opacity line-height');\r\n                if (prop === 'animation-name') {\r\n                    var prevAnim = curValue.replace(/,/g, '');\r\n                    each(newValue.split(/,\\s*/), function (i, v) {\r\n                        if (v !== 'none' && !matchWord(prevAnim, v)) {\r\n                            dict['@' + v + ((appendPseudoToAnim && pseudoElement) || '')] = true;\r\n                        }\r\n                    });\r\n                } else if (prop === 'transform' || (animatableValue(curValue, allowNumber) && animatableValue(newValue, allowNumber) && !/^scroll-limit/.test(prop))) {\r\n                    if (transitionProperties[0] === 'all' || transitionProperties.indexOf(v + (pseudoElement || '')) >= 0) {\r\n                        dict[prop + (pseudoElement || '')] = true;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        if (keys(dict)[0]) {\r\n            map.set(v.element, dict);\r\n        }\r\n    });\r\n    $(targets).css({\r\n        transition: '',\r\n        animationDuration: '',\r\n    });\r\n    setClass(element, className, true);\r\n    if (!map.size) {\r\n        return complete();\r\n    }\r\n\r\n    return new Promise(function (resolve, reject) {\r\n        var unbind = bind(element, 'animationend transitionend', function (e) {\r\n            var dict = map.get(e.target) || {};\r\n            delete dict[(e.propertyName ? removeVendorPrefix(e.propertyName) : '@' + e.animationName) + (e.pseudoElement || '')];\r\n            if (!keys(dict)[0] && map.delete(e.target) && !map.size) {\r\n                unbind();\r\n                resolve(complete());\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nexport {\r\n    parseCSS,\r\n    isCssUrlValue,\r\n    runCSSTransition\r\n};\r\n","import { comparePosition, containsOrEquals, createTreeWalker, iterateNode, parentsAndSelf } from \"./domUtil.js\";\r\nimport { root } from \"./env.js\";\r\nimport { ZetaEventContainer } from \"./events.js\";\r\nimport { observe, watchElements } from \"./observe.js\";\r\nimport { createPrivateStore, defineHiddenProperty, defineOwnProperty, definePrototype, each, equal, extend, grep, is, isFunction, isPlainObject, kv, map, mapGet, mapRemove, noop, pick, throws } from \"./util.js\";\r\n\r\nconst SNAPSHOT_PROPS = 'parentNode previousSibling nextSibling'.split(' ');\r\n\r\nconst _ = createPrivateStore();\r\nconst previous = new WeakMap();\r\nconst setPrototypeOf = Object.setPrototypeOf;\r\nconst collectMutations = observe(root, handleMutations);\r\n\r\n/** @type {WeakMap<Element, VersionState>} */\r\nvar versionMap = new WeakMap();\r\nvar version = 0;\r\n\r\n/* --------------------------------------\r\n * Helper functions\r\n * -------------------------------------- */\r\n\r\nfunction throwOrReturn(result, throwError, message) {\r\n    if (!result && throwError) {\r\n        throws(message);\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction assertSameTree(tree, node, throwError) {\r\n    var assert = _(node).tree === tree;\r\n    return throwOrReturn(assert, throwError, 'Node does not belongs to this tree');\r\n}\r\n\r\nfunction assertDescendantOfTree(tree, element, throwError) {\r\n    var assert = containsOrEquals(tree, element);\r\n    return throwOrReturn(assert, throwError, 'Element must be a descendant of the root node');\r\n}\r\n\r\n/**\r\n * @class\r\n * @property {number} version\r\n */\r\nfunction VersionState() {\r\n    this.version = version;\r\n}\r\n\r\nfunction initNode(tree, node, element) {\r\n    var map = (containsOrEquals(tree.element, element) ? _(tree).nodes : _(tree).detached);\r\n    if (map.has(element)) {\r\n        throws('Another node instance already exist');\r\n    }\r\n    var state = mapGet(versionMap, element, VersionState);\r\n    var sNode = _(node, {\r\n        version: version,\r\n        tree: tree,\r\n        node: node,\r\n        traversable: is(node, TraversableNode),\r\n        state: state,\r\n        parentState: state,\r\n        parentNode: null,\r\n        previousSibling: null,\r\n        nextSibling: null,\r\n        childNodes: []\r\n    });\r\n    map.set(element, sNode);\r\n    defineHiddenProperty(node, 'element', element, true);\r\n    if (tree.rootNode) {\r\n        insertNode(sNode);\r\n    }\r\n    return sNode;\r\n}\r\n\r\nfunction findNode(tree, element, returnParent) {\r\n    var sTree = _(tree);\r\n    var sNode = sTree.nodes.get(element) || sTree.detached.get(element) || (returnParent && findParent(tree, element));\r\n    return sNode && checkNodeState(sNode);\r\n}\r\n\r\nfunction findParent(tree, element) {\r\n    if (!element) {\r\n        element = tree.node.element;\r\n        tree = tree.tree;\r\n    }\r\n    if (element !== tree.element) {\r\n        var sTree = _(tree);\r\n        element = element.parentNode;\r\n        for (; element && element !== tree.element; element = element.parentNode) {\r\n            var result = sTree.nodes.get(element) || sTree.detached.get(element);\r\n            if (result) {\r\n                return result;\r\n            }\r\n        }\r\n    }\r\n    return containsOrEquals(tree, element) && _(tree.rootNode);\r\n}\r\n\r\nfunction setParentNode(sNode, sParent) {\r\n    sNode.parentNode = (sParent || '').node || null;\r\n    sNode.parentState = (sParent || sNode).state;\r\n}\r\n\r\nfunction checkNodeState(sNode) {\r\n    collectMutations();\r\n    if (sNode.version !== sNode.parentState.version || _(sNode.tree).collectNewNodes()) {\r\n        updateTree(sNode.tree);\r\n    }\r\n    return sNode;\r\n}\r\n\r\nfunction insertNode(sNode) {\r\n    return (sNode.traversable ? insertTraversableNode : insertInheritedNode)(sNode);\r\n}\r\n\r\nfunction removeNode(sNode, hardRemove) {\r\n    return (sNode.traversable ? removeTraversableNode : removeInheritedNode)(sNode, hardRemove);\r\n}\r\n\r\nfunction removeNodeFromMap(sNode) {\r\n    var sTree = _(sNode.tree);\r\n    var element = sNode.node.element;\r\n    if (!mapRemove(sTree.nodes, element)) {\r\n        // the node is already removed from the tree\r\n        // therefore nothing to do\r\n        return false;\r\n    }\r\n    return removeNode(sNode, true);\r\n}\r\n\r\nfunction insertChildNode(sParent, sChild) {\r\n    if (!sParent || sParent === sChild || sChild.parentNode === sParent.node) {\r\n        return false;\r\n    }\r\n    if (sChild.parentNode) {\r\n        removeNode(sChild);\r\n    }\r\n    var childNodes = sChild.childNodes;\r\n    var parentChildNodes = sParent.childNodes;\r\n    var pos = parentChildNodes.length;\r\n    for (var i = pos - 1; i >= 0; i--) {\r\n        var v = comparePosition(parentChildNodes[i], sChild.node, true);\r\n        if (v < 0) {\r\n            break;\r\n        }\r\n        pos = i;\r\n        if (v !== v) {\r\n            setParentNode(_(parentChildNodes[i]), sChild);\r\n            childNodes.unshift(parentChildNodes.splice(i, 1)[0]);\r\n        }\r\n    }\r\n    setParentNode(sChild, sParent);\r\n    parentChildNodes.splice(pos, 0, sChild.node);\r\n    return [pos, childNodes, parentChildNodes];\r\n}\r\n\r\nfunction insertTraversableNode(sNode) {\r\n    var sParent = findParent(sNode);\r\n    var result = insertChildNode(sParent, sNode);\r\n    if (result) {\r\n        var empty = {};\r\n        var childNodes = result[1];\r\n        if (childNodes[0]) {\r\n            var s1 = _(childNodes[0]);\r\n            var s2 = _(childNodes[childNodes.length - 1]);\r\n            var previousSibling = s1.previousSibling;\r\n            var nextSibling = s2.nextSibling;\r\n            (_(previousSibling) || empty).nextSibling = nextSibling;\r\n            (_(nextSibling) || empty).previousSibling = previousSibling;\r\n            (s1 || empty).previousSibling = null;\r\n            (s2 || empty).nextSibling = null;\r\n        }\r\n        var parentChildNodes = result[2];\r\n        if (parentChildNodes[1]) {\r\n            var pos = result[0];\r\n            var p1 = parentChildNodes[pos - 1] || null;\r\n            var p2 = parentChildNodes[pos + 1] || null;\r\n            sNode.nextSibling = p2;\r\n            sNode.previousSibling = p1;\r\n            (_(p1) || empty).nextSibling = sNode.node;\r\n            (_(p2) || empty).previousSibling = sNode.node;\r\n        }\r\n    }\r\n    return !!result;\r\n}\r\n\r\nfunction insertInheritedNode(sNode) {\r\n    var sParent = findParent(sNode);\r\n    var result = insertChildNode(sParent, sNode);\r\n    if (result) {\r\n        setPrototypeOf(sNode.node, sParent.node);\r\n        each(result[1], function (i, v) {\r\n            setPrototypeOf(v, sNode.node);\r\n        });\r\n    }\r\n    return !!result;\r\n}\r\n\r\nfunction removeTraversableNode(sNode, hardRemove, ignoreSibling) {\r\n    var parent = sNode.parentNode;\r\n    if (!parent) {\r\n        return false;\r\n    }\r\n    var newParent = (findParent(sNode) || '').node;\r\n    if (!hardRemove && newParent === parent) {\r\n        return false;\r\n    }\r\n    var childNodes = [];\r\n    var sParent = _(parent);\r\n    var parentChildNodes = sParent.childNodes;\r\n    var pos = parentChildNodes.indexOf(sNode.node);\r\n    if (hardRemove) {\r\n        newParent = null;\r\n        childNodes = sNode.childNodes.splice(0);\r\n        if (!ignoreSibling && childNodes[0]) {\r\n            var states = map(childNodes, function (v) {\r\n                return _(v);\r\n            });\r\n            states[0].previousSibling = parentChildNodes[pos - 1] || null;\r\n            states[states.length - 1].nextSibling = parentChildNodes[pos + 1] || null;\r\n            each(states, function (i, v) {\r\n                setParentNode(v, sParent);\r\n            });\r\n        }\r\n    }\r\n    if (!ignoreSibling && parentChildNodes[1]) {\r\n        var empty = {};\r\n        var s1 = _(parentChildNodes[pos - 1]);\r\n        var s2 = _(parentChildNodes[pos + 1]);\r\n        (s1 || empty).nextSibling = childNodes[0] || (s2 || empty).node || null;\r\n        (s2 || empty).previousSibling = childNodes[childNodes.length - 1] || (s1 || empty).node || null;\r\n    }\r\n    if (!previous.has(sNode.node)) {\r\n        previous.set(sNode.node, pick(sNode, SNAPSHOT_PROPS));\r\n    }\r\n    setParentNode(sNode, _(newParent));\r\n    sNode.previousSibling = null;\r\n    sNode.nextSibling = null;\r\n    parentChildNodes.splice.apply(parentChildNodes, [pos, 1].concat(childNodes));\r\n    return true;\r\n}\r\n\r\nfunction removeInheritedNode(sNode, hardRemove) {\r\n    var updated = removeTraversableNode(sNode, hardRemove, true);\r\n    if (updated) {\r\n        setPrototypeOf(sNode.node, InheritedNode.prototype);\r\n        if (hardRemove) {\r\n            each(sNode.childNodes, function (i, v) {\r\n                setPrototypeOf(v, sNode.parentNode);\r\n            });\r\n        }\r\n    }\r\n    return updated;\r\n}\r\n\r\nfunction reorderTraversableChildNodes(sNode) {\r\n    var childNodes = sNode.childNodes;\r\n    var copy = childNodes.slice();\r\n    var updated = [];\r\n    for (var i = copy.length - 1; i >= 0; i--) {\r\n        if (!containsOrEquals(sNode.tree, copy[i]) && removeTraversableNode(_(copy[i]))) {\r\n            updated[updated.length] = copy[i];\r\n        }\r\n    }\r\n    if (childNodes.length > 1) {\r\n        copy = childNodes.slice(0);\r\n        childNodes.sort(comparePosition);\r\n        if (!equal(childNodes, copy)) {\r\n            each(childNodes, function (i, v) {\r\n                var sChildNode = _(v);\r\n                var oldValues = pick(sChildNode, SNAPSHOT_PROPS);\r\n                var newValues = {\r\n                    parentNode: sNode.node,\r\n                    previousSibling: childNodes[i - 1] || null,\r\n                    nextSibling: childNodes[i + 1] || null\r\n                };\r\n                if (!equal(oldValues, newValues)) {\r\n                    extend(sChildNode, newValues);\r\n                    updated[updated.length] = v;\r\n                    if (!previous.has(v)) {\r\n                        previous.set(v, oldValues);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    return updated;\r\n}\r\n\r\nfunction updateTree(tree) {\r\n    var sTree = _(tree);\r\n    var traversable = is(tree, TraversableNodeTree);\r\n    var updatedNodes = [];\r\n    each(sTree.nodes, function (element, sNode) {\r\n        var newVersion = sNode.state.version;\r\n        var connected = containsOrEquals(tree, element);\r\n        if (!connected) {\r\n            sTree.detached.set(element, mapRemove(sTree.nodes, element));\r\n        }\r\n        if (!connected || sNode.version !== newVersion) {\r\n            var updated = false;\r\n            if (traversable) {\r\n                updated |= updatedNodes.length !== updatedNodes.push.apply(updatedNodes, reorderTraversableChildNodes(sNode));\r\n            }\r\n            updated |= (connected ? insertNode : removeNode)(sNode);\r\n            sNode.version = newVersion;\r\n            if (updated) {\r\n                updatedNodes[updatedNodes.length] = sNode.node;\r\n            }\r\n            if (connected) {\r\n                var iterator = createTreeWalker(element, 1, function (v) {\r\n                    return v !== element && sTree.nodes.has(v) ? 2 : 1;\r\n                });\r\n                iterateNode(iterator, function (element) {\r\n                    var recovered = mapRemove(sTree.detached, element);\r\n                    if (recovered) {\r\n                        sTree.nodes.set(element, recovered);\r\n                        insertNode(recovered);\r\n                        updatedNodes[updatedNodes.length] = recovered.node;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    });\r\n    sTree.collectNewNodes();\r\n    sTree.version = version;\r\n    if (updatedNodes[0]) {\r\n        var records = map(updatedNodes, function (v) {\r\n            return extend({ node: v }, mapRemove(previous, v) || pick(v, SNAPSHOT_PROPS));\r\n        });\r\n        sTree.container.emit('update', tree, { updatedNodes, records }, false);\r\n    }\r\n}\r\n\r\nfunction handleMutations(mutations) {\r\n    var empty = {};\r\n    each(mutations, function (i, v) {\r\n        var addedElm = grep(v.addedNodes, function (v) {\r\n            return is(v, Element);\r\n        });\r\n        var removedElm = grep(v.removedNodes, function (v) {\r\n            return is(v, Element);\r\n        });\r\n        if (addedElm[0] || removedElm[0]) {\r\n            version++;\r\n            each(parentsAndSelf(v.target).concat(addedElm, removedElm), function (i, v) {\r\n                (mapGet(versionMap, v) || empty).version = version;\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\n/* --------------------------------------\r\n * Classes\r\n * -------------------------------------- */\r\n\r\nfunction createNodeClass(baseClass, constructor) {\r\n    constructor = constructor || function () { };\r\n    if (is(constructor.prototype, baseClass)) {\r\n        return constructor;\r\n    }\r\n    function Node(tree, element) {\r\n        baseClass.call(this, tree, element);\r\n        constructor.call(this, tree, element);\r\n    }\r\n    definePrototype(constructor, baseClass, constructor.prototype);\r\n    return extend(Node, { prototype: constructor.prototype });\r\n}\r\n\r\nfunction VirtualNode() {\r\n}\r\n\r\nfunction TraversableNode(tree, element) {\r\n    initNode(tree, this, element);\r\n}\r\n\r\ndefinePrototype(TraversableNode, VirtualNode, {\r\n    get parentNode() {\r\n        return checkNodeState(_(this)).parentNode;\r\n    },\r\n    get childNodes() {\r\n        return checkNodeState(_(this)).childNodes.slice(0);\r\n    },\r\n    get firstChild() {\r\n        return checkNodeState(_(this)).childNodes[0] || null;\r\n    },\r\n    get lastChild() {\r\n        var arr = checkNodeState(_(this)).childNodes;\r\n        return arr[arr.length - 1] || null;\r\n    },\r\n    get previousSibling() {\r\n        return checkNodeState(_(this)).previousSibling;\r\n    },\r\n    get nextSibling() {\r\n        return checkNodeState(_(this)).nextSibling;\r\n    }\r\n});\r\n\r\nfunction InheritedNode(tree, element) {\r\n    initNode(tree, this, element);\r\n}\r\n\r\ndefinePrototype(InheritedNode, VirtualNode);\r\n\r\nfunction NodeTree(baseClass, root, constructor, options) {\r\n    var self = this;\r\n    var state = _(self, extend({}, options, {\r\n        collectNewNodes: noop,\r\n        nodeClass: createNodeClass(baseClass, constructor),\r\n        nodes: new Map(),\r\n        detached: new WeakMap(),\r\n        container: new ZetaEventContainer()\r\n    }));\r\n    defineOwnProperty(self, 'element', root, true);\r\n    defineOwnProperty(self, 'rootNode', self.setNode(root), true);\r\n    observe(root, function () {\r\n        updateTree(self);\r\n    });\r\n    if (state.selector) {\r\n        state.collectNewNodes = watchElements(root, state.selector, function (addedNodes) {\r\n            each(addedNodes, function (i, v) {\r\n                self.setNode(v);\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\ndefinePrototype(NodeTree, {\r\n    on: function (event, handler) {\r\n        return _(this).container.add(this, isPlainObject(event) || kv(event, handler));\r\n    },\r\n    getNode: function (element) {\r\n        if (!assertDescendantOfTree(this, element)) {\r\n            return null;\r\n        }\r\n        var self = this;\r\n        var result = findNode(self, element, true);\r\n        if (!result) {\r\n            _(self).collectNewNodes();\r\n            result = findNode(self, element, true);\r\n        }\r\n        return result && result.node;\r\n    },\r\n    setNode: function (element) {\r\n        var self = this;\r\n        var result = findNode(self, element);\r\n        return result ? result.node : new (_(self).nodeClass)(self, element);\r\n    },\r\n    removeNode: function (node) {\r\n        assertSameTree(this, node, true);\r\n        removeNodeFromMap(_(node));\r\n    },\r\n    update: function () {\r\n        collectMutations();\r\n        updateTree(this);\r\n    }\r\n});\r\n\r\nfunction TraversableNodeTree(root, constructor, options) {\r\n    NodeTree.call(this, TraversableNode, root, constructor, options);\r\n}\r\n\r\ndefinePrototype(TraversableNodeTree, NodeTree, {\r\n    isNodeVisible: function () {\r\n        return true;\r\n    },\r\n    acceptNode: function () {\r\n        return 1;\r\n    }\r\n});\r\n\r\nfunction InheritedNodeTree(root, constructor, options) {\r\n    NodeTree.call(this, InheritedNode, root, constructor, options);\r\n}\r\n\r\ndefinePrototype(InheritedNodeTree, NodeTree, {\r\n    descendants: function (node) {\r\n        if (is(node, Node)) {\r\n            node = this.setNode(node);\r\n        } else {\r\n            assertSameTree(this, node, true);\r\n        }\r\n        var arr = [node];\r\n        var next = function () {\r\n            var cur = arr.shift();\r\n            if (cur) {\r\n                arr.unshift.apply(arr, checkNodeState(_(cur)).childNodes);\r\n            }\r\n            return { done: !cur, value: cur };\r\n        };\r\n        return { next };\r\n    }\r\n});\r\n\r\nfunction TreeWalker(root, whatToShow, filter) {\r\n    var self = this;\r\n    self.whatToShow = whatToShow || -1;\r\n    self.filter = filter;\r\n    self.currentNode = root;\r\n    self.root = root;\r\n}\r\n\r\nfunction treeWalkerIsNodeVisible(inst, node) {\r\n    return node && _(node).tree.isNodeVisible(node, inst) && node;\r\n}\r\n\r\nfunction treeWalkerAcceptNode(inst, node, checkVisibility) {\r\n    if (checkVisibility && node !== inst.root && !treeWalkerIsNodeVisible(inst, node)) {\r\n        return 2;\r\n    }\r\n    var rv = _(node).tree.acceptNode(node, inst);\r\n    if (rv !== 1) {\r\n        return rv;\r\n    }\r\n    var filter = isFunction(inst.filter);\r\n    return filter ? filter(node) : 1;\r\n}\r\ntreeWalkerAcceptNode.$1 = 0;\r\n\r\nfunction treeWalkerNodeAccepted(inst, node, checkVisibility) {\r\n    treeWalkerAcceptNode.$1 = treeWalkerAcceptNode(inst, node, checkVisibility);\r\n    if (treeWalkerAcceptNode.$1 === 1) {\r\n        inst.currentNode = node;\r\n        return true;\r\n    }\r\n}\r\n\r\nfunction treeWalkerTraverseChildren(inst, pChild, pSib) {\r\n    var node = inst.currentNode[pChild];\r\n    while (node) {\r\n        if (treeWalkerNodeAccepted(inst, node, true)) {\r\n            return node;\r\n        }\r\n        if (treeWalkerAcceptNode.$1 === 3 && node[pChild]) {\r\n            node = node[pChild];\r\n            continue;\r\n        }\r\n        while (!node[pSib]) {\r\n            node = treeWalkerIsNodeVisible(inst, node.parentNode);\r\n            if (!node || node === inst.root || node === inst.currentNode) {\r\n                return null;\r\n            }\r\n        }\r\n        node = node[pSib];\r\n    }\r\n    return null;\r\n}\r\n\r\nfunction treeWalkerTraverseSibling(inst, pChild, pSib) {\r\n    var node = inst.currentNode;\r\n    while (node && node !== inst.root) {\r\n        var sibling = node[pSib];\r\n        while (sibling) {\r\n            if (treeWalkerNodeAccepted(inst, sibling)) {\r\n                return sibling;\r\n            }\r\n            sibling = (treeWalkerAcceptNode.$1 === 2 || !sibling[pChild]) ? sibling[pSib] : sibling[pChild];\r\n        }\r\n        node = treeWalkerIsNodeVisible(inst, node.parentNode);\r\n        if (!node || node === inst.root || treeWalkerAcceptNode(inst, node, true) === 1) {\r\n            return null;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\ndefinePrototype(TreeWalker, {\r\n    previousSibling: function () {\r\n        return treeWalkerTraverseSibling(this, 'lastChild', 'previousSibling');\r\n    },\r\n    nextSibling: function () {\r\n        return treeWalkerTraverseSibling(this, 'firstChild', 'nextSibling');\r\n    },\r\n    firstChild: function () {\r\n        return treeWalkerTraverseChildren(this, 'firstChild', 'nextSibling');\r\n    },\r\n    lastChild: function () {\r\n        return treeWalkerTraverseChildren(this, 'lastChild', 'previousSibling');\r\n    },\r\n    parentNode: function () {\r\n        for (var node = this.currentNode; node && node !== this.root; node = node.parentNode) {\r\n            var parentNode = node.parentNode;\r\n            if (treeWalkerNodeAccepted(this, parentNode, true)) {\r\n                return parentNode;\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n    previousNode: function () {\r\n        var self = this;\r\n        for (var node = self.currentNode; node && node !== self.root;) {\r\n            for (var sibling = node.previousSibling; sibling; sibling = node.previousSibling) {\r\n                node = sibling;\r\n                var rv = treeWalkerAcceptNode(self, sibling);\r\n                while (rv !== 2 && treeWalkerIsNodeVisible(self, node.firstChild)) {\r\n                    node = node.lastChild;\r\n                    rv = treeWalkerAcceptNode(self, node, true);\r\n                }\r\n                if (rv === 1) {\r\n                    self.currentNode = node;\r\n                    return node;\r\n                }\r\n            }\r\n            node = treeWalkerIsNodeVisible(self, node.parentNode);\r\n            if (!node || node === self.root) {\r\n                return null;\r\n            }\r\n            if (treeWalkerNodeAccepted(self, node, true)) {\r\n                return node;\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n    nextNode: function () {\r\n        var self = this;\r\n        var rv = 1;\r\n        for (var node = self.currentNode; node;) {\r\n            while (rv !== 2 && node.firstChild) {\r\n                node = node.firstChild;\r\n                if (treeWalkerNodeAccepted(self, node, true)) {\r\n                    return node;\r\n                }\r\n                rv = treeWalkerAcceptNode.$1;\r\n            }\r\n            while (node && node !== self.root && !node.nextSibling) {\r\n                node = treeWalkerIsNodeVisible(self, node.parentNode);\r\n            }\r\n            if (!node || node === self.root) {\r\n                return null;\r\n            }\r\n            node = node.nextSibling;\r\n            if (treeWalkerNodeAccepted(self, node, true)) {\r\n                return node;\r\n            }\r\n            rv = treeWalkerAcceptNode.$1;\r\n        }\r\n    }\r\n});\r\n\r\nexport {\r\n    VirtualNode,\r\n    NodeTree,\r\n    TraversableNode,\r\n    TraversableNodeTree,\r\n    InheritedNode,\r\n    InheritedNodeTree,\r\n    TreeWalker\r\n};\r\n","import { IS_IOS, IS_IE10, IS_IE, IS_MAC, IS_TOUCH } from \"./env.js\";\r\nimport * as ErrorCode from \"./errorCode.js\";\r\nimport * as _util from \"./util.js\";\r\nimport * as _domUtil from \"./domUtil.js\";\r\nimport * as cssUtil from \"./cssUtil.js\";\r\nimport { CancellationRequest } from \"./domLock.js\";\r\nimport { ZetaEventContainer, ZetaEventSource } from \"./events.js\";\r\nimport { InheritedNode, InheritedNodeTree, TraversableNode, TraversableNodeTree, TreeWalker } from \"./tree.js\";\r\nimport dom from \"./dom.js\";\r\n\r\nconst util = _util.extend({}, _util, _domUtil);\r\n\r\nexport default {\r\n    IS_IOS,\r\n    IS_IE10,\r\n    IS_IE,\r\n    IS_MAC,\r\n    IS_TOUCH,\r\n    util,\r\n    dom,\r\n    css: cssUtil,\r\n    ErrorCode,\r\n    EventContainer: ZetaEventContainer,\r\n    EventSource: ZetaEventSource,\r\n    CancellationRequest,\r\n    InheritedNode,\r\n    InheritedNodeTree,\r\n    TraversableNode,\r\n    TraversableNodeTree,\r\n    TreeWalker\r\n};\r\n\r\nexport {\r\n    IS_IOS,\r\n    IS_IE10,\r\n    IS_IE,\r\n    IS_MAC,\r\n    IS_TOUCH,\r\n    util,\r\n    dom,\r\n    cssUtil as css,\r\n    ErrorCode,\r\n    ZetaEventContainer as EventContainer,\r\n    ZetaEventSource as EventSource,\r\n    CancellationRequest,\r\n    InheritedNode,\r\n    InheritedNodeTree,\r\n    TraversableNode,\r\n    TraversableNodeTree,\r\n    TreeWalker\r\n};\r\n"],"names":["Promise","window","jQuery","$","self","document","root","documentElement","getSelection","getComputedStyle","reportError","error","console","domReady","IS_MAC","navigator","userAgent","indexOf","IS_IOS","test","MSStream","maxTouchPoints","IS_IE10","ActiveXObject","IS_IE","style","msTouchAction","undefined","msUserSelect","IS_TOUCH","cancellationRejected","cancelled","invalidOperation","objectProto","Object","prototype","keys","freeze","defineProperty","getOwnPropertyDescriptor","getOwnPropertyNames","getPrototypeOf","hasOwnPropertyImpl","hasOwnProperty","propertyIsEnumerableImpl","propertyIsEnumerable","toStringImpl","toString","values","obj","vals","key","call","push","queueMicrotask","callback","resolve","then","sameValue","is","a","b","sameValueZero","compareFn","v","i","get","has","setImmediateStore","Map","matchWordCache","create","watchStore","createPrivateStore","noop","pipe","either","x","y","fn","isUndefinedOrNull","value","isArray","Array","isFunction","isError","isThenable","isPlainObject","proto","_typeof","isArrayLike","length","slice","makeArray","forEach","arr","each","extend","options","name","src","copy","copyIsArray","clone","target","arguments","deep","cur","bind","split","Set","len","entries","next","done","nextNode","map","result","apply","grep","splice","unshift","any","single","kv","fill","pick","exclude","mapObject","mapGet","passKey","set","mapRemove","delete","arrRemove","index","setAdd","add","equal","constructor","type","size","needles","combineFn","args","executeOnce","WeakMap","setImmediate","setImmediateOnceCallback","setImmediateOnce","setTimeoutOnce","ms","setTimeout","clearImmediateOnce","t","clearTimeout","setInterval","clearInterval","setIntervalSafe","last","now","Date","always","Math","max","min","throws","Error","throwNotFunction","errorWithCode","code","message","props","isErrorWithCode","iequal","toLowerCase","randomId","random","substr","repeat","str","count","join","camel","String","replace","toUpperCase","hyphenate","ucfirst","charAt","lcfirst","trim","getMatchWordRegex","needle","RegExp","execFirstParen","re","haystack","$1","matchWord","matchWordMulti","source","htmlDecode","input","DOMParser","parseFromString","textContent","reject","reason","promise","resolveAll","all","d","retryable","makeAsync","e","deferrable","resolved","catchAsync","waitFor","catch","setPromiseTimeout","resolveWhenTimeout","delay","prop","getOwnPropertyDescriptors","define","o","p","enumerable","defineOwnProperty","readonly","configurable","writable","defineGetterProperty","defineHiddenProperty","definePrototype","inherit","setPrototypeOf","deepFreeze","getObservableState","sync","oldValues","newValues","alias","handlers","handleChanges","lock","ensurePropertyObserved","state","defineObservableProperty","throwNotOwnDataProperty","desc","defineAliasProperty","targetProp","initialValue","setter","oldValue","watch","handler","fireInit","wrapper","watchOnce","returnValue","watchable","containsOrEquals","selectIncludeSelf","detachHandlers","optionsForChildList","subtree","childList","globalCleanups","createAutoCleanupMap","element","DetachHandlerState","observe","filterRecords","attributes","attributeFilter","processRecords","records","filter","attributeName","id","observer","MutationObserver","collect","discard","takeRecords","dispose","disconnect","registerCleanup","initDetachWatcher","container","contains","afterDetached","from","Node","trackElements","selector","collection","remove","matched","removedNodes","addedNodes","watchElements","watchAttributes","concat","added","watchOwnAttributes","nodeType","child","ZETA_KEY","KEYNAMES","MetaLeft","MetaRight","ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","OSLeft","OSRight","ContextMenu","NumpadMultiply","NumpadAdd","NumpadSubtract","NumpadDecimal","NumpadDivide","Semicolon","Equal","Minus","Slash","Backquote","BracketLeft","BracketRight","Quote","ErrorCode","parentsAndSelf","emitDOMEvent","listenDOMEvent","ZetaEventSource","iterateFocusPath","handledErrors","WeakSet","subscribers","locks","clearLock","leaveCounter","CancellationRequest","eventSource","sourceKeyName","muteAndReturn","ensureLock","promises","cancel","reduce","cancelCallbacks","handlePromise","oncancel","sendAsync","event","targets","subscribeAsync","handled","started","force","asyncStart","asyncEnd","notifyAsync","runAsync","delegated","controller","abort","signal","AbortController","res","preventLeave","locked","parents","cancelLock","finalize","preventDefault","reportErrorImpl","bindUntil","elementFromPoint","getContentRect","getScrollParent","isVisible","makeSelection","matchSelector","scrollIntoView","tagName","toPlainRect","getEventContext","getEventSource","SELECTOR_FOCUSABLE","focusPath","focusFriends","focusElements","modalElements","releaseModal","tabIndex","tabRoots","shortcuts","metaKeys","alt","ctrl","meta","shift","beforeInputType","insertFromDrop","insertFromPaste","deleteByCut","sourceDict","cut","drop","paste","wheel","windowFocusedOut","currentEvent","currentKeyName","currentMetaKey","currentTabRoot","lastKey","lastClickTarget","eventPath","trustedEvent","trackPromise","trackCallbacks","touchedClick","inputType","pointerType","sourceCapabilities","firesTouchEvents","pointerId","button","buttons","approxMultipleOf","abs","round","measureLine","p1","p2","dx","clientX","dy","clientY","deg","atan2","PI","sqrt","textInputAllowed","disabled","readOnly","isContentEditable","isMouseDown","which","normalizeKey","keyCode","char","charCode","fromCharCode","inputValueImpl","method","setTextData","node","text","offset","setSelectionRange","range","createRange","data","setStart","dispatchInputEvent","dispatchEvent","InputEvent","bubbles","cleanupFocusPath","setFocus","body","getActiveElement","getModalElement","focused","strict","activeElement","focusable","getFocusableWithin","friends","within","findIndex","position","triggerFocusEvent","eventName","elements","relatedTarget","handleable","triggerModalChangeEvent","modalElement","updateTabRoot","tabRoot","updateTabIndex","newNodes","attr","suppressFocusChange","setFocusUnsafe","before","removeFocusUnsafe","friend","reverse","path","suppressFocus","focus","blur","removed","setModal","parentNode","modalPath","setTabRoot","unsetTabRoot","retainFocus","releaseFocus","visited","returnedOnce","getShortcut","setShortcut","command","keystroke","dict","trackPointer","lastPoint","scrollWithin","scrollParent","scrollTimeout","rej","setCapture","stopScroll","cancelAnimationFrame","startScroll","requestAnimationFrame","ts","f","r","right","left","bottom","top","expand","mouseup","touchend","keydown","mousemove","touches","touchmove","points","releaseCapture","preventScroll","beginDrag","initialPoint","beginPinchZoom","initialPoints","m0","m1","insertText","startOffset","endOffset","selectionStart","prevText","maxLength","selectionEnd","newtext","eventTimeout","modifierCount","modifiedKeyCode","mouseInitialPoint","preventClick","pressTimeout","hasBeforeInput","hasCompositionUpdate","imeModifyOnUpdate","imeNodeText","imeNode","imeOffset","imeText","getEventName","suffix","mod","ctrlKey","metaKey","altKey","shiftKey","updateIMEState","selection","anchorNode","focusOffset","anchorOffset","childNodes","triggerUIEvent","preventNative","originalEvent","triggerKeystrokeEvent","keyName","extraEvent","preAlias","postAlias","triggerMouseEvent","point","metakey","triggerGestureEvent","gesture","handleUIEventWrapper","isMoveEvent","isKeyboardEvent","fireFocusReturn","isTrusted","stopImmediatePropagation","uiEvents","compositionstart","compositionupdate","compositionend","prevOffset","prevNodeText","afterNodeText","afterOffset","o1","o2","textInput","keyup","keypress","beforeinput","cancelable","touchstart","singleTouch","line","swipeDir","mousedown","dir","deltaY","deltaX","detail","stopPropagation","click","contextmenu","dblclick","capture","passive","focusin","focusout","scrollWidth","offsetWidth","overflowX","scrollLeft","scrollHeight","offsetHeight","overflowY","scrollTop","undo","redo","selectAll","focusInput","pressedKey","context","focusedElements","eventSourcePath","ready","on","emit","dom","_","containers","domEventTrap","ZetaEventContainer","domContainer","asyncEventData","asyncEvents","lastEventSource","setLastEventSource","prepEventSource","getContainerForElement","destroyed","removeContainerForElement","cached","normalizeEventTarget","captureDOMEvents","normalizeEventOptions","overrides","asyncResult","emitter","ZetaEventEmitter","wrapSelectorHandler","closest","currentTarget","extra","registerAsyncEvent","mergeData","emitAsyncEvents","removeAsyncEvent","events","clear","properties","timestamp","performance","current","emitterIterateTargets","emitting","components","component","emitterCallHandlers","getEventPath","handlerName","shouldForward","forwardEvent","ZetaEvent","contextContainer","prevEvent","initEvent","emitterHandleResult","isHandled","isDefaultPrevented","defaultPrevented","autoDestroy","normalizeTouchEvents","willDestroy","destroy","tap","getContexts","containerCreateDispose","containerRegisterHandler","_delete","refs","emitAsync","flushEvents","ref","ref2","ContainerComponent","callbacks","elementsFromPoint","msElementsFromPoint","compareDocumentPositionImpl","compareDocumentPosition","visualViewport","parseFloat","helperDiv","safeAreaInset","Rect","l","width","height","centerX","centerY","collapse","side","rect","pos","translate","w","h","attachHelperDiv","appendChild","comparePosition","NaN","connected","commonAncestorContainer","contained","display","acceptNode","iterator","currentNode","whatToShow","combineNodeFilters","iterateNode","until","iterateNodeToArray","getCommonAncestor","parent","querySelectorAll","find","selectClosestRelative","$matched","createNodeIterator","createTreeWalker","addOrRemoveEventListener","listener","useCapture","bindOnce","unbind","dispatchDOMMouseEvent","createEvent","initMouseEvent","view","screenX","screenY","removeNode","removeChild","getClass","className","getAttribute","setClass","replaced","setAttribute","getSafeAreaInset","getPropertyValue","getBoxValues","sign","getInnerBoxValues","clientWidth","clientHeight","clientLeft","clientTop","applyBoxValues","getScrollOffset","winOrElm","pageXOffset","pageYOffset","skipSelf","s","overflow","getContentRectCustom","scrollBy","behavior","orig","getResult","getOptions","scrollBehavior","scrollTo","getContentRectNative","parentRect","getRect","inset","winRect","align","dirX","dirY","iter","iterValue","getDelta","dStart","dEnd","dCenter","parentResult","setBaseAndExtent","startContainer","endContainer","setEnd","removeAllRanges","addRange","elm","includeMargin","margins","getBoundingClientRect","getRects","Range","r1","selectNodeContents","getClientRects","clip","rectEquals","check","rectCovers","rectIntersects","pointInRect","mergeRect","pointerEvents","getAnimationsImpl","getAnimations","parseCSS","styles","div","createElement","isCssUrlValue","$2","$3","normalizeCSSValue","curValue","styleToJSON","animatableValue","allowNumber","removeVendorPrefix","runCSSTransition","complete","anim","includes","finished","map1","pseudoElement","transitionDuration","animationName","transitionProperty","css","transition","animationDuration","newStyle","appendPseudoToAnim","AnimationEvent","curStyle","transitionProperties","j","newValue","prevAnim","propertyName","SNAPSHOT_PROPS","previous","collectMutations","handleMutations","versionMap","version","throwOrReturn","throwError","assertSameTree","tree","assert","assertDescendantOfTree","VersionState","initNode","nodes","detached","sNode","traversable","TraversableNode","parentState","previousSibling","nextSibling","rootNode","insertNode","findNode","returnParent","sTree","findParent","checkNodeState","setParentNode","sParent","collectNewNodes","updateTree","insertTraversableNode","insertInheritedNode","hardRemove","removeTraversableNode","removeInheritedNode","removeNodeFromMap","insertChildNode","sChild","parentChildNodes","empty","s1","s2","ignoreSibling","newParent","states","updated","InheritedNode","reorderTraversableChildNodes","sort","sChildNode","TraversableNodeTree","updatedNodes","newVersion","recovered","mutations","addedElm","Element","removedElm","createNodeClass","baseClass","VirtualNode","firstChild","lastChild","NodeTree","nodeClass","setNode","getNode","update","isNodeVisible","InheritedNodeTree","descendants","TreeWalker","treeWalkerIsNodeVisible","inst","treeWalkerAcceptNode","checkVisibility","rv","treeWalkerNodeAccepted","treeWalkerTraverseChildren","pChild","pSib","treeWalkerTraverseSibling","sibling","previousNode","_util","_domUtil","cssUtil","util","EventContainer","EventSource"],"sourceRoot":""}